function BA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H0={exports:{}},Zu={},K0={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),UA=Symbol.for("react.portal"),zA=Symbol.for("react.fragment"),WA=Symbol.for("react.strict_mode"),$A=Symbol.for("react.profiler"),qA=Symbol.for("react.provider"),HA=Symbol.for("react.context"),KA=Symbol.for("react.forward_ref"),GA=Symbol.for("react.suspense"),QA=Symbol.for("react.memo"),XA=Symbol.for("react.lazy"),pg=Symbol.iterator;function YA(t){return t===null||typeof t!="object"?null:(t=pg&&t[pg]||t["@@iterator"],typeof t=="function"?t:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q0=Object.assign,X0={};function Ws(t,e,n){this.props=t,this.context=e,this.refs=X0,this.updater=n||G0}Ws.prototype.isReactComponent={};Ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Y0(){}Y0.prototype=Ws.prototype;function Id(t,e,n){this.props=t,this.context=e,this.refs=X0,this.updater=n||G0}var Cd=Id.prototype=new Y0;Cd.constructor=Id;Q0(Cd,Ws.prototype);Cd.isPureReactComponent=!0;var mg=Array.isArray,J0=Object.prototype.hasOwnProperty,xd={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function e_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)J0.call(e,r)&&!Z0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ka,type:t,key:s,ref:o,props:i,_owner:xd.current}}function JA(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function ZA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gg=/\/+/g;function Zc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZA(""+t.key):e.toString(36)}function jl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ka:case UA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zc(o,0):r,mg(i)?(n="",t!=null&&(n=t.replace(gg,"$&/")+"/"),jl(i,e,n,"",function(c){return c})):i!=null&&(Rd(i)&&(i=JA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",mg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Zc(s,a);o+=jl(s,e,n,u,i)}else if(u=YA(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Zc(s,a++),o+=jl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dl(t,e,n){if(t==null)return t;var r=[],i=0;return jl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function eS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Ul={transition:null},tS={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Ul,ReactCurrentOwner:xd};function t_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:dl,forEach:function(t,e,n){dl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dl(t,function(){e++}),e},toArray:function(t){return dl(t,function(e){return e})||[]},only:function(t){if(!Rd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Ws;ce.Fragment=zA;ce.Profiler=$A;ce.PureComponent=Id;ce.StrictMode=WA;ce.Suspense=GA;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tS;ce.act=t_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=xd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)J0.call(e,u)&&!Z0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ka,type:t.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:HA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qA,_context:t},t.Consumer=t};ce.createElement=e_;ce.createFactory=function(t){var e=e_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:KA,render:t}};ce.isValidElement=Rd;ce.lazy=function(t){return{$$typeof:XA,_payload:{_status:-1,_result:t},_init:eS}};ce.memo=function(t,e){return{$$typeof:QA,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Ul.transition;Ul.transition={};try{t()}finally{Ul.transition=e}};ce.unstable_act=t_;ce.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ce.useContext=function(t){return Mt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ce.useId=function(){return Mt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ce.useRef=function(t){return Mt.current.useRef(t)};ce.useState=function(t){return Mt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Mt.current.useTransition()};ce.version="18.3.1";K0.exports=ce;var O=K0.exports;const nS=jA(O),rS=BA({__proto__:null,default:nS},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS=O,sS=Symbol.for("react.element"),oS=Symbol.for("react.fragment"),aS=Object.prototype.hasOwnProperty,lS=iS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uS={key:!0,ref:!0,__self:!0,__source:!0};function n_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aS.call(e,r)&&!uS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sS,type:t,key:s,ref:o,props:i,_owner:lS.current}}Zu.Fragment=oS;Zu.jsx=n_;Zu.jsxs=n_;H0.exports=Zu;var K=H0.exports,r_={exports:{}},sn={},i_={exports:{}},s_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ne){var te=q.length;q.push(ne);e:for(;0<te;){var we=te-1>>>1,Ee=q[we];if(0<i(Ee,ne))q[we]=ne,q[te]=Ee,te=we;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ne=q[0],te=q.pop();if(te!==ne){q[0]=te;e:for(var we=0,Ee=q.length,Le=Ee>>>1;we<Le;){var ln=2*(we+1)-1,Ht=q[ln],Kt=ln+1,Ot=q[Kt];if(0>i(Ht,te))Kt<Ee&&0>i(Ot,Ht)?(q[we]=Ot,q[Kt]=te,we=Kt):(q[we]=Ht,q[ln]=te,we=ln);else if(Kt<Ee&&0>i(Ot,te))q[we]=Ot,q[Kt]=te,we=Kt;else break e}}return ne}function i(q,ne){var te=q.sortIndex-ne.sortIndex;return te!==0?te:q.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,m=3,E=!1,T=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(q){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=q)r(c),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(c)}}function b(q){if(C=!1,y(q),!T)if(n(u)!==null)T=!0,kn(L);else{var ne=n(c);ne!==null&&Ce(b,ne.startTime-q)}}function L(q,ne){T=!1,C&&(C=!1,w(v),v=-1),E=!0;var te=m;try{for(y(ne),d=n(u);d!==null&&(!(d.expirationTime>ne)||q&&!V());){var we=d.callback;if(typeof we=="function"){d.callback=null,m=d.priorityLevel;var Ee=we(d.expirationTime<=ne);ne=t.unstable_now(),typeof Ee=="function"?d.callback=Ee:d===n(u)&&r(u),y(ne)}else r(u);d=n(u)}if(d!==null)var Le=!0;else{var ln=n(c);ln!==null&&Ce(b,ln.startTime-ne),Le=!1}return Le}finally{d=null,m=te,E=!1}}var B=!1,A=null,v=-1,S=5,P=-1;function V(){return!(t.unstable_now()-P<S)}function D(){if(A!==null){var q=t.unstable_now();P=q;var ne=!0;try{ne=A(!0,q)}finally{ne?k():(B=!1,A=null)}}else B=!1}var k;if(typeof g=="function")k=function(){g(D)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,an=it.port2;it.port1.onmessage=D,k=function(){an.postMessage(null)}}else k=function(){R(D,0)};function kn(q){A=q,B||(B=!0,k())}function Ce(q,ne){v=R(function(){q(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){T||E||(T=!0,kn(L))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var te=m;m=ne;try{return q()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ne){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=m;m=q;try{return ne()}finally{m=te}},t.unstable_scheduleCallback=function(q,ne,te){var we=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?we+te:we):te=we,q){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=te+Ee,q={id:h++,callback:ne,priorityLevel:q,startTime:te,expirationTime:Ee,sortIndex:-1},te>we?(q.sortIndex=te,e(c,q),n(u)===null&&q===n(c)&&(C?(w(v),v=-1):C=!0,Ce(b,te-we))):(q.sortIndex=Ee,e(u,q),T||E||(T=!0,kn(L))),q},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(q){var ne=m;return function(){var te=m;m=ne;try{return q.apply(this,arguments)}finally{m=te}}}})(s_);i_.exports=s_;var cS=i_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS=O,nn=cS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o_=new Set,Zo={};function Li(t,e){Is(t,e),Is(t+"Capture",e)}function Is(t,e){for(Zo[t]=e,t=0;t<e.length;t++)o_.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kh=Object.prototype.hasOwnProperty,fS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},vg={};function dS(t){return Kh.call(vg,t)?!0:Kh.call(yg,t)?!1:fS.test(t)?vg[t]=!0:(yg[t]=!0,!1)}function pS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mS(t,e,n,r){if(e===null||typeof e>"u"||pS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kd=/[\-:]([a-z])/g;function bd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kd,bd);gt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kd,bd);gt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kd,bd);gt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vd(t,e,n,r){var i=gt.hasOwnProperty(e)?gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mS(e,n,i,r)&&(n=null),r||i===null?dS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=hS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),ts=Symbol.for("react.portal"),ns=Symbol.for("react.fragment"),Dd=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),a_=Symbol.for("react.provider"),l_=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Xh=Symbol.for("react.suspense_list"),Md=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),u_=Symbol.for("react.offscreen"),_g=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,eh;function xo(t){if(eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||""}return`
`+eh+t}var th=!1;function nh(t,e){if(!t||th)return"";th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function gS(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=nh(t.type,!1),t;case 11:return t=nh(t.type.render,!1),t;case 1:return t=nh(t.type,!0),t;default:return""}}function Yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ns:return"Fragment";case ts:return"Portal";case Gh:return"Profiler";case Dd:return"StrictMode";case Qh:return"Suspense";case Xh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case l_:return(t.displayName||"Context")+".Consumer";case a_:return(t._context.displayName||"Context")+".Provider";case Nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Md:return e=t.displayName||null,e!==null?e:Yh(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return Yh(t(e))}catch{}}return null}function yS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yh(e);case 8:return e===Dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function c_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vS(t){var e=c_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=vS(t))}function h_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=c_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jh(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f_(t,e){e=e.checked,e!=null&&Vd(t,"checked",e,!1)}function Zh(t,e){f_(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ef(t,e.type,n):e.hasOwnProperty("defaultValue")&&ef(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ef(t,e,n){(e!=="number"||lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ro=Array.isArray;function vs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ro(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function d_(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ag(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function p_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?p_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,m_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_S=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(t){_S.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oo[e]=Oo[t]})});function g_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oo.hasOwnProperty(t)&&Oo[t]?(""+e).trim():e+"px"}function y_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=g_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var wS=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rf(t,e){if(e){if(wS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=null;function Ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var af=null,_s=null,ws=null;function Sg(t){if(t=Da(t)){if(typeof af!="function")throw Error(W(280));var e=t.stateNode;e&&(e=ic(e),af(t.stateNode,t.type,e))}}function v_(t){_s?ws?ws.push(t):ws=[t]:_s=t}function __(){if(_s){var t=_s,e=ws;if(ws=_s=null,Sg(t),e)for(t=0;t<e.length;t++)Sg(e[t])}}function w_(t,e){return t(e)}function E_(){}var rh=!1;function T_(t,e,n){if(rh)return t(e,n);rh=!0;try{return w_(t,e,n)}finally{rh=!1,(_s!==null||ws!==null)&&(E_(),__())}}function ta(t,e){var n=t.stateNode;if(n===null)return null;var r=ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var lf=!1;if(sr)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){lf=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{lf=!1}function ES(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Fo=!1,uu=null,cu=!1,uf=null,TS={onError:function(t){Fo=!0,uu=t}};function AS(t,e,n,r,i,s,o,a,u){Fo=!1,uu=null,ES.apply(TS,arguments)}function SS(t,e,n,r,i,s,o,a,u){if(AS.apply(this,arguments),Fo){if(Fo){var c=uu;Fo=!1,uu=null}else throw Error(W(198));cu||(cu=!0,uf=c)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pg(t){if(Oi(t)!==t)throw Error(W(188))}function PS(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Pg(i),t;if(s===r)return Pg(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function S_(t){return t=PS(t),t!==null?P_(t):null}function P_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P_(t);if(e!==null)return e;t=t.sibling}return null}var I_=nn.unstable_scheduleCallback,Ig=nn.unstable_cancelCallback,IS=nn.unstable_shouldYield,CS=nn.unstable_requestPaint,Ge=nn.unstable_now,xS=nn.unstable_getCurrentPriorityLevel,Od=nn.unstable_ImmediatePriority,C_=nn.unstable_UserBlockingPriority,hu=nn.unstable_NormalPriority,RS=nn.unstable_LowPriority,x_=nn.unstable_IdlePriority,ec=null,Ln=null;function kS(t){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:DS,bS=Math.log,VS=Math.LN2;function DS(t){return t>>>=0,t===0?32:31-(bS(t)/VS|0)|0}var yl=64,vl=4194304;function ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ko(a):(s&=o,s!==0&&(r=ko(s)))}else o=n&~i,o!==0?r=ko(o):s!==0&&(r=ko(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pn(e),i=1<<n,r|=t[n],e&=~i;return r}function NS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=NS(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R_(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ba(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pn(e),t[e]=n}function LS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Pn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Fd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function k_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var b_,Bd,V_,D_,N_,hf=!1,_l=[],Vr=null,Dr=null,Nr=null,na=new Map,ra=new Map,Ir=[],OS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cg(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(e.pointerId)}}function Eo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Da(e),e!==null&&Bd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function FS(t,e,n,r,i){switch(e){case"focusin":return Vr=Eo(Vr,t,e,n,r,i),!0;case"dragenter":return Dr=Eo(Dr,t,e,n,r,i),!0;case"mouseover":return Nr=Eo(Nr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return na.set(s,Eo(na.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ra.set(s,Eo(ra.get(s)||null,t,e,n,r,i)),!0}return!1}function M_(t){var e=wi(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=A_(n),e!==null){t.blockedOn=e,N_(t.priority,function(){V_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ff(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);of=r,n.target.dispatchEvent(r),of=null}else return e=Da(n),e!==null&&Bd(e),t.blockedOn=n,!1;e.shift()}return!0}function xg(t,e,n){zl(t)&&n.delete(e)}function BS(){hf=!1,Vr!==null&&zl(Vr)&&(Vr=null),Dr!==null&&zl(Dr)&&(Dr=null),Nr!==null&&zl(Nr)&&(Nr=null),na.forEach(xg),ra.forEach(xg)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,hf||(hf=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,BS)))}function ia(t){function e(i){return To(i,t)}if(0<_l.length){To(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&To(Vr,t),Dr!==null&&To(Dr,t),Nr!==null&&To(Nr,t),na.forEach(e),ra.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)M_(n),n.blockedOn===null&&Ir.shift()}var Es=dr.ReactCurrentBatchConfig,du=!0;function jS(t,e,n,r){var i=Pe,s=Es.transition;Es.transition=null;try{Pe=1,jd(t,e,n,r)}finally{Pe=i,Es.transition=s}}function US(t,e,n,r){var i=Pe,s=Es.transition;Es.transition=null;try{Pe=4,jd(t,e,n,r)}finally{Pe=i,Es.transition=s}}function jd(t,e,n,r){if(du){var i=ff(t,e,n,r);if(i===null)ph(t,e,r,pu,n),Cg(t,r);else if(FS(i,t,e,n,r))r.stopPropagation();else if(Cg(t,r),e&4&&-1<OS.indexOf(t)){for(;i!==null;){var s=Da(i);if(s!==null&&b_(s),s=ff(t,e,n,r),s===null&&ph(t,e,r,pu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ph(t,e,r,null,n)}}var pu=null;function ff(t,e,n,r){if(pu=null,t=Ld(r),t=wi(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pu=t,null}function L_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xS()){case Od:return 1;case C_:return 4;case hu:case RS:return 16;case x_:return 536870912;default:return 16}default:return 16}}var xr=null,Ud=null,Wl=null;function O_(){if(Wl)return Wl;var t,e=Ud,n=e.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wl=i.slice(t,1<r?1-r:void 0)}function $l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function Rg(){return!1}function on(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wl:Rg,this.isPropagationStopped=Rg,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zd=on($s),Va=ze({},$s,{view:0,detail:0}),zS=on(Va),sh,oh,Ao,tc=ze({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(sh=t.screenX-Ao.screenX,oh=t.screenY-Ao.screenY):oh=sh=0,Ao=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:oh}}),kg=on(tc),WS=ze({},tc,{dataTransfer:0}),$S=on(WS),qS=ze({},Va,{relatedTarget:0}),ah=on(qS),HS=ze({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),KS=on(HS),GS=ze({},$s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QS=on(GS),XS=ze({},$s,{data:0}),bg=on(XS),YS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZS[t])?!!e[t]:!1}function Wd(){return eP}var tP=ze({},Va,{key:function(t){if(t.key){var e=YS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wd,charCode:function(t){return t.type==="keypress"?$l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nP=on(tP),rP=ze({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vg=on(rP),iP=ze({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wd}),sP=on(iP),oP=ze({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),aP=on(oP),lP=ze({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uP=on(lP),cP=[9,13,27,32],$d=sr&&"CompositionEvent"in window,Bo=null;sr&&"documentMode"in document&&(Bo=document.documentMode);var hP=sr&&"TextEvent"in window&&!Bo,F_=sr&&(!$d||Bo&&8<Bo&&11>=Bo),Dg=" ",Ng=!1;function B_(t,e){switch(t){case"keyup":return cP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rs=!1;function fP(t,e){switch(t){case"compositionend":return j_(e);case"keypress":return e.which!==32?null:(Ng=!0,Dg);case"textInput":return t=e.data,t===Dg&&Ng?null:t;default:return null}}function dP(t,e){if(rs)return t==="compositionend"||!$d&&B_(t,e)?(t=O_(),Wl=Ud=xr=null,rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return F_&&e.locale!=="ko"?null:e.data;default:return null}}var pP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pP[t.type]:e==="textarea"}function U_(t,e,n,r){v_(r),e=mu(e,"onChange"),0<e.length&&(n=new zd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jo=null,sa=null;function mP(t){J_(t,0)}function nc(t){var e=os(t);if(h_(e))return t}function gP(t,e){if(t==="change")return e}var z_=!1;if(sr){var lh;if(sr){var uh="oninput"in document;if(!uh){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),uh=typeof Lg.oninput=="function"}lh=uh}else lh=!1;z_=lh&&(!document.documentMode||9<document.documentMode)}function Og(){jo&&(jo.detachEvent("onpropertychange",W_),sa=jo=null)}function W_(t){if(t.propertyName==="value"&&nc(sa)){var e=[];U_(e,sa,t,Ld(t)),T_(mP,e)}}function yP(t,e,n){t==="focusin"?(Og(),jo=e,sa=n,jo.attachEvent("onpropertychange",W_)):t==="focusout"&&Og()}function vP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(sa)}function _P(t,e){if(t==="click")return nc(e)}function wP(t,e){if(t==="input"||t==="change")return nc(e)}function EP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:EP;function oa(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Kh.call(e,i)||!xn(t[i],e[i]))return!1}return!0}function Fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bg(t,e){var n=Fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fg(n)}}function $_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q_(){for(var t=window,e=lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lu(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TP(t){var e=q_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$_(n.ownerDocument.documentElement,n)){if(r!==null&&qd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Bg(n,s);var o=Bg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AP=sr&&"documentMode"in document&&11>=document.documentMode,is=null,df=null,Uo=null,pf=!1;function jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pf||is==null||is!==lu(r)||(r=is,"selectionStart"in r&&qd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uo&&oa(Uo,r)||(Uo=r,r=mu(df,"onSelect"),0<r.length&&(e=new zd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=is)))}function El(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ss={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionend:El("Transition","TransitionEnd")},ch={},H_={};sr&&(H_=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function rc(t){if(ch[t])return ch[t];if(!ss[t])return t;var e=ss[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in H_)return ch[t]=e[n];return t}var K_=rc("animationend"),G_=rc("animationiteration"),Q_=rc("animationstart"),X_=rc("transitionend"),Y_=new Map,Ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){Y_.set(t,e),Li(e,[t])}for(var hh=0;hh<Ug.length;hh++){var fh=Ug[hh],SP=fh.toLowerCase(),PP=fh[0].toUpperCase()+fh.slice(1);ti(SP,"on"+PP)}ti(K_,"onAnimationEnd");ti(G_,"onAnimationIteration");ti(Q_,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(X_,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Li("onBeforeInput",["compositionend","keypress","textInput","paste"]);Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IP=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function zg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SS(r,e,void 0,t),t.currentTarget=null}function J_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;zg(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;zg(i,a,c),s=u}}}if(cu)throw t=uf,cu=!1,uf=null,t}function Ve(t,e){var n=e[_f];n===void 0&&(n=e[_f]=new Set);var r=t+"__bubble";n.has(r)||(Z_(e,t,2,!1),n.add(r))}function dh(t,e,n){var r=0;e&&(r|=4),Z_(n,t,r,e)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function aa(t){if(!t[Tl]){t[Tl]=!0,o_.forEach(function(n){n!=="selectionchange"&&(IP.has(n)||dh(n,!1,t),dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tl]||(e[Tl]=!0,dh("selectionchange",!1,e))}}function Z_(t,e,n,r){switch(L_(e)){case 1:var i=jS;break;case 4:i=US;break;default:i=jd}n=i.bind(null,e,n,t),i=void 0,!lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ph(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}T_(function(){var c=s,h=Ld(n),d=[];e:{var m=Y_.get(t);if(m!==void 0){var E=zd,T=t;switch(t){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":E=nP;break;case"focusin":T="focus",E=ah;break;case"focusout":T="blur",E=ah;break;case"beforeblur":case"afterblur":E=ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=$S;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=sP;break;case K_:case G_:case Q_:E=KS;break;case X_:E=aP;break;case"scroll":E=zS;break;case"wheel":E=uP;break;case"copy":case"cut":case"paste":E=QS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Vg}var C=(e&4)!==0,R=!C&&t==="scroll",w=C?m!==null?m+"Capture":null:m;C=[];for(var g=c,y;g!==null;){y=g;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,w!==null&&(b=ta(g,w),b!=null&&C.push(la(g,b,y)))),R)break;g=g.return}0<C.length&&(m=new E(m,T,null,n,h),d.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",m&&n!==of&&(T=n.relatedTarget||n.fromElement)&&(wi(T)||T[or]))break e;if((E||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,E?(T=n.relatedTarget||n.toElement,E=c,T=T?wi(T):null,T!==null&&(R=Oi(T),T!==R||T.tag!==5&&T.tag!==6)&&(T=null)):(E=null,T=c),E!==T)){if(C=kg,b="onMouseLeave",w="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(C=Vg,b="onPointerLeave",w="onPointerEnter",g="pointer"),R=E==null?m:os(E),y=T==null?m:os(T),m=new C(b,g+"leave",E,n,h),m.target=R,m.relatedTarget=y,b=null,wi(h)===c&&(C=new C(w,g+"enter",T,n,h),C.target=y,C.relatedTarget=R,b=C),R=b,E&&T)t:{for(C=E,w=T,g=0,y=C;y;y=Xi(y))g++;for(y=0,b=w;b;b=Xi(b))y++;for(;0<g-y;)C=Xi(C),g--;for(;0<y-g;)w=Xi(w),y--;for(;g--;){if(C===w||w!==null&&C===w.alternate)break t;C=Xi(C),w=Xi(w)}C=null}else C=null;E!==null&&Wg(d,m,E,C,!1),T!==null&&R!==null&&Wg(d,R,T,C,!0)}}e:{if(m=c?os(c):window,E=m.nodeName&&m.nodeName.toLowerCase(),E==="select"||E==="input"&&m.type==="file")var L=gP;else if(Mg(m))if(z_)L=wP;else{L=vP;var B=yP}else(E=m.nodeName)&&E.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=_P);if(L&&(L=L(t,c))){U_(d,L,n,h);break e}B&&B(t,m,c),t==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&ef(m,"number",m.value)}switch(B=c?os(c):window,t){case"focusin":(Mg(B)||B.contentEditable==="true")&&(is=B,df=c,Uo=null);break;case"focusout":Uo=df=is=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,jg(d,n,h);break;case"selectionchange":if(AP)break;case"keydown":case"keyup":jg(d,n,h)}var A;if($d)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else rs?B_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(F_&&n.locale!=="ko"&&(rs||v!=="onCompositionStart"?v==="onCompositionEnd"&&rs&&(A=O_()):(xr=h,Ud="value"in xr?xr.value:xr.textContent,rs=!0)),B=mu(c,v),0<B.length&&(v=new bg(v,t,null,n,h),d.push({event:v,listeners:B}),A?v.data=A:(A=j_(n),A!==null&&(v.data=A)))),(A=hP?fP(t,n):dP(t,n))&&(c=mu(c,"onBeforeInput"),0<c.length&&(h=new bg("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=A))}J_(d,e)})}function la(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ta(t,n),s!=null&&r.unshift(la(t,s,i)),s=ta(t,e),s!=null&&r.push(la(t,s,i))),t=t.return}return r}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=ta(n,s),u!=null&&o.unshift(la(n,u,a))):i||(u=ta(n,s),u!=null&&o.push(la(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CP=/\r\n?/g,xP=/\u0000|\uFFFD/g;function $g(t){return(typeof t=="string"?t:""+t).replace(CP,`
`).replace(xP,"")}function Al(t,e,n){if(e=$g(e),$g(t)!==e&&n)throw Error(W(425))}function gu(){}var mf=null,gf=null;function yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vf=typeof setTimeout=="function"?setTimeout:void 0,RP=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,kP=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(t){return qg.resolve(null).then(t).catch(bP)}:vf;function bP(t){setTimeout(function(){throw t})}function mh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ia(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qs=Math.random().toString(36).slice(2),Mn="__reactFiber$"+qs,ua="__reactProps$"+qs,or="__reactContainer$"+qs,_f="__reactEvents$"+qs,VP="__reactListeners$"+qs,DP="__reactHandles$"+qs;function wi(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hg(t);t!==null;){if(n=t[Mn])return n;t=Hg(t)}return e}t=n,n=t.parentNode}return null}function Da(t){return t=t[Mn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function ic(t){return t[ua]||null}var wf=[],as=-1;function ni(t){return{current:t}}function Ne(t){0>as||(t.current=wf[as],wf[as]=null,as--)}function ke(t,e){as++,wf[as]=t.current,t.current=e}var qr={},bt=ni(qr),zt=ni(!1),ki=qr;function Cs(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wt(t){return t=t.childContextTypes,t!=null}function yu(){Ne(zt),Ne(bt)}function Kg(t,e,n){if(bt.current!==qr)throw Error(W(168));ke(bt,e),ke(zt,n)}function ew(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,yS(t)||"Unknown",i));return ze({},n,r)}function vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,ki=bt.current,ke(bt,t),ke(zt,zt.current),!0}function Gg(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=ew(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,Ne(zt),Ne(bt),ke(bt,t)):Ne(zt),ke(zt,n)}var Xn=null,sc=!1,gh=!1;function tw(t){Xn===null?Xn=[t]:Xn.push(t)}function NP(t){sc=!0,tw(t)}function ri(){if(!gh&&Xn!==null){gh=!0;var t=0,e=Pe;try{var n=Xn;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,sc=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),I_(Od,ri),i}finally{Pe=e,gh=!1}}return null}var ls=[],us=0,_u=null,wu=0,fn=[],dn=0,bi=null,Yn=1,Jn="";function mi(t,e){ls[us++]=wu,ls[us++]=_u,_u=t,wu=e}function nw(t,e,n){fn[dn++]=Yn,fn[dn++]=Jn,fn[dn++]=bi,bi=t;var r=Yn;t=Jn;var i=32-Pn(r)-1;r&=~(1<<i),n+=1;var s=32-Pn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yn=1<<32-Pn(e)+i|n<<i|r,Jn=s+t}else Yn=1<<s|n<<i|r,Jn=t}function Hd(t){t.return!==null&&(mi(t,1),nw(t,1,0))}function Kd(t){for(;t===_u;)_u=ls[--us],ls[us]=null,wu=ls[--us],ls[us]=null;for(;t===bi;)bi=fn[--dn],fn[dn]=null,Jn=fn[--dn],fn[dn]=null,Yn=fn[--dn],fn[dn]=null}var tn=null,Zt=null,Me=!1,Sn=null;function rw(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Zt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bi!==null?{id:Yn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,Zt=null,!0):!1;default:return!1}}function Ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tf(t){if(Me){var e=Zt;if(e){var n=e;if(!Qg(t,e)){if(Ef(t))throw Error(W(418));e=Mr(n.nextSibling);var r=tn;e&&Qg(t,e)?rw(r,n):(t.flags=t.flags&-4097|2,Me=!1,tn=t)}}else{if(Ef(t))throw Error(W(418));t.flags=t.flags&-4097|2,Me=!1,tn=t}}}function Xg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function Sl(t){if(t!==tn)return!1;if(!Me)return Xg(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yf(t.type,t.memoizedProps)),e&&(e=Zt)){if(Ef(t))throw iw(),Error(W(418));for(;e;)rw(t,e),e=Mr(e.nextSibling)}if(Xg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=tn?Mr(t.stateNode.nextSibling):null;return!0}function iw(){for(var t=Zt;t;)t=Mr(t.nextSibling)}function xs(){Zt=tn=null,Me=!1}function Gd(t){Sn===null?Sn=[t]:Sn.push(t)}var MP=dr.ReactCurrentBatchConfig;function So(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Pl(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yg(t){var e=t._init;return e(t._payload)}function sw(t){function e(w,g){if(t){var y=w.deletions;y===null?(w.deletions=[g],w.flags|=16):y.push(g)}}function n(w,g){if(!t)return null;for(;g!==null;)e(w,g),g=g.sibling;return null}function r(w,g){for(w=new Map;g!==null;)g.key!==null?w.set(g.key,g):w.set(g.index,g),g=g.sibling;return w}function i(w,g){return w=Br(w,g),w.index=0,w.sibling=null,w}function s(w,g,y){return w.index=y,t?(y=w.alternate,y!==null?(y=y.index,y<g?(w.flags|=2,g):y):(w.flags|=2,g)):(w.flags|=1048576,g)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,g,y,b){return g===null||g.tag!==6?(g=Ah(y,w.mode,b),g.return=w,g):(g=i(g,y),g.return=w,g)}function u(w,g,y,b){var L=y.type;return L===ns?h(w,g,y.props.children,b,y.key):g!==null&&(g.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Sr&&Yg(L)===g.type)?(b=i(g,y.props),b.ref=So(w,g,y),b.return=w,b):(b=Yl(y.type,y.key,y.props,null,w.mode,b),b.ref=So(w,g,y),b.return=w,b)}function c(w,g,y,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Sh(y,w.mode,b),g.return=w,g):(g=i(g,y.children||[]),g.return=w,g)}function h(w,g,y,b,L){return g===null||g.tag!==7?(g=Ii(y,w.mode,b,L),g.return=w,g):(g=i(g,y),g.return=w,g)}function d(w,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ah(""+g,w.mode,y),g.return=w,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case pl:return y=Yl(g.type,g.key,g.props,null,w.mode,y),y.ref=So(w,null,g),y.return=w,y;case ts:return g=Sh(g,w.mode,y),g.return=w,g;case Sr:var b=g._init;return d(w,b(g._payload),y)}if(Ro(g)||_o(g))return g=Ii(g,w.mode,y,null),g.return=w,g;Pl(w,g)}return null}function m(w,g,y,b){var L=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return L!==null?null:a(w,g,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return y.key===L?u(w,g,y,b):null;case ts:return y.key===L?c(w,g,y,b):null;case Sr:return L=y._init,m(w,g,L(y._payload),b)}if(Ro(y)||_o(y))return L!==null?null:h(w,g,y,b,null);Pl(w,y)}return null}function E(w,g,y,b,L){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(y)||null,a(g,w,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:return w=w.get(b.key===null?y:b.key)||null,u(g,w,b,L);case ts:return w=w.get(b.key===null?y:b.key)||null,c(g,w,b,L);case Sr:var B=b._init;return E(w,g,y,B(b._payload),L)}if(Ro(b)||_o(b))return w=w.get(y)||null,h(g,w,b,L,null);Pl(g,b)}return null}function T(w,g,y,b){for(var L=null,B=null,A=g,v=g=0,S=null;A!==null&&v<y.length;v++){A.index>v?(S=A,A=null):S=A.sibling;var P=m(w,A,y[v],b);if(P===null){A===null&&(A=S);break}t&&A&&P.alternate===null&&e(w,A),g=s(P,g,v),B===null?L=P:B.sibling=P,B=P,A=S}if(v===y.length)return n(w,A),Me&&mi(w,v),L;if(A===null){for(;v<y.length;v++)A=d(w,y[v],b),A!==null&&(g=s(A,g,v),B===null?L=A:B.sibling=A,B=A);return Me&&mi(w,v),L}for(A=r(w,A);v<y.length;v++)S=E(A,w,v,y[v],b),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?v:S.key),g=s(S,g,v),B===null?L=S:B.sibling=S,B=S);return t&&A.forEach(function(V){return e(w,V)}),Me&&mi(w,v),L}function C(w,g,y,b){var L=_o(y);if(typeof L!="function")throw Error(W(150));if(y=L.call(y),y==null)throw Error(W(151));for(var B=L=null,A=g,v=g=0,S=null,P=y.next();A!==null&&!P.done;v++,P=y.next()){A.index>v?(S=A,A=null):S=A.sibling;var V=m(w,A,P.value,b);if(V===null){A===null&&(A=S);break}t&&A&&V.alternate===null&&e(w,A),g=s(V,g,v),B===null?L=V:B.sibling=V,B=V,A=S}if(P.done)return n(w,A),Me&&mi(w,v),L;if(A===null){for(;!P.done;v++,P=y.next())P=d(w,P.value,b),P!==null&&(g=s(P,g,v),B===null?L=P:B.sibling=P,B=P);return Me&&mi(w,v),L}for(A=r(w,A);!P.done;v++,P=y.next())P=E(A,w,v,P.value,b),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?v:P.key),g=s(P,g,v),B===null?L=P:B.sibling=P,B=P);return t&&A.forEach(function(D){return e(w,D)}),Me&&mi(w,v),L}function R(w,g,y,b){if(typeof y=="object"&&y!==null&&y.type===ns&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:e:{for(var L=y.key,B=g;B!==null;){if(B.key===L){if(L=y.type,L===ns){if(B.tag===7){n(w,B.sibling),g=i(B,y.props.children),g.return=w,w=g;break e}}else if(B.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Sr&&Yg(L)===B.type){n(w,B.sibling),g=i(B,y.props),g.ref=So(w,B,y),g.return=w,w=g;break e}n(w,B);break}else e(w,B);B=B.sibling}y.type===ns?(g=Ii(y.props.children,w.mode,b,y.key),g.return=w,w=g):(b=Yl(y.type,y.key,y.props,null,w.mode,b),b.ref=So(w,g,y),b.return=w,w=b)}return o(w);case ts:e:{for(B=y.key;g!==null;){if(g.key===B)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(w,g.sibling),g=i(g,y.children||[]),g.return=w,w=g;break e}else{n(w,g);break}else e(w,g);g=g.sibling}g=Sh(y,w.mode,b),g.return=w,w=g}return o(w);case Sr:return B=y._init,R(w,g,B(y._payload),b)}if(Ro(y))return T(w,g,y,b);if(_o(y))return C(w,g,y,b);Pl(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(w,g.sibling),g=i(g,y),g.return=w,w=g):(n(w,g),g=Ah(y,w.mode,b),g.return=w,w=g),o(w)):n(w,g)}return R}var Rs=sw(!0),ow=sw(!1),Eu=ni(null),Tu=null,cs=null,Qd=null;function Xd(){Qd=cs=Tu=null}function Yd(t){var e=Eu.current;Ne(Eu),t._currentValue=e}function Af(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ts(t,e){Tu=t,Qd=cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(Qd!==t)if(t={context:t,memoizedValue:e,next:null},cs===null){if(Tu===null)throw Error(W(308));cs=t,Tu.dependencies={lanes:0,firstContext:t}}else cs=cs.next=t;return e}var Ei=null;function Jd(t){Ei===null?Ei=[t]:Ei.push(t)}function aw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Jd(e)):(n.next=i.next,i.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function Zd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ar(t,n)}return i=r.interleaved,i===null?(e.next=e,Jd(r)):(e.next=i.next,i.next=e),r.interleaved=e,ar(t,n)}function ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fd(t,n)}}function Jg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Au(t,e,n,r){var i=t.updateQueue;Pr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,h=c=u=null,a=s;do{var m=a.lane,E=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,C=a;switch(m=e,E=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){d=T.call(E,d,m);break e}d=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,m=typeof T=="function"?T.call(E,d,m):T,m==null)break e;d=ze({},d,m);break e;case 2:Pr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else E={eventTime:E,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=E,u=d):h=h.next=E,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Di|=o,t.lanes=o,t.memoizedState=d}}function Zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Na={},On=ni(Na),ca=ni(Na),ha=ni(Na);function Ti(t){if(t===Na)throw Error(W(174));return t}function ep(t,e){switch(ke(ha,e),ke(ca,t),ke(On,Na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nf(e,t)}Ne(On),ke(On,e)}function ks(){Ne(On),Ne(ca),Ne(ha)}function uw(t){Ti(ha.current);var e=Ti(On.current),n=nf(e,t.type);e!==n&&(ke(ca,t),ke(On,n))}function tp(t){ca.current===t&&(Ne(On),Ne(ca))}var Be=ni(0);function Su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yh=[];function np(){for(var t=0;t<yh.length;t++)yh[t]._workInProgressVersionPrimary=null;yh.length=0}var Hl=dr.ReactCurrentDispatcher,vh=dr.ReactCurrentBatchConfig,Vi=0,Ue=null,et=null,at=null,Pu=!1,zo=!1,fa=0,LP=0;function Tt(){throw Error(W(321))}function rp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function ip(t,e,n,r,i,s){if(Vi=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hl.current=t===null||t.memoizedState===null?jP:UP,t=n(r,i),zo){s=0;do{if(zo=!1,fa=0,25<=s)throw Error(W(301));s+=1,at=et=null,e.updateQueue=null,Hl.current=zP,t=n(r,i)}while(zo)}if(Hl.current=Iu,e=et!==null&&et.next!==null,Vi=0,at=et=Ue=null,Pu=!1,e)throw Error(W(300));return t}function sp(){var t=fa!==0;return fa=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ue.memoizedState=at=t:at=at.next=t,at}function yn(){if(et===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=at===null?Ue.memoizedState:at.next;if(e!==null)at=e,et=t;else{if(t===null)throw Error(W(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},at===null?Ue.memoizedState=at=t:at=at.next=t}return at}function da(t,e){return typeof e=="function"?e(t):e}function _h(t){var e=yn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Vi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Ue.lanes|=h,Di|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,xn(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ue.lanes|=s,Di|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wh(t){var e=yn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xn(s,e.memoizedState)||(Ut=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cw(){}function hw(t,e){var n=Ue,r=yn(),i=e(),s=!xn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ut=!0),r=r.queue,op(pw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,pa(9,dw.bind(null,n,r,i,e),void 0,null),lt===null)throw Error(W(349));Vi&30||fw(n,e,i)}return i}function fw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dw(t,e,n,r){e.value=n,e.getSnapshot=r,mw(e)&&gw(t)}function pw(t,e,n){return n(function(){mw(e)&&gw(t)})}function mw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function gw(t){var e=ar(t,1);e!==null&&In(e,t,1,-1)}function ey(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=BP.bind(null,Ue,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yw(){return yn().memoizedState}function Kl(t,e,n,r){var i=Nn();Ue.flags|=t,i.memoizedState=pa(1|e,n,void 0,r===void 0?null:r)}function oc(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(et!==null){var o=et.memoizedState;if(s=o.destroy,r!==null&&rp(r,o.deps)){i.memoizedState=pa(e,n,s,r);return}}Ue.flags|=t,i.memoizedState=pa(1|e,n,s,r)}function ty(t,e){return Kl(8390656,8,t,e)}function op(t,e){return oc(2048,8,t,e)}function vw(t,e){return oc(4,2,t,e)}function _w(t,e){return oc(4,4,t,e)}function ww(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ew(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,ww.bind(null,e,t),n)}function ap(){}function Tw(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Aw(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sw(t,e,n){return Vi&21?(xn(n,e)||(n=R_(),Ue.lanes|=n,Di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function OP(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=vh.transition;vh.transition={};try{t(!1),e()}finally{Pe=n,vh.transition=r}}function Pw(){return yn().memoizedState}function FP(t,e,n){var r=Fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Iw(t))Cw(e,n);else if(n=aw(t,e,n,r),n!==null){var i=Nt();In(n,t,r,i),xw(n,e,r)}}function BP(t,e,n){var r=Fr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iw(t))Cw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,xn(a,o)){var u=e.interleaved;u===null?(i.next=i,Jd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=aw(t,e,i,r),n!==null&&(i=Nt(),In(n,t,r,i),xw(n,e,r))}}function Iw(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function Cw(t,e){zo=Pu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fd(t,n)}}var Iu={readContext:gn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},jP={readContext:gn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:ty,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4194308,4,ww.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FP.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:ey,useDebugValue:ap,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=ey(!1),e=t[0];return t=OP.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,i=Nn();if(Me){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),lt===null)throw Error(W(349));Vi&30||fw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ty(pw.bind(null,r,s,t),[t]),r.flags|=2048,pa(9,dw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Nn(),e=lt.identifierPrefix;if(Me){var n=Jn,r=Yn;n=(r&~(1<<32-Pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UP={readContext:gn,useCallback:Tw,useContext:gn,useEffect:op,useImperativeHandle:Ew,useInsertionEffect:vw,useLayoutEffect:_w,useMemo:Aw,useReducer:_h,useRef:yw,useState:function(){return _h(da)},useDebugValue:ap,useDeferredValue:function(t){var e=yn();return Sw(e,et.memoizedState,t)},useTransition:function(){var t=_h(da)[0],e=yn().memoizedState;return[t,e]},useMutableSource:cw,useSyncExternalStore:hw,useId:Pw,unstable_isNewReconciler:!1},zP={readContext:gn,useCallback:Tw,useContext:gn,useEffect:op,useImperativeHandle:Ew,useInsertionEffect:vw,useLayoutEffect:_w,useMemo:Aw,useReducer:wh,useRef:yw,useState:function(){return wh(da)},useDebugValue:ap,useDeferredValue:function(t){var e=yn();return et===null?e.memoizedState=t:Sw(e,et.memoizedState,t)},useTransition:function(){var t=wh(da)[0],e=yn().memoizedState;return[t,e]},useMutableSource:cw,useSyncExternalStore:hw,useId:Pw,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Fr(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(In(e,t,i,r),ql(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Fr(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(In(e,t,i,r),ql(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Fr(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(In(e,t,r,n),ql(e,t,r))}};function ny(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!oa(n,r)||!oa(i,s):!0}function Rw(t,e,n){var r=!1,i=qr,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Wt(e)?ki:bt.current,r=e.contextTypes,s=(r=r!=null)?Cs(t,i):qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ry(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function Pf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Zd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Wt(e)?ki:bt.current,i.context=Cs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ac.enqueueReplaceState(i,i.state,null),Au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bs(t,e){try{var n="",r=e;do n+=gS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function If(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WP=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xu||(xu=!0,Lf=r),If(t,e)},n}function bw(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){If(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){If(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=rI.bind(null,t,e,n),e.then(t,t))}function sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var $P=dr.ReactCurrentOwner,Ut=!1;function Vt(t,e,n,r){e.child=t===null?ow(e,null,n,r):Rs(e,t.child,n,r)}function ay(t,e,n,r,i){n=n.render;var s=e.ref;return Ts(e,i),r=ip(t,e,n,r,s,i),n=sp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Me&&n&&Hd(e),e.flags|=1,Vt(t,e,r,i),e.child)}function ly(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Vw(t,e,s,r,i)):(t=Yl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:oa,n(o,r)&&t.ref===e.ref)return lr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function Vw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(oa(s,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,lr(t,e,i)}return Cf(t,e,n,r,i)}function Dw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(fs,Jt),Jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(fs,Jt),Jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(fs,Jt),Jt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ke(fs,Jt),Jt|=r;return Vt(t,e,i,n),e.child}function Nw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cf(t,e,n,r,i){var s=Wt(n)?ki:bt.current;return s=Cs(e,s),Ts(e,i),n=ip(t,e,n,r,s,i),r=sp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Me&&r&&Hd(e),e.flags|=1,Vt(t,e,n,i),e.child)}function uy(t,e,n,r,i){if(Wt(n)){var s=!0;vu(e)}else s=!1;if(Ts(e,i),e.stateNode===null)Gl(t,e),Rw(e,n,r),Pf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gn(c):(c=Wt(n)?ki:bt.current,c=Cs(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ry(e,o,r,c),Pr=!1;var m=e.memoizedState;o.state=m,Au(e,r,o,i),u=e.memoizedState,a!==r||m!==u||zt.current||Pr?(typeof h=="function"&&(Sf(e,n,h,r),u=e.memoizedState),(a=Pr||ny(e,n,a,r,m,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tn(e.type,a),o.props=c,d=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gn(u):(u=Wt(n)?ki:bt.current,u=Cs(e,u));var E=n.getDerivedStateFromProps;(h=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==u)&&ry(e,o,r,u),Pr=!1,m=e.memoizedState,o.state=m,Au(e,r,o,i);var T=e.memoizedState;a!==d||m!==T||zt.current||Pr?(typeof E=="function"&&(Sf(e,n,E,r),T=e.memoizedState),(c=Pr||ny(e,n,c,r,m,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return xf(t,e,n,r,s,i)}function xf(t,e,n,r,i,s){Nw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Gg(e,n,!1),lr(t,e,s);r=e.stateNode,$P.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rs(e,t.child,null,s),e.child=Rs(e,null,a,s)):Vt(t,e,a,s),e.memoizedState=r.state,i&&Gg(e,n,!0),e.child}function Mw(t){var e=t.stateNode;e.pendingContext?Kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kg(t,e.context,!1),ep(t,e.containerInfo)}function cy(t,e,n,r,i){return xs(),Gd(i),e.flags|=256,Vt(t,e,n,r),e.child}var Rf={dehydrated:null,treeContext:null,retryLane:0};function kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lw(t,e,n){var r=e.pendingProps,i=Be.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke(Be,i&1),t===null)return Tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cc(o,r,0,null),t=Ii(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kf(n),e.memoizedState=Rf,t):lp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Br(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Br(a,s):(s=Ii(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rf,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lp(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Il(t,e,n,r){return r!==null&&Gd(r),Rs(e,t.child,null,n),t=lp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Eh(Error(W(422))),Il(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cc({mode:"visible",children:r.children},i,0,null),s=Ii(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rs(e,t.child,null,o),e.child.memoizedState=kf(o),e.memoizedState=Rf,s);if(!(e.mode&1))return Il(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Eh(s,r,void 0),Il(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ut||a){if(r=lt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ar(t,i),In(r,t,i,-1))}return pp(),r=Eh(Error(W(421))),Il(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=iI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Zt=Mr(i.nextSibling),tn=e,Me=!0,Sn=null,t!==null&&(fn[dn++]=Yn,fn[dn++]=Jn,fn[dn++]=bi,Yn=t.id,Jn=t.overflow,bi=e),e=lp(e,r.children),e.flags|=4096,e)}function hy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Af(t.return,e,n)}function Th(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ow(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hy(t,n,e);else if(t.tag===19)hy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Be,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Su(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Th(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Su(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Th(e,!0,n,null,s);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HP(t,e,n){switch(e.tag){case 3:Mw(e),xs();break;case 5:uw(e);break;case 1:Wt(e.type)&&vu(e);break;case 4:ep(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(Eu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?Lw(t,e,n):(ke(Be,Be.current&1),t=lr(t,e,n),t!==null?t.sibling:null);ke(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ow(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,Dw(t,e,n)}return lr(t,e,n)}var Fw,bf,Bw,jw;Fw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bf=function(){};Bw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ti(On.current);var s=null;switch(n){case"input":i=Jh(t,i),r=Jh(t,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=tf(t,i),r=tf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gu)}rf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ve("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};jw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Po(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KP(t,e,n){var r=e.pendingProps;switch(Kd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Wt(e.type)&&yu(),At(e),null;case 3:return r=e.stateNode,ks(),Ne(zt),Ne(bt),np(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sn!==null&&(Bf(Sn),Sn=null))),bf(t,e),At(e),null;case 5:tp(e);var i=Ti(ha.current);if(n=e.type,t!==null&&e.stateNode!=null)Bw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return At(e),null}if(t=Ti(On.current),Sl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[ua]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<bo.length;i++)Ve(bo[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":wg(r,s),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",r);break;case"textarea":Tg(r,s),Ve("invalid",r)}rf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Al(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Al(r.textContent,a,t),i=["children",""+a]):Zo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":ml(r),Eg(r,s,!0);break;case"textarea":ml(r),Ag(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[ua]=r,Fw(t,e,!1,!1),e.stateNode=t;e:{switch(o=sf(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<bo.length;i++)Ve(bo[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":wg(t,r),i=Jh(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":Tg(t,r),i=tf(t,r),Ve("invalid",t);break;default:i=r}rf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?y_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&m_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ea(t,u):typeof u=="number"&&ea(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ve("scroll",t):u!=null&&Vd(t,s,u,o))}switch(n){case"input":ml(t),Eg(t,r,!1);break;case"textarea":ml(t),Ag(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?vs(t,!!r.multiple,s,!1):r.defaultValue!=null&&vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)jw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ti(ha.current),Ti(On.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:Al(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Al(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return At(e),null;case 13:if(Ne(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Zt!==null&&e.mode&1&&!(e.flags&128))iw(),xs(),e.flags|=98560,s=!1;else if(s=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Mn]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),s=!1}else Sn!==null&&(Bf(Sn),Sn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?tt===0&&(tt=3):pp())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return ks(),bf(t,e),t===null&&aa(e.stateNode.containerInfo),At(e),null;case 10:return Yd(e.type._context),At(e),null;case 17:return Wt(e.type)&&yu(),At(e),null;case 19:if(Ne(Be),s=e.memoizedState,s===null)return At(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Po(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Su(t),o!==null){for(e.flags|=128,Po(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Be,Be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>Vs&&(e.flags|=128,r=!0,Po(s,!1),e.lanes=4194304)}else{if(!r)if(t=Su(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Po(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return At(e),null}else 2*Ge()-s.renderingStartTime>Vs&&n!==1073741824&&(e.flags|=128,r=!0,Po(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Be.current,ke(Be,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return dp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jt&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function GP(t,e){switch(Kd(e),e.tag){case 1:return Wt(e.type)&&yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ks(),Ne(zt),Ne(bt),np(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tp(e),null;case 13:if(Ne(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Be),null;case 4:return ks(),null;case 10:return Yd(e.type._context),null;case 22:case 23:return dp(),null;case 24:return null;default:return null}}var Cl=!1,Ct=!1,QP=typeof WeakSet=="function"?WeakSet:Set,X=null;function hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Vf(t,e,n){try{n()}catch(r){qe(t,e,r)}}var fy=!1;function XP(t,e){if(mf=du,t=q_(),qd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=t,m=null;t:for(;;){for(var E;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(E=d.firstChild)!==null;)m=d,d=E;for(;;){if(d===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(u=o),(E=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=E}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gf={focusedElem:t,selectionRange:n},du=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,R=T.memoizedState,w=e.stateNode,g=w.getSnapshotBeforeUpdate(e.elementType===e.type?C:Tn(e.type,C),R);w.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){qe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return T=fy,fy=!1,T}function Wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Vf(e,n,s)}i=i.next}while(i!==r)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Df(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Uw(t){var e=t.alternate;e!==null&&(t.alternate=null,Uw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[ua],delete e[_f],delete e[VP],delete e[DP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zw(t){return t.tag===5||t.tag===3||t.tag===4}function dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gu));else if(r!==4&&(t=t.child,t!==null))for(Nf(t,e,n),t=t.sibling;t!==null;)Nf(t,e,n),t=t.sibling}function Mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}var ht=null,An=!1;function Tr(t,e,n){for(n=n.child;n!==null;)Ww(t,e,n),n=n.sibling}function Ww(t,e,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:Ct||hs(n,e);case 6:var r=ht,i=An;ht=null,Tr(t,e,n),ht=r,An=i,ht!==null&&(An?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(An?(t=ht,n=n.stateNode,t.nodeType===8?mh(t.parentNode,n):t.nodeType===1&&mh(t,n),ia(t)):mh(ht,n.stateNode));break;case 4:r=ht,i=An,ht=n.stateNode.containerInfo,An=!0,Tr(t,e,n),ht=r,An=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Vf(n,e,o),i=i.next}while(i!==r)}Tr(t,e,n);break;case 1:if(!Ct&&(hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qe(n,e,a)}Tr(t,e,n);break;case 21:Tr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Tr(t,e,n),Ct=r):Tr(t,e,n);break;default:Tr(t,e,n)}}function py(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QP),e.forEach(function(r){var i=sI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ht=a.stateNode,An=!1;break e;case 3:ht=a.stateNode.containerInfo,An=!0;break e;case 4:ht=a.stateNode.containerInfo,An=!0;break e}a=a.return}if(ht===null)throw Error(W(160));Ww(s,o,i),ht=null,An=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){qe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$w(e,t),e=e.sibling}function $w(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),Dn(t),r&4){try{Wo(3,t,t.return),lc(3,t)}catch(C){qe(t,t.return,C)}try{Wo(5,t,t.return)}catch(C){qe(t,t.return,C)}}break;case 1:En(e,t),Dn(t),r&512&&n!==null&&hs(n,n.return);break;case 5:if(En(e,t),Dn(t),r&512&&n!==null&&hs(n,n.return),t.flags&32){var i=t.stateNode;try{ea(i,"")}catch(C){qe(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&f_(i,s),sf(a,o);var c=sf(a,s);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?y_(i,d):h==="dangerouslySetInnerHTML"?m_(i,d):h==="children"?ea(i,d):Vd(i,h,d,c)}switch(a){case"input":Zh(i,s);break;case"textarea":d_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?vs(i,!!s.multiple,E,!1):m!==!!s.multiple&&(s.defaultValue!=null?vs(i,!!s.multiple,s.defaultValue,!0):vs(i,!!s.multiple,s.multiple?[]:"",!1))}i[ua]=s}catch(C){qe(t,t.return,C)}}break;case 6:if(En(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){qe(t,t.return,C)}}break;case 3:if(En(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ia(e.containerInfo)}catch(C){qe(t,t.return,C)}break;case 4:En(e,t),Dn(t);break;case 13:En(e,t),Dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hp=Ge())),r&4&&py(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(c=Ct)||h,En(e,t),Ct=c):En(e,t),Dn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(d=X=h;X!==null;){switch(m=X,E=m.child,m.tag){case 0:case 11:case 14:case 15:Wo(4,m,m.return);break;case 1:hs(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){qe(r,n,C)}}break;case 5:hs(m,m.return);break;case 22:if(m.memoizedState!==null){gy(d);continue}}E!==null?(E.return=m,X=E):gy(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=g_("display",o))}catch(C){qe(t,t.return,C)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(C){qe(t,t.return,C)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:En(e,t),Dn(t),r&4&&py(t);break;case 21:break;default:En(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zw(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ea(i,""),r.flags&=-33);var s=dy(t);Mf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dy(t);Nf(t,a,o);break;default:throw Error(W(161))}}catch(u){qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YP(t,e,n){X=t,qw(t)}function qw(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Cl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ct;a=Cl;var c=Ct;if(Cl=o,(Ct=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?yy(i):u!==null?(u.return=o,X=u):yy(i);for(;s!==null;)X=s,qw(s),s=s.sibling;X=i,Cl=a,Ct=c}my(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):my(t)}}function my(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ia(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ct||e.flags&512&&Df(e)}catch(m){qe(e,e.return,m)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function gy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function yy(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(u){qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){qe(e,i,u)}}var s=e.return;try{Df(e)}catch(u){qe(e,s,u)}break;case 5:var o=e.return;try{Df(e)}catch(u){qe(e,o,u)}}}catch(u){qe(e,e.return,u)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var JP=Math.ceil,Cu=dr.ReactCurrentDispatcher,up=dr.ReactCurrentOwner,mn=dr.ReactCurrentBatchConfig,ge=0,lt=null,Xe=null,mt=0,Jt=0,fs=ni(0),tt=0,ma=null,Di=0,uc=0,cp=0,$o=null,Bt=null,hp=0,Vs=1/0,Qn=null,xu=!1,Lf=null,Or=null,xl=!1,Rr=null,Ru=0,qo=0,Of=null,Ql=-1,Xl=0;function Nt(){return ge&6?Ge():Ql!==-1?Ql:Ql=Ge()}function Fr(t){return t.mode&1?ge&2&&mt!==0?mt&-mt:MP.transition!==null?(Xl===0&&(Xl=R_()),Xl):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:L_(t.type)),t):1}function In(t,e,n,r){if(50<qo)throw qo=0,Of=null,Error(W(185));ba(t,n,r),(!(ge&2)||t!==lt)&&(t===lt&&(!(ge&2)&&(uc|=n),tt===4&&Cr(t,mt)),$t(t,r),n===1&&ge===0&&!(e.mode&1)&&(Vs=Ge()+500,sc&&ri()))}function $t(t,e){var n=t.callbackNode;MS(t,e);var r=fu(t,t===lt?mt:0);if(r===0)n!==null&&Ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ig(n),e===1)t.tag===0?NP(vy.bind(null,t)):tw(vy.bind(null,t)),kP(function(){!(ge&6)&&ri()}),n=null;else{switch(k_(r)){case 1:n=Od;break;case 4:n=C_;break;case 16:n=hu;break;case 536870912:n=x_;break;default:n=hu}n=Zw(n,Hw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hw(t,e){if(Ql=-1,Xl=0,ge&6)throw Error(W(327));var n=t.callbackNode;if(As()&&t.callbackNode!==n)return null;var r=fu(t,t===lt?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ku(t,r);else{e=r;var i=ge;ge|=2;var s=Gw();(lt!==t||mt!==e)&&(Qn=null,Vs=Ge()+500,Pi(t,e));do try{tI();break}catch(a){Kw(t,a)}while(!0);Xd(),Cu.current=s,ge=i,Xe!==null?e=0:(lt=null,mt=0,e=tt)}if(e!==0){if(e===2&&(i=cf(t),i!==0&&(r=i,e=Ff(t,i))),e===1)throw n=ma,Pi(t,0),Cr(t,r),$t(t,Ge()),n;if(e===6)Cr(t,r);else{if(i=t.current.alternate,!(r&30)&&!ZP(i)&&(e=ku(t,r),e===2&&(s=cf(t),s!==0&&(r=s,e=Ff(t,s))),e===1))throw n=ma,Pi(t,0),Cr(t,r),$t(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:gi(t,Bt,Qn);break;case 3:if(Cr(t,r),(r&130023424)===r&&(e=hp+500-Ge(),10<e)){if(fu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vf(gi.bind(null,t,Bt,Qn),e);break}gi(t,Bt,Qn);break;case 4:if(Cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Pn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JP(r/1960))-r,10<r){t.timeoutHandle=vf(gi.bind(null,t,Bt,Qn),r);break}gi(t,Bt,Qn);break;case 5:gi(t,Bt,Qn);break;default:throw Error(W(329))}}}return $t(t,Ge()),t.callbackNode===n?Hw.bind(null,t):null}function Ff(t,e){var n=$o;return t.current.memoizedState.isDehydrated&&(Pi(t,e).flags|=256),t=ku(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Bf(e)),t}function Bf(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function ZP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cr(t,e){for(e&=~cp,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pn(e),r=1<<n;t[n]=-1,e&=~r}}function vy(t){if(ge&6)throw Error(W(327));As();var e=fu(t,0);if(!(e&1))return $t(t,Ge()),null;var n=ku(t,e);if(t.tag!==0&&n===2){var r=cf(t);r!==0&&(e=r,n=Ff(t,r))}if(n===1)throw n=ma,Pi(t,0),Cr(t,e),$t(t,Ge()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,Bt,Qn),$t(t,Ge()),null}function fp(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Vs=Ge()+500,sc&&ri())}}function Ni(t){Rr!==null&&Rr.tag===0&&!(ge&6)&&As();var e=ge;ge|=1;var n=mn.transition,r=Pe;try{if(mn.transition=null,Pe=1,t)return t()}finally{Pe=r,mn.transition=n,ge=e,!(ge&6)&&ri()}}function dp(){Jt=fs.current,Ne(fs)}function Pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RP(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Kd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yu();break;case 3:ks(),Ne(zt),Ne(bt),np();break;case 5:tp(r);break;case 4:ks();break;case 13:Ne(Be);break;case 19:Ne(Be);break;case 10:Yd(r.type._context);break;case 22:case 23:dp()}n=n.return}if(lt=t,Xe=t=Br(t.current,null),mt=Jt=e,tt=0,ma=null,cp=uc=Di=0,Bt=$o=null,Ei!==null){for(e=0;e<Ei.length;e++)if(n=Ei[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ei=null}return t}function Kw(t,e){do{var n=Xe;try{if(Xd(),Hl.current=Iu,Pu){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pu=!1}if(Vi=0,at=et=Ue=null,zo=!1,fa=0,up.current=null,n===null||n.return===null){tt=1,ma=e,Xe=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=mt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=sy(o);if(E!==null){E.flags&=-257,oy(E,o,a,s,e),E.mode&1&&iy(s,c,e),e=E,u=c;var T=e.updateQueue;if(T===null){var C=new Set;C.add(u),e.updateQueue=C}else T.add(u);break e}else{if(!(e&1)){iy(s,c,e),pp();break e}u=Error(W(426))}}else if(Me&&a.mode&1){var R=sy(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),oy(R,o,a,s,e),Gd(bs(u,a));break e}}s=u=bs(u,a),tt!==4&&(tt=2),$o===null?$o=[s]:$o.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=kw(s,u,e);Jg(s,w);break e;case 1:a=u;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=bw(s,a,e);Jg(s,b);break e}}s=s.return}while(s!==null)}Xw(n)}catch(L){e=L,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function Gw(){var t=Cu.current;return Cu.current=Iu,t===null?Iu:t}function pp(){(tt===0||tt===3||tt===2)&&(tt=4),lt===null||!(Di&268435455)&&!(uc&268435455)||Cr(lt,mt)}function ku(t,e){var n=ge;ge|=2;var r=Gw();(lt!==t||mt!==e)&&(Qn=null,Pi(t,e));do try{eI();break}catch(i){Kw(t,i)}while(!0);if(Xd(),ge=n,Cu.current=r,Xe!==null)throw Error(W(261));return lt=null,mt=0,tt}function eI(){for(;Xe!==null;)Qw(Xe)}function tI(){for(;Xe!==null&&!IS();)Qw(Xe)}function Qw(t){var e=Jw(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,e===null?Xw(t):Xe=e,up.current=null}function Xw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GP(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Xe=null;return}}else if(n=KP(n,e,Jt),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);tt===0&&(tt=5)}function gi(t,e,n){var r=Pe,i=mn.transition;try{mn.transition=null,Pe=1,nI(t,e,n,r)}finally{mn.transition=i,Pe=r}return null}function nI(t,e,n,r){do As();while(Rr!==null);if(ge&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(LS(t,s),t===lt&&(Xe=lt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,Zw(hu,function(){return As(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Pe;Pe=1;var a=ge;ge|=4,up.current=null,XP(t,n),$w(n,t),TP(gf),du=!!mf,gf=mf=null,t.current=n,YP(n),CS(),ge=a,Pe=o,mn.transition=s}else t.current=n;if(xl&&(xl=!1,Rr=t,Ru=i),s=t.pendingLanes,s===0&&(Or=null),kS(n.stateNode),$t(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xu)throw xu=!1,t=Lf,Lf=null,t;return Ru&1&&t.tag!==0&&As(),s=t.pendingLanes,s&1?t===Of?qo++:(qo=0,Of=t):qo=0,ri(),null}function As(){if(Rr!==null){var t=k_(Ru),e=mn.transition,n=Pe;try{if(mn.transition=null,Pe=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,Ru=0,ge&6)throw Error(W(331));var i=ge;for(ge|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:Wo(8,h,s)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var m=h.sibling,E=h.return;if(Uw(h),h===c){X=null;break}if(m!==null){m.return=E,X=m;break}X=E}}}var T=s.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wo(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,X=w;break e}X=s.return}}var g=t.current;for(X=g;X!==null;){o=X;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,X=y;else e:for(o=g;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lc(9,a)}}catch(L){qe(a,a.return,L)}if(a===o){X=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,X=b;break e}X=a.return}}if(ge=i,ri(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(ec,t)}catch{}r=!0}return r}finally{Pe=n,mn.transition=e}}return!1}function _y(t,e,n){e=bs(n,e),e=kw(t,e,1),t=Lr(t,e,1),e=Nt(),t!==null&&(ba(t,1,e),$t(t,e))}function qe(t,e,n){if(t.tag===3)_y(t,t,n);else for(;e!==null;){if(e.tag===3){_y(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=bs(n,t),t=bw(e,t,1),e=Lr(e,t,1),t=Nt(),e!==null&&(ba(e,1,t),$t(e,t));break}}e=e.return}}function rI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(mt&n)===n&&(tt===4||tt===3&&(mt&130023424)===mt&&500>Ge()-hp?Pi(t,0):cp|=n),$t(t,e)}function Yw(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=Nt();t=ar(t,e),t!==null&&(ba(t,e,n),$t(t,n))}function iI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Yw(t,n)}function sI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Yw(t,n)}var Jw;Jw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,HP(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Me&&e.flags&1048576&&nw(e,wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gl(t,e),t=e.pendingProps;var i=Cs(e,bt.current);Ts(e,n),i=ip(null,e,r,t,i,n);var s=sp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(s=!0,vu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zd(e),i.updater=ac,e.stateNode=i,i._reactInternals=e,Pf(e,r,t,n),e=xf(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&Hd(e),Vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aI(r),t=Tn(r,t),i){case 0:e=Cf(null,e,r,t,n);break e;case 1:e=uy(null,e,r,t,n);break e;case 11:e=ay(null,e,r,t,n);break e;case 14:e=ly(null,e,r,Tn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Cf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),uy(t,e,r,i,n);case 3:e:{if(Mw(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,lw(t,e),Au(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bs(Error(W(423)),e),e=cy(t,e,r,n,i);break e}else if(r!==i){i=bs(Error(W(424)),e),e=cy(t,e,r,n,i);break e}else for(Zt=Mr(e.stateNode.containerInfo.firstChild),tn=e,Me=!0,Sn=null,n=ow(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===i){e=lr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return uw(e),t===null&&Tf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yf(r,i)?o=null:s!==null&&yf(r,s)&&(e.flags|=32),Nw(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Tf(e),null;case 13:return Lw(t,e,n);case 4:return ep(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rs(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),ay(t,e,r,i,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ke(Eu,r._currentValue),r._currentValue=o,s!==null)if(xn(s.value,o)){if(s.children===i.children&&!zt.current){e=lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=er(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Af(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Af(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ts(e,n),i=gn(i),r=r(i),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),ly(t,e,r,i,n);case 15:return Vw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Gl(t,e),e.tag=1,Wt(r)?(t=!0,vu(e)):t=!1,Ts(e,n),Rw(e,r,i),Pf(e,r,i,n),xf(null,e,r,!0,t,n);case 19:return Ow(t,e,n);case 22:return Dw(t,e,n)}throw Error(W(156,e.tag))};function Zw(t,e){return I_(t,e)}function oI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new oI(t,e,n,r)}function mp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aI(t){if(typeof t=="function")return mp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nd)return 11;if(t===Md)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ns:return Ii(n.children,i,s,e);case Dd:o=8,i|=8;break;case Gh:return t=pn(12,n,e,i|2),t.elementType=Gh,t.lanes=s,t;case Qh:return t=pn(13,n,e,i),t.elementType=Qh,t.lanes=s,t;case Xh:return t=pn(19,n,e,i),t.elementType=Xh,t.lanes=s,t;case u_:return cc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a_:o=10;break e;case l_:o=9;break e;case Nd:o=11;break e;case Md:o=14;break e;case Sr:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ii(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function cc(t,e,n,r){return t=pn(22,t,r,e),t.elementType=u_,t.lanes=n,t.stateNode={isHidden:!1},t}function Ah(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function Sh(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gp(t,e,n,r,i,s,o,a,u){return t=new lI(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(s),t}function uI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eE(t){if(!t)return qr;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Wt(n))return ew(t,n,e)}return e}function tE(t,e,n,r,i,s,o,a,u){return t=gp(n,r,!0,t,i,s,o,a,u),t.context=eE(null),n=t.current,r=Nt(),i=Fr(n),s=er(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,ba(t,i,r),$t(t,r),t}function hc(t,e,n,r){var i=e.current,s=Nt(),o=Fr(i);return n=eE(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(In(t,i,o,s),ql(t,i,o)),o}function bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yp(t,e){wy(t,e),(t=t.alternate)&&wy(t,e)}function cI(){return null}var nE=typeof reportError=="function"?reportError:function(t){console.error(t)};function vp(t){this._internalRoot=t}fc.prototype.render=vp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));hc(t,e,null,null)};fc.prototype.unmount=vp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ni(function(){hc(null,t,null,null)}),e[or]=null}};function fc(t){this._internalRoot=t}fc.prototype.unstable_scheduleHydration=function(t){if(t){var e=D_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&M_(t)}};function _p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ey(){}function hI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=bu(o);s.call(c)}}var o=tE(e,r,t,0,null,!1,!1,"",Ey);return t._reactRootContainer=o,t[or]=o.current,aa(t.nodeType===8?t.parentNode:t),Ni(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=bu(u);a.call(c)}}var u=gp(t,0,!1,null,null,!1,!1,"",Ey);return t._reactRootContainer=u,t[or]=u.current,aa(t.nodeType===8?t.parentNode:t),Ni(function(){hc(e,u,n,r)}),u}function pc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=bu(o);a.call(u)}}hc(e,o,t,i)}else o=hI(n,e,t,i,r);return bu(o)}b_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ko(e.pendingLanes);n!==0&&(Fd(e,n|1),$t(e,Ge()),!(ge&6)&&(Vs=Ge()+500,ri()))}break;case 13:Ni(function(){var r=ar(t,1);if(r!==null){var i=Nt();In(r,t,1,i)}}),yp(t,1)}};Bd=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Nt();In(e,t,134217728,n)}yp(t,134217728)}};V_=function(t){if(t.tag===13){var e=Fr(t),n=ar(t,e);if(n!==null){var r=Nt();In(n,t,e,r)}yp(t,e)}};D_=function(){return Pe};N_=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};af=function(t,e,n){switch(e){case"input":if(Zh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ic(r);if(!i)throw Error(W(90));h_(r),Zh(r,i)}}}break;case"textarea":d_(t,n);break;case"select":e=n.value,e!=null&&vs(t,!!n.multiple,e,!1)}};w_=fp;E_=Ni;var fI={usingClientEntryPoint:!1,Events:[Da,os,ic,v_,__,fp]},Io={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dI={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S_(t),t===null?null:t.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||cI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{ec=Rl.inject(dI),Ln=Rl}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fI;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(e))throw Error(W(200));return uI(t,e,null,n)};sn.createRoot=function(t,e){if(!_p(t))throw Error(W(299));var n=!1,r="",i=nE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gp(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,aa(t.nodeType===8?t.parentNode:t),new vp(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=S_(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return Ni(t)};sn.hydrate=function(t,e,n){if(!dc(e))throw Error(W(200));return pc(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!_p(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tE(e,null,t,1,n??null,i,!1,s,o),t[or]=e.current,aa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new fc(e)};sn.render=function(t,e,n){if(!dc(e))throw Error(W(200));return pc(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!dc(t))throw Error(W(40));return t._reactRootContainer?(Ni(function(){pc(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};sn.unstable_batchedUpdates=fp;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return pc(t,e,n,!1,r)};sn.version="18.3.1-next-f1338f8080-20240426";function rE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rE)}catch(t){console.error(t)}}rE(),r_.exports=sn;var pI=r_.exports,iE,Ty=pI;iE=Ty.createRoot,Ty.hydrateRoot;var sE={},mc={};(function(){var t={},e="";try{e=location.hash.toString()}catch{}var n=u(e),r=w("initParams");if(r)for(var i in r)typeof n[i]>"u"&&(n[i]=r[i]);R("initParams",n);var s=!1,o;try{if(s=window.parent!=null&&window!=window.parent,s){window.addEventListener("message",function(g){if(g.source===window.parent){try{var y=JSON.parse(g.data)}catch{return}if(!(!y||!y.eventType))if(y.eventType=="set_custom_style")g.origin==="https://web.telegram.org"&&(o.innerHTML=y.eventData);else if(y.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else m(y.eventType,y.eventData)}}),o=document.createElement("style"),document.head.appendChild(o);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function a(g){try{return g=g.replace(/\+/g,"%20"),decodeURIComponent(g)}catch{return g}}function u(g){g=g.replace(/^#/,"");var y={};if(!g.length)return y;if(g.indexOf("=")<0&&g.indexOf("?")<0)return y._path=a(g),y;var b=g.indexOf("?");if(b>=0){var L=g.substr(0,b);y._path=a(L),g=g.substr(b+1)}var B=c(g);for(var A in B)y[A]=B[A];return y}function c(g){var y={};if(!g.length)return y;var b=g.split("&"),L,B,A,v;for(L=0;L<b.length;L++)B=b[L].split("="),A=a(B[0]),v=B[1]==null?null:a(B[1]),y[A]=v;return y}function h(g,y){var b=g.indexOf("#");if(b<0)return g+"#"+y;var L=g.substr(b+1);return L.indexOf("=")>=0||L.indexOf("?")>=0?g+"&"+y:L.length>0?g+"?"+y:g+y}function d(g,y,b){if(y||(y=function(){}),b===void 0&&(b=""),console.log("[Telegram.WebView] > postEvent",g,b),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(g,JSON.stringify(b)),y();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:g,eventData:b})),y();else if(s)try{var L="https://web.telegram.org";L="*",window.parent.postMessage(JSON.stringify({eventType:g,eventData:b}),L),y()}catch(B){y(B)}else y({notAvailable:!0})}function m(g,y){console.log("[Telegram.WebView] < receiveEvent",g,y),E(g,function(b){b(g,y)})}function E(g,y){var b=t[g];if(!(b===void 0||!b.length))for(var L=0;L<b.length;L++)try{y(b[L])}catch{}}function T(g,y){t[g]===void 0&&(t[g]=[]);var b=t[g].indexOf(y);b===-1&&t[g].push(y)}function C(g,y){if(t[g]!==void 0){var b=t[g].indexOf(y);b!==-1&&t[g].splice(b,1)}}function R(g,y){try{return window.sessionStorage.setItem("__telegram__"+g,JSON.stringify(y)),!0}catch{}return!1}function w(g){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+g))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:n,isIframe:s,onEvent:T,offEvent:C,postEvent:d,receiveEvent:m,callEventCallbacks:E},window.Telegram.Utils={urlSafeDecode:a,urlParseQueryString:c,urlParseHashParams:u,urlAppendHashParams:h,sessionStorageSet:R,sessionStorageGet:w},window.TelegramGameProxy_receiveEvent=m,window.TelegramGameProxy={receiveEvent:m}})();(function(){var t=window.Telegram.Utils,e=window.Telegram.WebView,n=e.initParams,r=e.isIframe,i={},s="",o={},a={},u="light",c="6.0",h="unknown";if(n.tgWebAppData&&n.tgWebAppData.length){s=n.tgWebAppData,o=t.urlParseQueryString(s);for(var d in o){var m=o[d];try{(m.substr(0,1)=="{"&&m.substr(-1)=="}"||m.substr(0,1)=="["&&m.substr(-1)=="]")&&(o[d]=JSON.parse(m))}catch{}}}if(n.tgWebAppThemeParams&&n.tgWebAppThemeParams.length){var E=n.tgWebAppThemeParams;try{var T=JSON.parse(E);T&&S(T)}catch{}}var T=t.sessionStorageGet("themeParams");T&&S(T),n.tgWebAppVersion&&(c=n.tgWebAppVersion),n.tgWebAppPlatform&&(h=n.tgWebAppPlatform);function C(I,x){x.theme_params&&(S(x.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),Kt(),pr(),Wi(),L("themeChanged"))}var R=window.innerHeight;function w(I,x){x.height&&(window.removeEventListener("resize",g),an(x))}function g(I){R!=window.innerHeight&&(R=window.innerHeight,L("viewportChanged",{isStateStable:!0}))}function y(I){if(!(I.metaKey||I.ctrlKey)){for(var x=I.target;x.tagName!="A"&&x.parentNode;)x=x.parentNode;x.tagName=="A"&&x.target!="_blank"&&(x.protocol=="http:"||x.protocol=="https:")&&x.hostname=="t.me"&&(i.openTgLink(x.href),I.preventDefault())}}function b(I){return I.toString().replace(/^\s+|\s+$/g,"")}function L(I){var x=Array.prototype.slice.call(arguments);I=x.shift(),e.callEventCallbacks("webview:"+I,function(N){N.apply(i,x)})}function B(I,x){e.onEvent("webview:"+I,x)}function A(I,x){e.offEvent("webview:"+I,x)}function v(I,x){var N=document.documentElement;N&&N.style&&N.style.setProperty&&N.style.setProperty("--tg-"+I,x)}function S(I){I.bg_color=="#1c1c1d"&&I.bg_color==I.secondary_bg_color&&(I.secondary_bg_color="#2c2c2e");var x;for(var N in I)(x=mr(I[N]))&&(a[N]=x,N=="bg_color"&&(u=$c(x)?"dark":"light",v("color-scheme",u)),N="theme-"+N.split("_").join("-"),v(N,x));t.sessionStorageSet("themeParams",a)}var P={};function V(I){for(var x=100;--x;){for(var N="",z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",$=z.length,oe=0;oe<I;oe++)N+=z[Math.floor(Math.random()*$)];if(!P[N])return P[N]={},N}throw Error("WebAppCallbackIdGenerateFailed")}var D=!1,k=!1,it=!0;function an(I){typeof I<"u"&&(it=!!I.is_expanded,D=I.height,I.is_state_stable&&(k=I.height),L("viewportChanged",{isStateStable:!!I.is_state_stable}));var x,N;D!==!1?x=D-_t+"px":x=_t?"calc(100vh - "+_t+"px)":"100vh",k!==!1?N=k-_t+"px":N=_t?"calc(100vh - "+_t+"px)":"100vh",v("viewport-height",x),v("viewport-stable-height",N)}var kn=!1;function Ce(I){if(!me("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+c);return}kn=!!I,e.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:kn})}var q=!0;function ne(I){if(!me("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+c);return}q=!!I,e.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:q})}var te="bg_color",we=null;function Ee(){return te=="secondary_bg_color"?a.secondary_bg_color:te=="bg_color"?a.bg_color:we}function Le(I){if(!me("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+c);return}me("6.9")||(a.bg_color&&a.bg_color==I?I="bg_color":a.secondary_bg_color&&a.secondary_bg_color==I&&(I="secondary_bg_color"));var x=null,N=null;if(I=="bg_color"||I=="secondary_bg_color")N=I;else if(me("6.9")&&(x=mr(I),!x))throw console.error("[Telegram.WebApp] Header color format is invalid",I),Error("WebAppHeaderColorInvalid");if(!me("6.9")&&N!="bg_color"&&N!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",I),Error("WebAppHeaderColorKeyInvalid");te=N,we=x,Kt()}var ln=null,Ht=null;function Kt(){(ln!=te||Ht!=we)&&(ln=te,Ht=we,Ht?e.postEvent("web_app_set_header_color",!1,{color:we}):e.postEvent("web_app_set_header_color",!1,{color_key:te}))}var Ot="bg_color";function Ka(){return Ot=="secondary_bg_color"?a.secondary_bg_color:Ot=="bg_color"?a.bg_color:Ot}function Wc(I){if(!me("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+c);return}var x;if(I=="bg_color"||I=="secondary_bg_color")x=I;else if(x=mr(I),!x)throw console.error("[Telegram.WebApp] Background color format is invalid",I),Error("WebAppBackgroundColorInvalid");Ot=x,pr()}var ai=null;function pr(){var I=Ka();ai!=I&&(ai=I,e.postEvent("web_app_set_background_color",!1,{color:I}))}var Wn="bottom_bar_bg_color";function $n(){return Wn=="bottom_bar_bg_color"?a.bottom_bar_bg_color||a.secondary_bg_color||"#ffffff":Wn=="secondary_bg_color"?a.secondary_bg_color:Wn=="bg_color"?a.bg_color:Wn}function eo(I){if(!me("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+c);return}var x;if(I=="bg_color"||I=="secondary_bg_color"||I=="bottom_bar_bg_color")x=I;else if(x=mr(I),!x)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",I),Error("WebAppBottomBarColorInvalid");Wn=x,Wi(),window.Telegram.WebApp.SecondaryButton.setParams({})}var zi=null;function Wi(){var I=$n();zi!=I&&(zi=I,e.postEvent("web_app_set_bottom_bar_color",!1,{color:I})),n.tgWebAppDebug&&to()}function mr(I){I+="";var x;if(x=/^\s*#([0-9a-f]{6})\s*$/i.exec(I))return"#"+x[1].toLowerCase();if(x=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(I))return("#"+x[1]+x[1]+x[2]+x[2]+x[3]+x[3]).toLowerCase();if(x=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(I)){var N=parseInt(x[1]),z=parseInt(x[2]),$=parseInt(x[3]);return N=(N<16?"0":"")+N.toString(16),z=(z<16?"0":"")+z.toString(16),$=($<16?"0":"")+$.toString(16),"#"+N+z+$}return!1}function $c(I){I=I.replace(/[\s#]/g,""),I.length==3&&(I=I[0]+I[0]+I[1]+I[1]+I[2]+I[2]);var x=parseInt(I.substr(0,2),16),N=parseInt(I.substr(2,2),16),z=parseInt(I.substr(4,2),16),$=Math.sqrt(.299*(x*x)+.587*(N*N)+.114*(z*z));return $<120}function Ga(I,x){typeof I!="string"&&(I=""),typeof x!="string"&&(x=""),I=I.replace(/^\s+|\s+$/g,"").split("."),x=x.replace(/^\s+|\s+$/g,"").split(".");var N=Math.max(I.length,x.length),z,$,oe;for(z=0;z<N;z++)if($=parseInt(I[z])||0,oe=parseInt(x[z])||0,$!=oe)return $>oe?1:-1;return 0}function me(I){return Ga(c,I)>=0}function Qa(I){if(window.Blob)try{return new Blob([I]).size}catch{}for(var x=I.length,N=I.length-1;N>=0;N--){var z=I.charCodeAt(N);z>127&&z<=2047?x++:z>2047&&z<=65535&&(x+=2),z>=56320&&z<=57343&&N--}return x}var qc=function(){var I=!1,x={};Object.defineProperty(x,"isVisible",{set:function(Z){Ae({is_visible:Z})},get:function(){return I},enumerable:!0});var N=null;e.onEvent("back_button_pressed",z);function z(){L("backButtonClicked")}function $(){return{is_visible:I}}function oe(Z){return typeof Z>"u"&&(Z=$()),JSON.stringify(Z)}function Te(){return me("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+c),!1)}function re(){var Z=$(),ve=oe(Z);N!==ve&&(N=ve,e.postEvent("web_app_setup_back_button",!1,Z))}function Ae(Z){return Te()&&(typeof Z.is_visible<"u"&&(I=!!Z.is_visible),re()),x}return x.onClick=function(Z){return Te()&&B("backButtonClicked",Z),x},x.offClick=function(Z){return Te()&&A("backButtonClicked",Z),x},x.show=function(){return Ae({is_visible:!0})},x.hide=function(){return Ae({is_visible:!1})},x}(),vt=null,li={},_t=0;if(n.tgWebAppDebug){vt=document.createElement("tg-bottom-bar");var Ze={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:$n(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var st in Ze)vt.style[st]=Ze[st];document.addEventListener("DOMContentLoaded",function I(x){document.removeEventListener("DOMContentLoaded",I),document.body.appendChild(vt)});var ui=document.createElement("style");ui.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',vt.appendChild(ui)}function to(){var I=li.main._bottomButton,x=li.secondary._bottomButton;I.isVisible||x.isVisible?(vt.style.display="flex",_t=58,I.isVisible&&x.isVisible&&(x.position=="top"?(vt.style.flexDirection="column-reverse",_t+=51):x.position=="bottom"?(vt.style.flexDirection="column",_t+=51):x.position=="left"?vt.style.flexDirection="row-reverse":x.position=="right"&&(vt.style.flexDirection="row"))):(vt.style.display="none",_t=0),vt.style.background=$n(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=_t+"px"),an()}var no=function(I){var x=I=="main";if(x)var N="web_app_setup_main_button",z="main_button_pressed",$="mainButtonClicked",oe="Continue",Te=function(){return a.button_color||"#2481cc"},re=function(){return a.button_text_color||"#ffffff"};else var N="web_app_setup_secondary_button",z="secondary_button_pressed",$="secondaryButtonClicked",oe="Cancel",Te=function(){return $n()},re=function(){return a.button_color||"#2481cc"};var Ae=!1,Z=!0,ve=!1,Re=!1,Hi=I,vr=oe,Hn=!1,Qt=!1,_n="left",J={};Object.defineProperty(J,"type",{get:function(){return Hi},enumerable:!0}),Object.defineProperty(J,"text",{set:function(G){J.setParams({text:G})},get:function(){return vr},enumerable:!0}),Object.defineProperty(J,"color",{set:function(G){J.setParams({color:G})},get:function(){return Hn||Te()},enumerable:!0}),Object.defineProperty(J,"textColor",{set:function(G){J.setParams({text_color:G})},get:function(){return Qt||re()},enumerable:!0}),Object.defineProperty(J,"isVisible",{set:function(G){J.setParams({is_visible:G})},get:function(){return Ae},enumerable:!0}),Object.defineProperty(J,"isProgressVisible",{get:function(){return Re},enumerable:!0}),Object.defineProperty(J,"isActive",{set:function(G){J.setParams({is_active:G})},get:function(){return Z},enumerable:!0}),Object.defineProperty(J,"hasShineEffect",{set:function(G){J.setParams({has_shine_effect:G})},get:function(){return ve},enumerable:!0}),x||Object.defineProperty(J,"position",{set:function(G){J.setParams({position:G})},get:function(){return _n},enumerable:!0});var Oe=null;e.onEvent(z,_r);var ue=null;if(n.tgWebAppDebug){ue=document.createElement("tg-bottom-button");var Fe={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var un in Fe)ue.style[un]=Fe[un];vt.appendChild(ue),ue.addEventListener("click",_r,!1),ue._bottomButton=J,li[I]=ue}function _r(){Z&&L($)}function bn(){var G=J.color,Xt=J.textColor;if(Ae){var Vn={is_visible:!0,is_active:Z,is_progress_visible:Re,text:vr,color:G,text_color:Xt,has_shine_effect:ve&&Z&&!Re};x||(Vn.position=_n)}else var Vn={is_visible:!1};return Vn}function lo(G){return typeof G>"u"&&(G=bn()),JSON.stringify(G)}function uo(){var G=bn(),Xt=lo(G);Oe!==Xt&&(Oe=Xt,e.postEvent(N,!1,G),n.tgWebAppDebug&&el(G))}function el(G){G.is_visible?(ue.style.display="block",ue.style.opacity=G.is_active?"1":"0.8",ue.style.cursor=G.is_active?"pointer":"auto",ue.disabled=!G.is_active,ue.innerText=G.text,ue.className=G.has_shine_effect?"shine":"",ue.style.backgroundImage=G.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+G.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",ue.style.backgroundColor=G.color,ue.style.color=G.text_color):ue.style.display="none",to()}function tl(G){if(typeof G.text<"u"){var Xt=b(G.text);if(!Xt.length)throw console.error("[Telegram.WebApp] Bottom button text is required",G.text),Error("WebAppBottomButtonParamInvalid");if(Xt.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",Xt),Error("WebAppBottomButtonParamInvalid");vr=Xt}if(typeof G.color<"u")if(G.color===!1||G.color===null)Hn=!1;else{var Vn=mr(G.color);if(!Vn)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",G.color),Error("WebAppBottomButtonParamInvalid");Hn=Vn}if(typeof G.text_color<"u")if(G.text_color===!1||G.text_color===null)Qt=!1;else{var co=mr(G.text_color);if(!co)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",G.text_color),Error("WebAppBottomButtonParamInvalid");Qt=co}if(typeof G.is_visible<"u"){if(G.is_visible&&!J.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");Ae=!!G.is_visible}if(typeof G.has_shine_effect<"u"&&(ve=!!G.has_shine_effect),!x&&typeof G.position<"u"){if(G.position!="left"&&G.position!="right"&&G.position!="top"&&G.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",G.position),Error("WebAppBottomButtonParamInvalid");_n=G.position}return typeof G.is_active<"u"&&(Z=!!G.is_active),uo(),J}return J.setText=function(G){return J.setParams({text:G})},J.onClick=function(G){return B($,G),J},J.offClick=function(G){return A($,G),J},J.show=function(){return J.setParams({is_visible:!0})},J.hide=function(){return J.setParams({is_visible:!1})},J.enable=function(){return J.setParams({is_active:!0})},J.disable=function(){return J.setParams({is_active:!1})},J.showProgress=function(G){return Z=!!G,Re=!0,uo(),J},J.hideProgress=function(){return J.isActive||(Z=!0),Re=!1,uo(),J},J.setParams=tl,J},Hc=no("main"),ci=no("secondary"),ro=function(){var I=!1,x={};Object.defineProperty(x,"isVisible",{set:function(Z){Ae({is_visible:Z})},get:function(){return I},enumerable:!0});var N=null;e.onEvent("settings_button_pressed",z);function z(){L("settingsButtonClicked")}function $(){return{is_visible:I}}function oe(Z){return typeof Z>"u"&&(Z=$()),JSON.stringify(Z)}function Te(){return me("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+c),!1)}function re(){var Z=$(),ve=oe(Z);N!==ve&&(N=ve,e.postEvent("web_app_setup_settings_button",!1,Z))}function Ae(Z){return Te()&&(typeof Z.is_visible<"u"&&(I=!!Z.is_visible),re()),x}return x.onClick=function(Z){return Te()&&B("settingsButtonClicked",Z),x},x.offClick=function(Z){return Te()&&A("settingsButtonClicked",Z),x},x.show=function(){return Ae({is_visible:!0})},x.hide=function(){return Ae({is_visible:!1})},x}(),Xa=function(){var I={};function x(N){if(!me("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+c),I;if(N.type=="impact"){if(N.impact_style!="light"&&N.impact_style!="medium"&&N.impact_style!="heavy"&&N.impact_style!="rigid"&&N.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",N.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(N.type=="notification"){if(N.notification_type!="error"&&N.notification_type!="success"&&N.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",N.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(N.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",N.type),Error("WebAppHapticFeedbackTypeInvalid");return e.postEvent("web_app_trigger_haptic_feedback",!1,N),I}return I.impactOccurred=function(N){return x({type:"impact",impact_style:N})},I.notificationOccurred=function(N){return x({type:"notification",notification_type:N})},I.selectionChanged=function(){return x({type:"selection_change"})},I}(),io=function(){var I={};function x(N,z,$){if(!me("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+c),Error("WebAppMethodUnsupported");return qi(N,z,$),I}return I.setItem=function(N,z,$){return x("saveStorageValue",{key:N,value:z},$)},I.getItem=function(N,z){return I.getItems([N],z?function($,oe){$?z($):z(null,oe[N])}:null)},I.getItems=function(N,z){return x("getStorageValues",{keys:N},z)},I.removeItem=function(N,z){return I.removeItems([N],z)},I.removeItems=function(N,z){return x("deleteStorageValues",{keys:N},z)},I.getKeys=function(N){return x("getStorageKeys",{},N)},I}(),Kc=function(){var I=!1,x=!1,N="unknown",z=!1,$=!1,oe=!1,Te="",re={};Object.defineProperty(re,"isInited",{get:function(){return I},enumerable:!0}),Object.defineProperty(re,"isBiometricAvailable",{get:function(){return I&&x},enumerable:!0}),Object.defineProperty(re,"biometricType",{get:function(){return N||"unknown"},enumerable:!0}),Object.defineProperty(re,"isAccessRequested",{get:function(){return z},enumerable:!0}),Object.defineProperty(re,"isAccessGranted",{get:function(){return z&&$},enumerable:!0}),Object.defineProperty(re,"isBiometricTokenSaved",{get:function(){return oe},enumerable:!0}),Object.defineProperty(re,"deviceId",{get:function(){return Te||""},enumerable:!0});var Ae={callbacks:[]},Z=!1,ve=!1,Re=!1;e.onEvent("biometry_info_received",Hi),e.onEvent("biometry_auth_requested",vr),e.onEvent("biometry_token_updated",Hn);function Hi(J,Oe){if(I=!0,Oe.available?(x=!0,N=Oe.type||"unknown",Oe.access_requested?(z=!0,$=!!Oe.access_granted,oe=!!Oe.token_saved):(z=!1,$=!1,oe=!1)):(x=!1,N="unknown",z=!1,$=!1,oe=!1),Te=Oe.device_id||"",Ae.callbacks.length>0)for(var ue=0;ue<Ae.callbacks.length;ue++){var Fe=Ae.callbacks[ue];Fe()}if(Z){var un=Z;Z=!1,un.callback&&un.callback($)}L("biometricManagerUpdated")}function vr(J,Oe){var ue=Oe.status=="authorized",Fe=Oe.token||"";if(ve){var un=ve;ve=!1,un.callback&&un.callback(ue,ue?Fe:null)}L("biometricAuthRequested",ue?{isAuthenticated:!0,biometricToken:Fe}:{isAuthenticated:!1})}function Hn(J,Oe){var ue=!1;if(x&&z&&(Oe.status=="updated"?(oe=!0,ue=!0):Oe.status=="removed"&&(oe=!1,ue=!0)),Re){var Fe=Re;Re=!1,Fe.callback&&Fe.callback(ue)}L("biometricTokenUpdated",{isUpdated:ue})}function Qt(){return me("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+c),!1)}function _n(){if(!I)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return re.init=function(J){return!Qt()||I||(J&&Ae.callbacks.push(J),e.postEvent("web_app_biometry_get_info",!1)),re},re.requestAccess=function(J,Oe){if(!Qt())return re;if(_n(),!x)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(Z)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var ue={};if(typeof J.reason<"u"){var Fe=b(J.reason);if(Fe.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Fe),Error("WebAppBiometricRequestAccessParamInvalid");Fe.length>0&&(ue.reason=Fe)}return Z={callback:Oe},e.postEvent("web_app_biometry_request_access",!1,ue),re},re.authenticate=function(J,Oe){if(!Qt())return re;if(_n(),!x)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!$)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(ve)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var ue={};if(typeof J.reason<"u"){var Fe=b(J.reason);if(Fe.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Fe),Error("WebAppBiometricRequestAccessParamInvalid");Fe.length>0&&(ue.reason=Fe)}return ve={callback:Oe},e.postEvent("web_app_biometry_request_auth",!1,ue),re},re.updateBiometricToken=function(J,Oe){if(!Qt())return re;if(J=J||"",J.length>1024)throw console.error("[Telegram.WebApp] Token is too long",J),Error("WebAppBiometricManagerTokenInvalid");if(_n(),!x)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!$)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(Re)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return Re={callback:Oe},e.postEvent("web_app_biometry_update_token",!1,{token:J}),re},re.openSettings=function(){if(!Qt())return re;if(_n(),!x)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!z)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return $?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),re):(e.postEvent("web_app_biometry_open_settings",!1),re)},re}(),hi={};function so(I,x){if(x.slug&&hi[x.slug]){var N=hi[x.slug];delete hi[x.slug],N.callback&&N.callback(x.status),L("invoiceClosed",{url:N.url,status:x.status})}}var gr=!1;function Ya(I,x){if(gr){var N=gr;gr=!1;var z=null;typeof x.button_id<"u"&&(z=x.button_id),N.callback&&N.callback(z),L("popupClosed",{button_id:z})}}var Gt=!1;function oo(I,x){if(Gt){var N=Gt,z=null;typeof x.data<"u"&&(z=x.data),N.callback&&N.callback(z)&&(Gt=!1,e.postEvent("web_app_close_scan_qr_popup",!1)),L("qrTextReceived",{data:z})}}function ao(I,x){Gt=!1,L("scanQrPopupClosed")}function qn(I,x){if(x.req_id&&P[x.req_id]){var N=P[x.req_id];delete P[x.req_id];var z=null;typeof x.data<"u"&&(z=x.data),N.callback&&N.callback(z),L("clipboardTextReceived",{data:z})}}var yr=!1;function $i(I,x){if(yr){var N=yr;yr=!1,N.callback&&N.callback(x.status=="allowed"),L("writeAccessRequested",{status:x.status})}}function Ja(I,x){var N,z,$=0,oe=function(){qi("getRequestedContact",{},function(re,Ae){Ae&&Ae.length?(clearTimeout(z),I(Ae)):($+=50,N=setTimeout(oe,$))})},Te=function(){clearTimeout(N),I("")};z=setTimeout(Te,x),oe()}var vn=!1;function Za(I,x){if(vn){var N=vn;vn=!1;var z=x.status=="sent",$={status:x.status};z?Ja(function(oe){if(oe&&oe.length){$.response=oe,$.responseUnsafe=t.urlParseQueryString(oe);for(var Te in $.responseUnsafe){var re=$.responseUnsafe[Te];try{(re.substr(0,1)=="{"&&re.substr(-1)=="}"||re.substr(0,1)=="["&&re.substr(-1)=="]")&&($.responseUnsafe[Te]=JSON.parse(re))}catch{}}}N.callback&&N.callback(z,$),L("contactRequested",$)},3e3):(N.callback&&N.callback(z,$),L("contactRequested",$))}}function ut(I,x){if(x.req_id&&P[x.req_id]){var N=P[x.req_id];delete P[x.req_id];var z=null,$=null;typeof x.result<"u"&&(z=x.result),typeof x.error<"u"&&($=x.error),N.callback&&N.callback($,z)}}function qi(I,x,N){if(!me("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+c),Error("WebAppMethodUnsupported");var z=V(16),$={req_id:z,method:I,params:x||{}};P[z]={callback:N},e.postEvent("web_app_invoke_custom_method",!1,$)}window.Telegram||(window.Telegram={}),Object.defineProperty(i,"initData",{get:function(){return s},enumerable:!0}),Object.defineProperty(i,"initDataUnsafe",{get:function(){return o},enumerable:!0}),Object.defineProperty(i,"version",{get:function(){return c},enumerable:!0}),Object.defineProperty(i,"platform",{get:function(){return h},enumerable:!0}),Object.defineProperty(i,"colorScheme",{get:function(){return u},enumerable:!0}),Object.defineProperty(i,"themeParams",{get:function(){return a},enumerable:!0}),Object.defineProperty(i,"isExpanded",{get:function(){return it},enumerable:!0}),Object.defineProperty(i,"viewportHeight",{get:function(){return(D===!1?window.innerHeight:D)-_t},enumerable:!0}),Object.defineProperty(i,"viewportStableHeight",{get:function(){return(k===!1?window.innerHeight:k)-_t},enumerable:!0}),Object.defineProperty(i,"isClosingConfirmationEnabled",{set:function(I){Ce(I)},get:function(){return kn},enumerable:!0}),Object.defineProperty(i,"isVerticalSwipesEnabled",{set:function(I){ne(I)},get:function(){return q},enumerable:!0}),Object.defineProperty(i,"headerColor",{set:function(I){Le(I)},get:function(){return Ee()},enumerable:!0}),Object.defineProperty(i,"backgroundColor",{set:function(I){Wc(I)},get:function(){return Ka()},enumerable:!0}),Object.defineProperty(i,"bottomBarColor",{set:function(I){eo(I)},get:function(){return $n()},enumerable:!0}),Object.defineProperty(i,"BackButton",{value:qc,enumerable:!0}),Object.defineProperty(i,"MainButton",{value:Hc,enumerable:!0}),Object.defineProperty(i,"SecondaryButton",{value:ci,enumerable:!0}),Object.defineProperty(i,"SettingsButton",{value:ro,enumerable:!0}),Object.defineProperty(i,"HapticFeedback",{value:Xa,enumerable:!0}),Object.defineProperty(i,"CloudStorage",{value:io,enumerable:!0}),Object.defineProperty(i,"BiometricManager",{value:Kc,enumerable:!0}),i.setHeaderColor=function(I){i.headerColor=I},i.setBackgroundColor=function(I){i.backgroundColor=I},i.setBottomBarColor=function(I){i.bottomBarColor=I},i.enableClosingConfirmation=function(){i.isClosingConfirmationEnabled=!0},i.disableClosingConfirmation=function(){i.isClosingConfirmationEnabled=!1},i.enableVerticalSwipes=function(){i.isVerticalSwipesEnabled=!0},i.disableVerticalSwipes=function(){i.isVerticalSwipesEnabled=!1},i.isVersionAtLeast=function(I){return me(I)},i.onEvent=function(I,x){B(I,x)},i.offEvent=function(I,x){A(I,x)},i.sendData=function(I){if(!I||!I.length)throw console.error("[Telegram.WebApp] Data is required",I),Error("WebAppDataInvalid");if(Qa(I)>4096)throw console.error("[Telegram.WebApp] Data is too long",I),Error("WebAppDataInvalid");e.postEvent("web_app_data_send",!1,{data:I})},i.switchInlineQuery=function(I,x){if(!me("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+c),Error("WebAppMethodUnsupported");if(!n.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(I=I||"",I.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",I),Error("WebAppInlineQueryInvalid");var N=[];if(x){if(!Array.isArray(x))throw console.error("[Telegram.WebApp] Choose chat types should be an array",x),Error("WebAppInlineChooseChatTypesInvalid");for(var z={users:1,bots:1,groups:1,channels:1},$=0;$<x.length;$++){var oe=x[$];if(!z[oe])throw console.error("[Telegram.WebApp] Choose chat type is invalid",oe),Error("WebAppInlineChooseChatTypeInvalid");z[oe]!=2&&(z[oe]=2,N.push(oe))}}e.postEvent("web_app_switch_inline_query",!1,{query:I,chat_types:N})},i.openLink=function(z,x){var N=document.createElement("A");if(N.href=z,N.protocol!="http:"&&N.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",z),Error("WebAppTgUrlInvalid");var z=N.href;if(x=x||{},me("6.1")){var $={url:z};me("6.4")&&x.try_instant_view&&($.try_instant_view=!0),me("7.6")&&x.try_browser&&($.try_browser=x.try_browser),e.postEvent("web_app_open_link",!1,$)}else window.open(z,"_blank")},i.openTelegramLink=function(I){var x=document.createElement("A");if(x.href=I,x.protocol!="http:"&&x.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",I),Error("WebAppTgUrlInvalid");if(x.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",I),Error("WebAppTgUrlInvalid");var N=x.pathname+x.search;r||me("6.1")?e.postEvent("web_app_open_tg_link",!1,{path_full:N}):location.href="https://t.me"+N},i.openInvoice=function(I,x){var N=document.createElement("A"),z,$;if(N.href=I,N.protocol!="http:"&&N.protocol!="https:"||N.hostname!="t.me"||!(z=N.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!($=z[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",I),Error("WebAppInvoiceUrlInvalid");if(!me("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+c),Error("WebAppMethodUnsupported");if(hi[$])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");hi[$]={url:I,callback:x},e.postEvent("web_app_open_invoice",!1,{slug:$})},i.showPopup=function(I,x){if(!me("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+c),Error("WebAppMethodUnsupported");if(gr)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var N="",z="",$=[],oe={};if(typeof I.title<"u"){if(N=b(I.title),N.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",N),Error("WebAppPopupParamInvalid");N.length>0&&(oe.title=N)}if(typeof I.message<"u"&&(z=b(I.message)),!z.length)throw console.error("[Telegram.WebApp] Popup message is required",I.message),Error("WebAppPopupParamInvalid");if(z.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",z),Error("WebAppPopupParamInvalid");if(oe.message=z,typeof I.buttons<"u"){if(!Array.isArray(I.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",I.buttons),Error("WebAppPopupParamInvalid");for(var Te=0;Te<I.buttons.length;Te++){var re=I.buttons[Te],Ae={},Z="";if(typeof re.id<"u"&&(Z=re.id.toString(),Z.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",Z),Error("WebAppPopupParamInvalid");Ae.id=Z;var ve=re.type;if(typeof ve>"u"&&(ve="default"),Ae.type=ve,!(ve=="ok"||ve=="close"||ve=="cancel"))if(ve=="default"||ve=="destructive"){var Re="";if(typeof re.text<"u"&&(Re=b(re.text)),!Re.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+ve,re.text),Error("WebAppPopupParamInvalid");if(Re.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",Re),Error("WebAppPopupParamInvalid");Ae.text=Re}else throw console.error("[Telegram.WebApp] Popup button type is invalid",ve),Error("WebAppPopupParamInvalid");$.push(Ae)}}else $.push({id:"",type:"close"});if($.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if($.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");oe.buttons=$,gr={callback:x},e.postEvent("web_app_open_popup",!1,oe)},i.showAlert=function(I,x){i.showPopup({message:I},x?function(){x()}:null)},i.showConfirm=function(I,x){i.showPopup({message:I,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},x?function(N){x(N=="ok")}:null)},i.showScanQrPopup=function(I,x){if(!me("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+c),Error("WebAppMethodUnsupported");if(Gt)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var N="",z={};if(typeof I.text<"u"){if(N=b(I.text),N.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",N),Error("WebAppScanQrPopupParamInvalid");N.length>0&&(z.text=N)}Gt={callback:x},e.postEvent("web_app_open_scan_qr_popup",!1,z)},i.closeScanQrPopup=function(){if(!me("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+c),Error("WebAppMethodUnsupported");Gt=!1,e.postEvent("web_app_close_scan_qr_popup",!1)},i.readTextFromClipboard=function(I){if(!me("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+c),Error("WebAppMethodUnsupported");var x=V(16),N={req_id:x};P[x]={callback:I},e.postEvent("web_app_read_text_from_clipboard",!1,N)},i.requestWriteAccess=function(I){if(!me("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+c),Error("WebAppMethodUnsupported");if(yr)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");yr={callback:I},e.postEvent("web_app_request_write_access")},i.requestContact=function(I){if(!me("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+c),Error("WebAppMethodUnsupported");if(vn)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");vn={callback:I},e.postEvent("web_app_request_phone")},i.shareToStory=function(I,x){if(x=x||{},!me("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+c),Error("WebAppMethodUnsupported");var N=document.createElement("A");if(N.href=I,N.protocol!="http:"&&N.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var z={};if(z.media_url=N.href,typeof x.text<"u"){var $=b(x.text);if($.length>2048)throw console.error("[Telegram.WebApp] Text is too long",$),Error("WebAppShareToStoryParamInvalid");$.length>0&&(z.text=$)}if(typeof x.widget_link<"u"){if(x.widget_link=x.widget_link||{},N.href=x.widget_link.url,N.protocol!="http:"&&N.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var oe={url:N.href};if(typeof x.widget_link.name<"u"){var Te=b(x.widget_link.name);if(Te.length>48)throw console.error("[Telegram.WebApp] Link name is too long",Te),Error("WebAppShareToStoryParamInvalid");Te.length>0&&(oe.name=Te)}z.widget_link=oe}e.postEvent("web_app_share_to_story",!1,z)},i.invokeCustomMethod=function(I,x,N){qi(I,x,N)},i.ready=function(){e.postEvent("web_app_ready")},i.expand=function(){e.postEvent("web_app_expand")},i.close=function(I){I=I||{};var x={};me("7.6")&&I.return_back&&(x.return_back=!0),e.postEvent("web_app_close",!1,x)},window.Telegram.WebApp=i,Kt(),pr(),Wi(),an(),n.tgWebAppShowSettings&&ro.show(),window.addEventListener("resize",g),r&&document.addEventListener("click",y),e.onEvent("theme_changed",C),e.onEvent("viewport_changed",w),e.onEvent("invoice_closed",so),e.onEvent("popup_closed",Ya),e.onEvent("qr_text_received",oo),e.onEvent("scan_qr_popup_closed",ao),e.onEvent("clipboard_text_received",qn),e.onEvent("write_access_requested",$i),e.onEvent("phone_requested",Za),e.onEvent("custom_method_invoked",ut),e.postEvent("web_app_request_theme"),e.postEvent("web_app_request_viewport")})();Object.defineProperty(mc,"__esModule",{value:!0});mc.WebApp=void 0;var mI=window;mc.WebApp=mI.Telegram.WebApp;Object.defineProperty(sE,"__esModule",{value:!0});var gI=mc,Se=sE.default=gI.WebApp;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ga.apply(this,arguments)}var kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(kr||(kr={}));const Ay="popstate";function yI(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return jf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:aE(i)}return _I(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vI(){return Math.random().toString(36).substr(2,8)}function Sy(t,e){return{usr:t.state,key:t.key,idx:e}}function jf(t,e,n,r){return n===void 0&&(n=null),ga({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hs(e):e,{state:n,key:e&&e.key||r||vI()})}function aE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _I(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=kr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(ga({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=kr.Pop;let R=h(),w=R==null?null:R-c;c=R,u&&u({action:a,location:C.location,delta:w})}function m(R,w){a=kr.Push;let g=jf(C.location,R,w);c=h()+1;let y=Sy(g,c),b=C.createHref(g);try{o.pushState(y,"",b)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(b)}s&&u&&u({action:a,location:C.location,delta:1})}function E(R,w){a=kr.Replace;let g=jf(C.location,R,w);c=h();let y=Sy(g,c),b=C.createHref(g);o.replaceState(y,"",b),s&&u&&u({action:a,location:C.location,delta:0})}function T(R){let w=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof R=="string"?R:aE(R);return g=g.replace(/ $/,"%20"),Je(w,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,w)}let C={get action(){return a},get location(){return t(i,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ay,d),u=R,()=>{i.removeEventListener(Ay,d),u=null}},createHref(R){return e(i,R)},createURL:T,encodeLocation(R){let w=T(R);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:E,go(R){return o.go(R)}};return C}var Py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Py||(Py={}));function wI(t,e,n){return n===void 0&&(n="/"),EI(t,e,n,!1)}function EI(t,e,n,r){let i=typeof e=="string"?Hs(e):e,s=cE(i.pathname||"/",n);if(s==null)return null;let o=lE(t);TI(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=DI(s);a=bI(o[u],c,r)}return a}function lE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Ci([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lE(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:RI(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of uE(s.path))i(s,o,u)}),e}function uE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function TI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const AI=/^:[\w-]+$/,SI=3,PI=2,II=1,CI=10,xI=-2,Iy=t=>t==="*";function RI(t,e){let n=t.split("/"),r=n.length;return n.some(Iy)&&(r+=xI),e&&(r+=PI),n.filter(i=>!Iy(i)).reduce((i,s)=>i+(AI.test(s)?SI:s===""?II:CI),r)}function kI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bI(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Cy({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Cy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ci([s,d.pathname]),pathnameBase:OI(Ci([s,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(s=Ci([s,d.pathnameBase]))}return o}function Cy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:m,isOptional:E}=h;if(m==="*"){let C=a[d]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const T=a[d];return E&&!T?c[m]=void 0:c[m]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function VI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),oE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Hs(t):t;return{pathname:n?n.startsWith("/")?n:MI(n,e):e,search:FI(r),hash:BI(i)}}function MI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hE(t,e){let n=LI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Hs(t):(i=ga({},t),Je(!i.pathname||!i.pathname.includes("?"),Ph("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),Ph("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),Ph("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;i.pathname=m.join("/")}a=d>=0?e[d]:"/"}let u=NI(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const Ci=t=>t.join("/").replace(/\/\/+/g,"/"),OI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dE=["post","put","patch","delete"];new Set(dE);const UI=["get",...dE];new Set(UI);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ya(){return ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ya.apply(this,arguments)}const wp=O.createContext(null),zI=O.createContext(null),Ma=O.createContext(null),gc=O.createContext(null),Fi=O.createContext({outlet:null,matches:[],isDataRoute:!1}),pE=O.createContext(null);function La(){return O.useContext(gc)!=null}function Ep(){return La()||Je(!1),O.useContext(gc).location}function mE(t){O.useContext(Ma).static||O.useLayoutEffect(t)}function Tp(){let{isDataRoute:t}=O.useContext(Fi);return t?tC():WI()}function WI(){La()||Je(!1);let t=O.useContext(wp),{basename:e,future:n,navigator:r}=O.useContext(Ma),{matches:i}=O.useContext(Fi),{pathname:s}=Ep(),o=JSON.stringify(hE(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return mE(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=fE(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ci([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function $I(t,e){return qI(t,e)}function qI(t,e,n,r){La()||Je(!1);let{navigator:i}=O.useContext(Ma),{matches:s}=O.useContext(Fi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Ep(),h;if(e){var d;let R=typeof e=="string"?Hs(e):e;u==="/"||(d=R.pathname)!=null&&d.startsWith(u)||Je(!1),h=R}else h=c;let m=h.pathname||"/",E=m;if(u!=="/"){let R=u.replace(/^\//,"").split("/");E="/"+m.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=wI(t,{pathname:E}),C=XI(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:Ci([u,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Ci([u,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&C?O.createElement(gc.Provider,{value:{location:ya({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:kr.Pop}},C):C}function HI(){let t=eC(),e=jI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const KI=O.createElement(HI,null);class GI extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Fi.Provider,{value:this.props.routeContext},O.createElement(pE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QI(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(wp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Fi.Provider,{value:e},r)}function XI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Je(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:m,errors:E}=n,T=d.route.loader&&m[d.route.id]===void 0&&(!E||E[d.route.id]===void 0);if(d.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,m)=>{let E,T=!1,C=null,R=null;n&&(E=a&&d.route.id?a[d.route.id]:void 0,C=d.route.errorElement||KI,u&&(c<0&&m===0?(T=!0,R=null):c===m&&(T=!0,R=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),g=()=>{let y;return E?y=C:T?y=R:d.route.Component?y=O.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=h,O.createElement(QI,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?O.createElement(GI,{location:n.location,revalidation:n.revalidation,component:C,error:E,children:g(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):g()},null)}var gE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gE||{}),Vu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vu||{});function YI(t){let e=O.useContext(wp);return e||Je(!1),e}function JI(t){let e=O.useContext(zI);return e||Je(!1),e}function ZI(t){let e=O.useContext(Fi);return e||Je(!1),e}function yE(t){let e=ZI(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function eC(){var t;let e=O.useContext(pE),n=JI(Vu.UseRouteError),r=yE(Vu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tC(){let{router:t}=YI(gE.UseNavigateStable),e=yE(Vu.UseNavigateStable),n=O.useRef(!1);return mE(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ya({fromRouteId:e},s)))},[t,e])}const xy={};function nC(t,e){xy[e]||(xy[e]=!0,console.warn(e))}const Ry=(t,e,n)=>nC(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function rC(t,e){t!=null&&t.v7_startTransition||Ry("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&Ry("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function iC(t){let{to:e,replace:n,state:r,relative:i}=t;La()||Je(!1);let{future:s,static:o}=O.useContext(Ma),{matches:a}=O.useContext(Fi),{pathname:u}=Ep(),c=Tp(),h=fE(e,hE(a,s.v7_relativeSplatPath),u,i==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Jl(t){Je(!1)}function sC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=kr.Pop,navigator:s,static:o=!1,future:a}=t;La()&&Je(!1);let u=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:u,navigator:s,static:o,future:ya({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Hs(r));let{pathname:h="/",search:d="",hash:m="",state:E=null,key:T="default"}=r,C=O.useMemo(()=>{let R=cE(h,u);return R==null?null:{location:{pathname:R,search:d,hash:m,state:E,key:T},navigationType:i}},[u,h,d,m,E,T,i]);return C==null?null:O.createElement(Ma.Provider,{value:c},O.createElement(gc.Provider,{children:n,value:C}))}function oC(t){let{children:e,location:n}=t;return $I(Uf(e),n)}new Promise(()=>{});function Uf(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,Uf(r.props.children,s));return}r.type!==Jl&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const aC="6";try{window.__reactRouterVersion=aC}catch{}const lC="startTransition",ky=rS[lC];function uC(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=yI({window:i,v5Compat:!0}));let o=s.current,[a,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=O.useCallback(d=>{c&&ky?ky(()=>u(d)):u(d)},[u,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>rC(r),[r]),O.createElement(sC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var by;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(by||(by={}));var Vy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vy||(Vy={}));var Dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,E=c&63;u||(E=64,o||(m=64)),r.push(n[h],n[d],n[m],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new hC;const m=s<<2|a>>4;if(r.push(m),c!==64){const E=a<<4&240|c>>2;if(r.push(E),d!==64){const T=c<<6&192|d;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fC=function(t){const e=vE(t);return _E.encodeByteArray(e,!0)},Du=function(t){return fC(t).replace(/\./g,"")},dC=function(t){try{return _E.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=()=>pC().__FIREBASE_DEFAULTS__,gC=()=>{if(typeof process>"u"||typeof Dy>"u")return;const t=Dy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dC(t[1]);return e&&JSON.parse(e)},Ap=()=>{try{return mC()||gC()||yC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vC=t=>{var e,n;return(n=(e=Ap())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_C=t=>{const e=vC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wE=()=>{var t;return(t=Ap())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Du(JSON.stringify(n)),Du(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AC(){var t;const e=(t=Ap())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SC(){return!AC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PC(){try{return typeof indexedDB=="object"}catch{return!1}}function IC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="FirebaseError";class Ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CC,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,EE.prototype.create)}}class EE{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ks(i,a,r)}}function xC(t,e){return t.replace(RC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const RC=/\{\$([^}]+)}/g;function zf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ny(s)&&Ny(o)){if(!zf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ny(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){return t&&t._delegate?t._delegate:t}class va{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VC(e))try{this.getOrInitializeService({instanceIdentifier:yi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yi){return this.instances.has(e)}getOptions(e=yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yi){return this.component?this.component.multipleInstances?e:yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bC(t){return t===yi?void 0:t}function VC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const NC={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},MC=pe.INFO,LC={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},OC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=LC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class TE{constructor(e){this.name=e,this._logLevel=MC,this._logHandler=OC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const FC=(t,e)=>e.some(n=>t instanceof n);let My,Ly;function BC(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jC(){return Ly||(Ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,Wf=new WeakMap,SE=new WeakMap,Ih=new WeakMap,Sp=new WeakMap;function UC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AE.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function zC(t){if(Wf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Wf.set(t,e)}let $f={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WC(t){$f=t($f)}function $C(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ch(this),e,...n);return SE.set(r,e.sort?e.sort():[e]),jr(r)}:jC().includes(t)?function(...e){return t.apply(Ch(this),e),jr(AE.get(this))}:function(...e){return jr(t.apply(Ch(this),e))}}function qC(t){return typeof t=="function"?$C(t):(t instanceof IDBTransaction&&zC(t),FC(t,BC())?new Proxy(t,$f):t)}function jr(t){if(t instanceof IDBRequest)return UC(t);if(Ih.has(t))return Ih.get(t);const e=qC(t);return e!==t&&(Ih.set(t,e),Sp.set(e,t)),e}const Ch=t=>Sp.get(t);function HC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=jr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jr(o.result),u.oldVersion,u.newVersion,jr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],xh=new Map;function Oy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KC.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return xh.set(e,s),s}WC(t=>({...t,get:(e,n,r)=>Oy(e,n)||t.get(e,n,r),has:(e,n)=>!!Oy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",Fy="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new TE("@firebase/app"),YC="@firebase/app-compat",JC="@firebase/analytics-compat",ZC="@firebase/analytics",ex="@firebase/app-check-compat",tx="@firebase/app-check",nx="@firebase/auth",rx="@firebase/auth-compat",ix="@firebase/database",sx="@firebase/data-connect",ox="@firebase/database-compat",ax="@firebase/functions",lx="@firebase/functions-compat",ux="@firebase/installations",cx="@firebase/installations-compat",hx="@firebase/messaging",fx="@firebase/messaging-compat",dx="@firebase/performance",px="@firebase/performance-compat",mx="@firebase/remote-config",gx="@firebase/remote-config-compat",yx="@firebase/storage",vx="@firebase/storage-compat",_x="@firebase/firestore",wx="@firebase/vertexai",Ex="@firebase/firestore-compat",Tx="firebase",Ax="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",Sx={[qf]:"fire-core",[YC]:"fire-core-compat",[ZC]:"fire-analytics",[JC]:"fire-analytics-compat",[tx]:"fire-app-check",[ex]:"fire-app-check-compat",[nx]:"fire-auth",[rx]:"fire-auth-compat",[ix]:"fire-rtdb",[sx]:"fire-data-connect",[ox]:"fire-rtdb-compat",[ax]:"fire-fn",[lx]:"fire-fn-compat",[ux]:"fire-iid",[cx]:"fire-iid-compat",[hx]:"fire-fcm",[fx]:"fire-fcm-compat",[dx]:"fire-perf",[px]:"fire-perf-compat",[mx]:"fire-rc",[gx]:"fire-rc-compat",[yx]:"fire-gcs",[vx]:"fire-gcs-compat",[_x]:"fire-fst",[Ex]:"fire-fst-compat",[wx]:"fire-vertex","fire-js":"fire-js",[Tx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Map,Px=new Map,Kf=new Map;function By(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mu(t){const e=t.name;if(Kf.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;Kf.set(e,t);for(const n of Nu.values())By(n,t);for(const n of Px.values())By(n,t);return!0}function Ix(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new EE("app","Firebase",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=Ax;function PE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(n||(n=wE()),!n)throw Ur.create("no-options");const s=Nu.get(i);if(s){if(zf(n,s.options)&&zf(r,s.config))return s;throw Ur.create("duplicate-app",{appName:i})}const o=new DC(i);for(const u of Kf.values())o.addComponent(u);const a=new xx(n,r,o);return Nu.set(i,a),a}function kx(t=Hf){const e=Nu.get(t);if(!e&&t===Hf&&wE())return PE();if(!e)throw Ur.create("no-app",{appName:t});return e}function Ss(t,e,n){var r;let i=(r=Sx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(a.join(" "));return}Mu(new va(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="firebase-heartbeat-database",Vx=1,_a="firebase-heartbeat-store";let Rh=null;function IE(){return Rh||(Rh=HC(bx,Vx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Rh}async function Dx(t){try{const n=(await IE()).transaction(_a),r=await n.objectStore(_a).get(CE(t));return await n.done,r}catch(e){if(e instanceof Ks)cr.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cr.warn(n.message)}}}async function jy(t,e){try{const r=(await IE()).transaction(_a,"readwrite");await r.objectStore(_a).put(e,CE(t)),await r.done}catch(n){if(n instanceof Ks)cr.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cr.warn(r.message)}}}function CE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=1024,Mx=30*24*60*60*1e3;class Lx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Uy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Mx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uy(),{heartbeatsToSend:r,unsentEntries:i}=Ox(this._heartbeatsCache.heartbeats),s=Du(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return cr.warn(n),""}}}function Uy(){return new Date().toISOString().substring(0,10)}function Ox(t,e=Nx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PC()?IC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Dx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zy(t){return Du(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){Mu(new va("platform-logger",e=>new QC(e),"PRIVATE")),Mu(new va("heartbeat",e=>new Lx(e),"PRIVATE")),Ss(qf,Fy,t),Ss(qf,Fy,"esm2017"),Ss("fire-js","")}Bx("");var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,xE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,v){function S(){}S.prototype=v.prototype,A.D=v.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(P,V,D){for(var k=Array(arguments.length-2),it=2;it<arguments.length;it++)k[it-2]=arguments[it];return v.prototype[V].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,v,S){S||(S=0);var P=Array(16);if(typeof v=="string")for(var V=0;16>V;++V)P[V]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(V=0;16>V;++V)P[V]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=A.g[0],S=A.g[1],V=A.g[2];var D=A.g[3],k=v+(D^S&(V^D))+P[0]+3614090360&4294967295;v=S+(k<<7&4294967295|k>>>25),k=D+(V^v&(S^V))+P[1]+3905402710&4294967295,D=v+(k<<12&4294967295|k>>>20),k=V+(S^D&(v^S))+P[2]+606105819&4294967295,V=D+(k<<17&4294967295|k>>>15),k=S+(v^V&(D^v))+P[3]+3250441966&4294967295,S=V+(k<<22&4294967295|k>>>10),k=v+(D^S&(V^D))+P[4]+4118548399&4294967295,v=S+(k<<7&4294967295|k>>>25),k=D+(V^v&(S^V))+P[5]+1200080426&4294967295,D=v+(k<<12&4294967295|k>>>20),k=V+(S^D&(v^S))+P[6]+2821735955&4294967295,V=D+(k<<17&4294967295|k>>>15),k=S+(v^V&(D^v))+P[7]+4249261313&4294967295,S=V+(k<<22&4294967295|k>>>10),k=v+(D^S&(V^D))+P[8]+1770035416&4294967295,v=S+(k<<7&4294967295|k>>>25),k=D+(V^v&(S^V))+P[9]+2336552879&4294967295,D=v+(k<<12&4294967295|k>>>20),k=V+(S^D&(v^S))+P[10]+4294925233&4294967295,V=D+(k<<17&4294967295|k>>>15),k=S+(v^V&(D^v))+P[11]+2304563134&4294967295,S=V+(k<<22&4294967295|k>>>10),k=v+(D^S&(V^D))+P[12]+1804603682&4294967295,v=S+(k<<7&4294967295|k>>>25),k=D+(V^v&(S^V))+P[13]+4254626195&4294967295,D=v+(k<<12&4294967295|k>>>20),k=V+(S^D&(v^S))+P[14]+2792965006&4294967295,V=D+(k<<17&4294967295|k>>>15),k=S+(v^V&(D^v))+P[15]+1236535329&4294967295,S=V+(k<<22&4294967295|k>>>10),k=v+(V^D&(S^V))+P[1]+4129170786&4294967295,v=S+(k<<5&4294967295|k>>>27),k=D+(S^V&(v^S))+P[6]+3225465664&4294967295,D=v+(k<<9&4294967295|k>>>23),k=V+(v^S&(D^v))+P[11]+643717713&4294967295,V=D+(k<<14&4294967295|k>>>18),k=S+(D^v&(V^D))+P[0]+3921069994&4294967295,S=V+(k<<20&4294967295|k>>>12),k=v+(V^D&(S^V))+P[5]+3593408605&4294967295,v=S+(k<<5&4294967295|k>>>27),k=D+(S^V&(v^S))+P[10]+38016083&4294967295,D=v+(k<<9&4294967295|k>>>23),k=V+(v^S&(D^v))+P[15]+3634488961&4294967295,V=D+(k<<14&4294967295|k>>>18),k=S+(D^v&(V^D))+P[4]+3889429448&4294967295,S=V+(k<<20&4294967295|k>>>12),k=v+(V^D&(S^V))+P[9]+568446438&4294967295,v=S+(k<<5&4294967295|k>>>27),k=D+(S^V&(v^S))+P[14]+3275163606&4294967295,D=v+(k<<9&4294967295|k>>>23),k=V+(v^S&(D^v))+P[3]+4107603335&4294967295,V=D+(k<<14&4294967295|k>>>18),k=S+(D^v&(V^D))+P[8]+1163531501&4294967295,S=V+(k<<20&4294967295|k>>>12),k=v+(V^D&(S^V))+P[13]+2850285829&4294967295,v=S+(k<<5&4294967295|k>>>27),k=D+(S^V&(v^S))+P[2]+4243563512&4294967295,D=v+(k<<9&4294967295|k>>>23),k=V+(v^S&(D^v))+P[7]+1735328473&4294967295,V=D+(k<<14&4294967295|k>>>18),k=S+(D^v&(V^D))+P[12]+2368359562&4294967295,S=V+(k<<20&4294967295|k>>>12),k=v+(S^V^D)+P[5]+4294588738&4294967295,v=S+(k<<4&4294967295|k>>>28),k=D+(v^S^V)+P[8]+2272392833&4294967295,D=v+(k<<11&4294967295|k>>>21),k=V+(D^v^S)+P[11]+1839030562&4294967295,V=D+(k<<16&4294967295|k>>>16),k=S+(V^D^v)+P[14]+4259657740&4294967295,S=V+(k<<23&4294967295|k>>>9),k=v+(S^V^D)+P[1]+2763975236&4294967295,v=S+(k<<4&4294967295|k>>>28),k=D+(v^S^V)+P[4]+1272893353&4294967295,D=v+(k<<11&4294967295|k>>>21),k=V+(D^v^S)+P[7]+4139469664&4294967295,V=D+(k<<16&4294967295|k>>>16),k=S+(V^D^v)+P[10]+3200236656&4294967295,S=V+(k<<23&4294967295|k>>>9),k=v+(S^V^D)+P[13]+681279174&4294967295,v=S+(k<<4&4294967295|k>>>28),k=D+(v^S^V)+P[0]+3936430074&4294967295,D=v+(k<<11&4294967295|k>>>21),k=V+(D^v^S)+P[3]+3572445317&4294967295,V=D+(k<<16&4294967295|k>>>16),k=S+(V^D^v)+P[6]+76029189&4294967295,S=V+(k<<23&4294967295|k>>>9),k=v+(S^V^D)+P[9]+3654602809&4294967295,v=S+(k<<4&4294967295|k>>>28),k=D+(v^S^V)+P[12]+3873151461&4294967295,D=v+(k<<11&4294967295|k>>>21),k=V+(D^v^S)+P[15]+530742520&4294967295,V=D+(k<<16&4294967295|k>>>16),k=S+(V^D^v)+P[2]+3299628645&4294967295,S=V+(k<<23&4294967295|k>>>9),k=v+(V^(S|~D))+P[0]+4096336452&4294967295,v=S+(k<<6&4294967295|k>>>26),k=D+(S^(v|~V))+P[7]+1126891415&4294967295,D=v+(k<<10&4294967295|k>>>22),k=V+(v^(D|~S))+P[14]+2878612391&4294967295,V=D+(k<<15&4294967295|k>>>17),k=S+(D^(V|~v))+P[5]+4237533241&4294967295,S=V+(k<<21&4294967295|k>>>11),k=v+(V^(S|~D))+P[12]+1700485571&4294967295,v=S+(k<<6&4294967295|k>>>26),k=D+(S^(v|~V))+P[3]+2399980690&4294967295,D=v+(k<<10&4294967295|k>>>22),k=V+(v^(D|~S))+P[10]+4293915773&4294967295,V=D+(k<<15&4294967295|k>>>17),k=S+(D^(V|~v))+P[1]+2240044497&4294967295,S=V+(k<<21&4294967295|k>>>11),k=v+(V^(S|~D))+P[8]+1873313359&4294967295,v=S+(k<<6&4294967295|k>>>26),k=D+(S^(v|~V))+P[15]+4264355552&4294967295,D=v+(k<<10&4294967295|k>>>22),k=V+(v^(D|~S))+P[6]+2734768916&4294967295,V=D+(k<<15&4294967295|k>>>17),k=S+(D^(V|~v))+P[13]+1309151649&4294967295,S=V+(k<<21&4294967295|k>>>11),k=v+(V^(S|~D))+P[4]+4149444226&4294967295,v=S+(k<<6&4294967295|k>>>26),k=D+(S^(v|~V))+P[11]+3174756917&4294967295,D=v+(k<<10&4294967295|k>>>22),k=V+(v^(D|~S))+P[2]+718787259&4294967295,V=D+(k<<15&4294967295|k>>>17),k=S+(D^(V|~v))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+v&4294967295,A.g[1]=A.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+V&4294967295,A.g[3]=A.g[3]+D&4294967295}r.prototype.u=function(A,v){v===void 0&&(v=A.length);for(var S=v-this.blockSize,P=this.B,V=this.h,D=0;D<v;){if(V==0)for(;D<=S;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<v;)if(P[V++]=A.charCodeAt(D++),V==this.blockSize){i(this,P),V=0;break}}else for(;D<v;)if(P[V++]=A[D++],V==this.blockSize){i(this,P),V=0;break}}this.h=V,this.o+=v},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var v=1;v<A.length-8;++v)A[v]=0;var S=8*this.o;for(v=A.length-8;v<A.length;++v)A[v]=S&255,S/=256;for(this.u(A),A=Array(16),v=S=0;4>v;++v)for(var P=0;32>P;P+=8)A[S++]=this.g[v]>>>P&255;return A};function s(A,v){var S=a;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=v(A)}function o(A,v){this.h=v;for(var S=[],P=!0,V=A.length-1;0<=V;V--){var D=A[V]|0;P&&D==v||(S[V]=D,P=!1)}this.g=S}var a={};function u(A){return-128<=A&&128>A?s(A,function(v){return new o([v|0],0>v?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return R(c(-A));for(var v=[],S=1,P=0;A>=S;P++)v[P]=A/S|0,S*=4294967296;return new o(v,0)}function h(A,v){if(A.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A.charAt(0)=="-")return R(h(A.substring(1),v));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),P=d,V=0;V<A.length;V+=8){var D=Math.min(8,A.length-V),k=parseInt(A.substring(V,V+D),v);8>D?(D=c(Math.pow(v,D)),P=P.j(D).add(c(k))):(P=P.j(S),P=P.add(c(k)))}return P}var d=u(0),m=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-R(this).m();for(var A=0,v=1,S=0;S<this.g.length;S++){var P=this.i(S);A+=(0<=P?P:4294967296+P)*v,v*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(C(this))return"-"+R(this).toString(A);for(var v=c(Math.pow(A,6)),S=this,P="";;){var V=b(S,v).g;S=w(S,V.j(v));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=V,T(S))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var v=0;v<A.g.length;v++)if(A.g[v]!=0)return!1;return!0}function C(A){return A.h==-1}t.l=function(A){return A=w(this,A),C(A)?-1:T(A)?0:1};function R(A){for(var v=A.g.length,S=[],P=0;P<v;P++)S[P]=~A.g[P];return new o(S,~A.h).add(m)}t.abs=function(){return C(this)?R(this):this},t.add=function(A){for(var v=Math.max(this.g.length,A.g.length),S=[],P=0,V=0;V<=v;V++){var D=P+(this.i(V)&65535)+(A.i(V)&65535),k=(D>>>16)+(this.i(V)>>>16)+(A.i(V)>>>16);P=k>>>16,D&=65535,k&=65535,S[V]=k<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(A,v){return A.add(R(v))}t.j=function(A){if(T(this)||T(A))return d;if(C(this))return C(A)?R(this).j(R(A)):R(R(this).j(A));if(C(A))return R(this.j(R(A)));if(0>this.l(E)&&0>A.l(E))return c(this.m()*A.m());for(var v=this.g.length+A.g.length,S=[],P=0;P<2*v;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<A.g.length;V++){var D=this.i(P)>>>16,k=this.i(P)&65535,it=A.i(V)>>>16,an=A.i(V)&65535;S[2*P+2*V]+=k*an,g(S,2*P+2*V),S[2*P+2*V+1]+=D*an,g(S,2*P+2*V+1),S[2*P+2*V+1]+=k*it,g(S,2*P+2*V+1),S[2*P+2*V+2]+=D*it,g(S,2*P+2*V+2)}for(P=0;P<v;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=v;P<2*v;P++)S[P]=0;return new o(S,0)};function g(A,v){for(;(A[v]&65535)!=A[v];)A[v+1]+=A[v]>>>16,A[v]&=65535,v++}function y(A,v){this.g=A,this.h=v}function b(A,v){if(T(v))throw Error("division by zero");if(T(A))return new y(d,d);if(C(A))return v=b(R(A),v),new y(R(v.g),R(v.h));if(C(v))return v=b(A,R(v)),new y(R(v.g),v.h);if(30<A.g.length){if(C(A)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var S=m,P=v;0>=P.l(A);)S=L(S),P=L(P);var V=B(S,1),D=B(P,1);for(P=B(P,2),S=B(S,2);!T(P);){var k=D.add(P);0>=k.l(A)&&(V=V.add(S),D=k),P=B(P,1),S=B(S,1)}return v=w(A,V.j(v)),new y(V,v)}for(V=d;0<=A.l(v);){for(S=Math.max(1,Math.floor(A.m()/v.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(S),k=D.j(v);C(k)||0<k.l(A);)S-=P,D=c(S),k=D.j(v);T(D)&&(D=m),V=V.add(D),A=w(A,k)}return new y(V,A)}t.A=function(A){return b(this,A).h},t.and=function(A){for(var v=Math.max(this.g.length,A.g.length),S=[],P=0;P<v;P++)S[P]=this.i(P)&A.i(P);return new o(S,this.h&A.h)},t.or=function(A){for(var v=Math.max(this.g.length,A.g.length),S=[],P=0;P<v;P++)S[P]=this.i(P)|A.i(P);return new o(S,this.h|A.h)},t.xor=function(A){for(var v=Math.max(this.g.length,A.g.length),S=[],P=0;P<v;P++)S[P]=this.i(P)^A.i(P);return new o(S,this.h^A.h)};function L(A){for(var v=A.g.length+1,S=[],P=0;P<v;P++)S[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(S,A.h)}function B(A,v){var S=v>>5;v%=32;for(var P=A.g.length-S,V=[],D=0;D<P;D++)V[D]=0<v?A.i(D+S)>>>v|A.i(D+S+1)<<32-v:A.i(D+S);return new o(V,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,xi=o}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RE,Vo,kE,Zl,Gf,bE,VE,DE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,p){return l==Array.prototype||l==Object.prototype||(l[f]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var f=0;f<l.length;++f){var p=l[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var M=l[_];if(!(M in p))break e;p=p[M]}l=l[l.length-1],_=p[l],f=f(_),f!=_&&f!=null&&e(p,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var p=0,_=!1,M={next:function(){if(!_&&p<l.length){var F=p++;return{value:f(F,l[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,p){return l.call.apply(l.bind,arguments)}function d(l,f,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function m(l,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function E(l,f){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function T(l,f){function p(){}p.prototype=f.prototype,l.aa=f.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,M,F){for(var H=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)H[xe-2]=arguments[xe];return f.prototype[M].apply(_,H)}}function C(l){const f=l.length;if(0<f){const p=Array(f);for(let _=0;_<f;_++)p[_]=l[_];return p}return[]}function R(l,f){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const M=l.length||0,F=_.length||0;l.length=M+F;for(let H=0;H<F;H++)l[M+H]=_[H]}else l.push(_)}}class w{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function g(l){return/^[\s\xa0]*$/.test(l)}function y(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var L=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function B(l,f,p){for(const _ in l)f.call(p,l[_],_,l)}function A(l,f){for(const p in l)f.call(void 0,l[p],p,l)}function v(l){const f={};for(const p in l)f[p]=l[p];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,f){let p,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(p in _)l[p]=_[p];for(let F=0;F<S.length;F++)p=S[F],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function V(l){var f=1;l=l.split(":");const p=[];for(;0<f&&l.length;)p.push(l.shift()),f--;return l.length&&p.push(l.join(":")),p}function D(l){a.setTimeout(()=>{throw l},0)}function k(){var l=ne;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class it{constructor(){this.h=this.g=null}add(f,p){const _=an.get();_.set(f,p),this.h?this.h.next=_:this.g=_,this.h=_}}var an=new w(()=>new kn,l=>l.reset());class kn{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,q=!1,ne=new it,te=()=>{const l=a.Promise.resolve(void 0);Ce=()=>{l.then(we)}};var we=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(p){D(p)}var f=an;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}q=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return l}();function Ht(l,f){if(Le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(L){e:{try{b(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else p=="mouseover"?f=l.fromElement:p=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Kt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ht.aa.h.call(this)}}T(Ht,Le);var Kt={2:"touch",3:"pen",4:"mouse"};Ht.prototype.h=function(){Ht.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),Ka=0;function Wc(l,f,p,_,M){this.listener=l,this.proxy=null,this.src=f,this.type=p,this.capture=!!_,this.ha=M,this.key=++Ka,this.da=this.fa=!1}function ai(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function pr(l){this.src=l,this.g={},this.h=0}pr.prototype.add=function(l,f,p,_,M){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var H=$n(l,f,_,M);return-1<H?(f=l[H],p||(f.fa=!1)):(f=new Wc(f,this.src,F,!!_,M),f.fa=p,l.push(f)),f};function Wn(l,f){var p=f.type;if(p in l.g){var _=l.g[p],M=Array.prototype.indexOf.call(_,f,void 0),F;(F=0<=M)&&Array.prototype.splice.call(_,M,1),F&&(ai(f),l.g[p].length==0&&(delete l.g[p],l.h--))}}function $n(l,f,p,_){for(var M=0;M<l.length;++M){var F=l[M];if(!F.da&&F.listener==f&&F.capture==!!p&&F.ha==_)return M}return-1}var eo="closure_lm_"+(1e6*Math.random()|0),zi={};function Wi(l,f,p,_,M){if(Array.isArray(f)){for(var F=0;F<f.length;F++)Wi(l,f[F],p,_,M);return null}return p=_t(p),l&&l[Ot]?l.K(f,p,c(_)?!!_.capture:!!_,M):mr(l,f,p,!1,_,M)}function mr(l,f,p,_,M,F){if(!f)throw Error("Invalid event type");var H=c(M)?!!M.capture:!!M,xe=vt(l);if(xe||(l[eo]=xe=new pr(l)),p=xe.add(f,p,_,H,F),p.proxy)return p;if(_=$c(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)ln||(M=H),M===void 0&&(M=!1),l.addEventListener(f.toString(),_,M);else if(l.attachEvent)l.attachEvent(Qa(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function $c(){function l(p){return f.call(l.src,l.listener,p)}const f=qc;return l}function Ga(l,f,p,_,M){if(Array.isArray(f))for(var F=0;F<f.length;F++)Ga(l,f[F],p,_,M);else _=c(_)?!!_.capture:!!_,p=_t(p),l&&l[Ot]?(l=l.i,f=String(f).toString(),f in l.g&&(F=l.g[f],p=$n(F,p,_,M),-1<p&&(ai(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[f],l.h--)))):l&&(l=vt(l))&&(f=l.g[f.toString()],l=-1,f&&(l=$n(f,p,_,M)),(p=-1<l?f[l]:null)&&me(p))}function me(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Ot])Wn(f.i,l);else{var p=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(p,_,l.capture):f.detachEvent?f.detachEvent(Qa(p),_):f.addListener&&f.removeListener&&f.removeListener(_),(p=vt(f))?(Wn(p,l),p.h==0&&(p.src=null,f[eo]=null)):ai(l)}}}function Qa(l){return l in zi?zi[l]:zi[l]="on"+l}function qc(l,f){if(l.da)l=!0;else{f=new Ht(f,this);var p=l.listener,_=l.ha||l.src;l.fa&&me(l),l=p.call(_,f)}return l}function vt(l){return l=l[eo],l instanceof pr?l:null}var li="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(l){return typeof l=="function"?l:(l[li]||(l[li]=function(f){return l.handleEvent(f)}),l[li])}function Ze(){Ee.call(this),this.i=new pr(this),this.M=this,this.F=null}T(Ze,Ee),Ze.prototype[Ot]=!0,Ze.prototype.removeEventListener=function(l,f,p,_){Ga(this,l,f,p,_)};function st(l,f){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new Le(f,l);else if(f instanceof Le)f.target=f.target||l;else{var M=f;f=new Le(_,l),P(f,M)}if(M=!0,p)for(var F=p.length-1;0<=F;F--){var H=f.g=p[F];M=ui(H,_,!0,f)&&M}if(H=f.g=l,M=ui(H,_,!0,f)&&M,M=ui(H,_,!1,f)&&M,p)for(F=0;F<p.length;F++)H=f.g=p[F],M=ui(H,_,!1,f)&&M}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var p=l.g[f],_=0;_<p.length;_++)ai(p[_]);delete l.g[f],l.h--}}this.F=null},Ze.prototype.K=function(l,f,p,_){return this.i.add(String(l),f,!1,p,_)},Ze.prototype.L=function(l,f,p,_){return this.i.add(String(l),f,!0,p,_)};function ui(l,f,p,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,F=0;F<f.length;++F){var H=f[F];if(H&&!H.da&&H.capture==p){var xe=H.listener,ct=H.ha||H.src;H.fa&&Wn(l.i,H),M=xe.call(ct,_)!==!1&&M}}return M&&!_.defaultPrevented}function to(l,f,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function no(l){l.g=to(()=>{l.g=null,l.i&&(l.i=!1,no(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Hc extends Ee{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:no(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(l){Ee.call(this),this.h=l,this.g={}}T(ci,Ee);var ro=[];function Xa(l){B(l.g,function(f,p){this.g.hasOwnProperty(p)&&me(f)},l),l.g={}}ci.prototype.N=function(){ci.aa.N.call(this),Xa(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var io=a.JSON.stringify,Kc=a.JSON.parse,hi=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function so(){}so.prototype.h=null;function gr(l){return l.h||(l.h=l.i())}function Ya(){}var Gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oo(){Le.call(this,"d")}T(oo,Le);function ao(){Le.call(this,"c")}T(ao,Le);var qn={},yr=null;function $i(){return yr=yr||new Ze}qn.La="serverreachability";function Ja(l){Le.call(this,qn.La,l)}T(Ja,Le);function vn(l){const f=$i();st(f,new Ja(f))}qn.STAT_EVENT="statevent";function Za(l,f){Le.call(this,qn.STAT_EVENT,l),this.stat=f}T(Za,Le);function ut(l){const f=$i();st(f,new Za(f,l))}qn.Ma="timingevent";function qi(l,f){Le.call(this,qn.Ma,l),this.size=f}T(qi,Le);function I(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function x(){this.g=!0}x.prototype.xa=function(){this.g=!1};function N(l,f,p,_,M,F){l.info(function(){if(l.g)if(F)for(var H="",xe=F.split("&"),ct=0;ct<xe.length;ct++){var ye=xe[ct].split("=");if(1<ye.length){var wt=ye[0];ye=ye[1];var Et=wt.split("_");H=2<=Et.length&&Et[1]=="type"?H+(wt+"="+ye+"&"):H+(wt+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+f+`
`+p+`
`+H})}function z(l,f,p,_,M,F,H){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+f+`
`+p+`
`+F+" "+H})}function $(l,f,p,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Te(l,p)+(_?" "+_:"")})}function oe(l,f){l.info(function(){return"TIMEOUT: "+f})}x.prototype.info=function(){};function Te(l,f){if(!l.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<M.length;H++)M[H]=""}}}}return io(p)}catch{return f}}var re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Z;function ve(){}T(ve,so),ve.prototype.g=function(){return new XMLHttpRequest},ve.prototype.i=function(){return{}},Z=new ve;function Re(l,f,p,_){this.j=l,this.i=f,this.l=p,this.R=_||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var vr={},Hn={};function Qt(l,f,p){l.L=1,l.v=il(Kn(f)),l.m=p,l.P=!0,_n(l,null)}function _n(l,f){l.F=Date.now(),ue(l),l.A=Kn(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Hm(p.i,"t",_),l.C=0,p=l.j.J,l.h=new Hi,l.g=cg(l.j,p?f:null,!l.m),0<l.O&&(l.M=new Hc(m(l.Y,l,l.g),l.O)),f=l.U,p=l.g,_=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(ro[0]=M.toString()),M=ro);for(var F=0;F<M.length;F++){var H=Wi(p,M[F],_||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),vn(),N(l.i,l.u,l.A,l.l,l.R,l.m)}Re.prototype.ca=function(l){l=l.target;const f=this.M;f&&Gn(l)==3?f.j():this.Y(l)},Re.prototype.Y=function(l){try{if(l==this.g)e:{const Et=Gn(this.g);var f=this.g.Ba();const Qi=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||Zm(this.g)))){this.J||Et!=4||f==7||(f==8||0>=Qi?vn(3):vn(2)),un(this);var p=this.g.Z();this.X=p;t:if(J(this)){var _=Zm(this.g);l="";var M=_.length,F=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),_r(this);var H="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(F&&f==M-1)});_.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,z(this.i,this.u,this.A,this.l,this.R,Et,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,ct=this.g;if((xe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(xe)){var ye=xe;break t}}ye=null}if(p=ye)$(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lo(this,p);else{this.o=!1,this.s=3,ut(12),bn(this),_r(this);break e}}if(this.P){p=!0;let wn;for(;!this.J&&this.C<H.length;)if(wn=Oe(this,H),wn==Hn){Et==4&&(this.s=4,ut(14),p=!1),$(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==vr){this.s=4,ut(15),$(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else $(this.i,this.l,wn,null),lo(this,wn);if(J(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||H.length!=0||this.h.h||(this.s=1,ut(16),p=!1),this.o=this.o&&p,!p)$(this.i,this.l,H,"[Invalid Chunked Response]"),bn(this),_r(this);else if(0<H.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Yc(wt),wt.M=!0,ut(11))}}else $(this.i,this.l,H,null),lo(this,H);Et==4&&bn(this),this.o&&!this.J&&(Et==4?og(this.j,this):(this.o=!1,ue(this)))}else OA(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),bn(this),_r(this)}}}catch{}finally{}};function J(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Oe(l,f){var p=l.C,_=f.indexOf(`
`,p);return _==-1?Hn:(p=Number(f.substring(p,_)),isNaN(p)?vr:(_+=1,_+p>f.length?Hn:(f=f.slice(_,_+p),l.C=_+p,f)))}Re.prototype.cancel=function(){this.J=!0,bn(this)};function ue(l){l.S=Date.now()+l.I,Fe(l,l.I)}function Fe(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=I(m(l.ba,l),f)}function un(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Re.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(oe(this.i,this.A),this.L!=2&&(vn(),ut(17)),bn(this),this.s=2,_r(this)):Fe(this,this.S-l)};function _r(l){l.j.G==0||l.J||og(l.j,l)}function bn(l){un(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Xa(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function lo(l,f){try{var p=l.j;if(p.G!=0&&(p.g==l||Xt(p.h,l))){if(!l.K&&Xt(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)cl(p),ll(p);else break e;Xc(p),ut(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=I(m(p.Za,p),6e3));if(1>=G(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else di(p,11)}else if((l.K||p.g==l)&&cl(p),!g(f))for(M=p.Da.g.parse(f),f=0;f<M.length;f++){let ye=M[f];if(p.T=ye[0],ye=ye[1],p.G==2)if(ye[0]=="c"){p.K=ye[1],p.ia=ye[2];const wt=ye[3];wt!=null&&(p.la=wt,p.j.info("VER="+p.la));const Et=ye[4];Et!=null&&(p.Aa=Et,p.j.info("SVER="+p.Aa));const Qi=ye[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(_=1.5*Qi,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const wn=l.g;if(wn){const fl=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fl){var F=_.h;F.g||fl.indexOf("spdy")==-1&&fl.indexOf("quic")==-1&&fl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Vn(F,F.h),F.h=null))}if(_.D){const Jc=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(_.ya=Jc,be(_.I,_.D,Jc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var H=l;if(_.qa=ug(_,_.J?_.ia:null,_.W),H.K){co(_.h,H);var xe=H,ct=_.L;ct&&(xe.I=ct),xe.B&&(un(xe),ue(xe)),_.g=H}else ig(_);0<p.i.length&&ul(p)}else ye[0]!="stop"&&ye[0]!="close"||di(p,7);else p.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?di(p,7):Qc(p):ye[0]!="noop"&&p.l&&p.l.ta(ye),p.v=0)}}vn(4)}catch{}}var uo=class{constructor(l,f){this.g=l,this.map=f}};function el(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tl(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function G(l){return l.h?1:l.g?l.g.size:0}function Xt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Vn(l,f){l.g?l.g.add(f):l.h=f}function co(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}el.prototype.cancel=function(){if(this.i=Bm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Bm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const p of l.g.values())f=f.concat(p.D);return f}return C(l.i)}function TA(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],p=l.length,_=0;_<p;_++)f.push(l[_]);return f}f=[],p=0;for(_ in l)f[p++]=l[_];return f}function AA(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var p=0;p<l;p++)f.push(p);return f}f=[],p=0;for(const _ in l)f[p++]=_;return f}}}function jm(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var p=AA(l),_=TA(l),M=_.length,F=0;F<M;F++)f.call(void 0,_[F],p&&p[F],l)}var Um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SA(l,f){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),M=null;if(0<=_){var F=l[p].substring(0,_);M=l[p].substring(_+1)}else F=l[p];f(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function fi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof fi){this.h=l.h,nl(this,l.j),this.o=l.o,this.g=l.g,rl(this,l.s),this.l=l.l;var f=l.i,p=new po;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),zm(this,p),this.m=l.m}else l&&(f=String(l).match(Um))?(this.h=!1,nl(this,f[1]||"",!0),this.o=ho(f[2]||""),this.g=ho(f[3]||"",!0),rl(this,f[4]),this.l=ho(f[5]||"",!0),zm(this,f[6]||"",!0),this.m=ho(f[7]||"")):(this.h=!1,this.i=new po(null,this.h))}fi.prototype.toString=function(){var l=[],f=this.j;f&&l.push(fo(f,Wm,!0),":");var p=this.g;return(p||f=="file")&&(l.push("//"),(f=this.o)&&l.push(fo(f,Wm,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(fo(p,p.charAt(0)=="/"?CA:IA,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",fo(p,RA)),l.join("")};function Kn(l){return new fi(l)}function nl(l,f,p){l.j=p?ho(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function rl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function zm(l,f,p){f instanceof po?(l.i=f,kA(l.i,l.h)):(p||(f=fo(f,xA)),l.i=new po(f,l.h))}function be(l,f,p){l.i.set(f,p)}function il(l){return be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ho(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function fo(l,f,p){return typeof l=="string"?(l=encodeURI(l).replace(f,PA),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function PA(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wm=/[#\/\?@]/g,IA=/[#\?:]/g,CA=/[#\?]/g,xA=/[#\?@]/g,RA=/#/g;function po(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function wr(l){l.g||(l.g=new Map,l.h=0,l.i&&SA(l.i,function(f,p){l.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=po.prototype,t.add=function(l,f){wr(this),this.i=null,l=Ki(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(f),this.h+=1,this};function $m(l,f){wr(l),f=Ki(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function qm(l,f){return wr(l),f=Ki(l,f),l.g.has(f)}t.forEach=function(l,f){wr(this),this.g.forEach(function(p,_){p.forEach(function(M){l.call(f,M,_,this)},this)},this)},t.na=function(){wr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let _=0;_<f.length;_++){const M=l[_];for(let F=0;F<M.length;F++)p.push(f[_])}return p},t.V=function(l){wr(this);let f=[];if(typeof l=="string")qm(this,l)&&(f=f.concat(this.g.get(Ki(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)f=f.concat(l[p])}return f},t.set=function(l,f){return wr(this),this.i=null,l=Ki(this,l),qm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Hm(l,f,p){$m(l,f),0<p.length&&(l.i=null,l.g.set(Ki(l,f),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var _=f[p];const F=encodeURIComponent(String(_)),H=this.V(_);for(_=0;_<H.length;_++){var M=F;H[_]!==""&&(M+="="+encodeURIComponent(String(H[_]))),l.push(M)}}return this.i=l.join("&")};function Ki(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function kA(l,f){f&&!l.j&&(wr(l),l.i=null,l.g.forEach(function(p,_){var M=_.toLowerCase();_!=M&&($m(this,_),Hm(this,M,p))},l)),l.j=f}function bA(l,f){const p=new x;if(a.Image){const _=new Image;_.onload=E(Er,p,"TestLoadImage: loaded",!0,f,_),_.onerror=E(Er,p,"TestLoadImage: error",!1,f,_),_.onabort=E(Er,p,"TestLoadImage: abort",!1,f,_),_.ontimeout=E(Er,p,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function VA(l,f){const p=new x,_=new AbortController,M=setTimeout(()=>{_.abort(),Er(p,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(F=>{clearTimeout(M),F.ok?Er(p,"TestPingServer: ok",!0,f):Er(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Er(p,"TestPingServer: error",!1,f)})}function Er(l,f,p,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(p)}catch{}}function DA(){this.g=new hi}function NA(l,f,p){const _=p||"";try{jm(l,function(M,F){let H=M;c(M)&&(H=io(M)),f.push(_+F+"="+encodeURIComponent(H))})}catch(M){throw f.push(_+"type="+encodeURIComponent("_badmap")),M}}function sl(l){this.l=l.Ub||null,this.j=l.eb||!1}T(sl,so),sl.prototype.g=function(){return new ol(this.l,this.j)},sl.prototype.i=function(l){return function(){return l}}({});function ol(l,f){Ze.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ol,Ze),t=ol.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,go(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,go(this)),this.g&&(this.readyState=3,go(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Km(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Km(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?mo(this):go(this),this.readyState==3&&Km(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,mo(this))},t.Qa=function(l){this.g&&(this.response=l,mo(this))},t.ga=function(){this.g&&mo(this)};function mo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,go(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=f.next();return l.join(`\r
`)};function go(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Gm(l){let f="";return B(l,function(p,_){f+=_,f+=":",f+=p,f+=`\r
`}),f}function Gc(l,f,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Gm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):be(l,f,p))}function $e(l){Ze.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T($e,Ze);var MA=/^https?$/i,LA=["POST","PUT"];t=$e.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Z.g(),this.v=this.o?gr(this.o):gr(Z),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(F){Qm(this,F);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)p.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const F of _.keys())p.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LA,f,void 0))||_||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of p)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jm(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Qm(this,F)}};function Qm(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Xm(l),al(l)}function Xm(l){l.A||(l.A=!0,st(l,"complete"),st(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,st(this,"complete"),st(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ym(this):this.bb())},t.bb=function(){Ym(this)};function Ym(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Gn(l)!=4||l.Z()!=2)){if(l.u&&Gn(l)==4)to(l.Ea,0,l);else if(st(l,"readystatechange"),Gn(l)==4){l.h=!1;try{const H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var _;if(_=H===0){var M=String(l.D).match(Um)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),_=!MA.test(M?M.toLowerCase():"")}p=_}if(p)st(l,"complete"),st(l,"success");else{l.m=6;try{var F=2<Gn(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Xm(l)}}finally{al(l)}}}}function al(l,f){if(l.g){Jm(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||st(l,"ready");try{p.onreadystatechange=_}catch{}}}function Jm(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Gn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Kc(f)}};function Zm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function OA(l){const f={};l=(l.g&&2<=Gn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(g(l[_]))continue;var p=V(l[_]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=f[M]||[];f[M]=F,F.push(p)}A(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(l,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||f}function eg(l){this.Aa=0,this.i=[],this.j=new x,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yo("baseRetryDelayMs",5e3,l),this.cb=yo("retryDelaySeedMs",1e4,l),this.Wa=yo("forwardChannelMaxRetries",2,l),this.wa=yo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new el(l&&l.concurrentRequestLimit),this.Da=new DA,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eg.prototype,t.la=8,t.G=1,t.connect=function(l,f,p,_){ut(0),this.W=l,this.H=f||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=ug(this,null,this.W),ul(this)};function Qc(l){if(tg(l),l.G==3){var f=l.U++,p=Kn(l.I);if(be(p,"SID",l.K),be(p,"RID",f),be(p,"TYPE","terminate"),vo(l,p),f=new Re(l,l.j,f),f.L=2,f.v=il(Kn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=cg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ue(f)}lg(l)}function ll(l){l.g&&(Yc(l),l.g.cancel(),l.g=null)}function tg(l){ll(l),l.u&&(a.clearTimeout(l.u),l.u=null),cl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ul(l){if(!tl(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ce||te(),q||(Ce(),q=!0),ne.add(f,l),l.B=0}}function FA(l,f){return G(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=I(m(l.Ga,l,f),ag(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Re(this,this.j,l);let F=this.o;if(this.S&&(F?(F=v(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=rg(this,M,f),p=Kn(this.I),be(p,"RID",l),be(p,"CVER",22),this.D&&be(p,"X-HTTP-Session-Id",this.D),vo(this,p),F&&(this.O?f="headers="+encodeURIComponent(String(Gm(F)))+"&"+f:this.m&&Gc(p,this.m,F)),Vn(this.h,M),this.Ua&&be(p,"TYPE","init"),this.P?(be(p,"$req",f),be(p,"SID","null"),M.T=!0,Qt(M,p,null)):Qt(M,p,f),this.G=2}}else this.G==3&&(l?ng(this,l):this.i.length==0||tl(this.h)||ng(this))};function ng(l,f){var p;f?p=f.l:p=l.U++;const _=Kn(l.I);be(_,"SID",l.K),be(_,"RID",p),be(_,"AID",l.T),vo(l,_),l.m&&l.o&&Gc(_,l.m,l.o),p=new Re(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),f&&(l.i=f.D.concat(l.i)),f=rg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Vn(l.h,p),Qt(p,_,f)}function vo(l,f){l.H&&B(l.H,function(p,_){be(f,_,p)}),l.l&&jm({},function(p,_){be(f,_,p)})}function rg(l,f,p){p=Math.min(l.i.length,p);var _=l.l?m(l.l.Na,l.l,l):null;e:{var M=l.i;let F=-1;for(;;){const H=["count="+p];F==-1?0<p?(F=M[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let xe=!0;for(let ct=0;ct<p;ct++){let ye=M[ct].g;const wt=M[ct].map;if(ye-=F,0>ye)F=Math.max(0,M[ct].g-100),xe=!1;else try{NA(wt,H,"req"+ye+"_")}catch{_&&_(wt)}}if(xe){_=H.join("&");break e}}}return l=l.i.splice(0,p),f.D=l,_}function ig(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ce||te(),q||(Ce(),q=!0),ne.add(f,l),l.v=0}}function Xc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=I(m(l.Fa,l),ag(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,sg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=I(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),ll(this),sg(this))};function Yc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function sg(l){l.g=new Re(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Kn(l.qa);be(f,"RID","rpc"),be(f,"SID",l.K),be(f,"AID",l.T),be(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&be(f,"TO",l.ja),be(f,"TYPE","xmlhttp"),vo(l,f),l.m&&l.o&&Gc(f,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=il(Kn(f)),p.m=null,p.P=!0,_n(p,l)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),Xc(this),ut(19))};function cl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function og(l,f){var p=null;if(l.g==f){cl(l),Yc(l),l.g=null;var _=2}else if(Xt(l.h,f))p=f.D,co(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;_=$i(),st(_,new qi(_,p)),ul(l)}else ig(l);else if(M=f.s,M==3||M==0&&0<f.X||!(_==1&&FA(l,f)||_==2&&Xc(l)))switch(p&&0<p.length&&(f=l.h,f.i=f.i.concat(p)),M){case 1:di(l,5);break;case 4:di(l,10);break;case 3:di(l,6);break;default:di(l,2)}}}function ag(l,f){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*f}function di(l,f){if(l.j.info("Error code "+f),f==2){var p=m(l.fb,l),_=l.Xa;const M=!_;_=new fi(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nl(_,"https"),il(_),M?bA(_.toString(),p):VA(_.toString(),p)}else ut(2);l.G=0,l.l&&l.l.sa(f),lg(l),tg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function lg(l){if(l.G=0,l.ka=[],l.l){const f=Bm(l.h);(f.length!=0||l.i.length!=0)&&(R(l.ka,f),R(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function ug(l,f,p){var _=p instanceof fi?Kn(p):new fi(p);if(_.g!="")f&&(_.g=f+"."+_.g),rl(_,_.s);else{var M=a.location;_=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var F=new fi(null);_&&nl(F,_),f&&(F.g=f),M&&rl(F,M),p&&(F.l=p),_=F}return p=l.D,f=l.ya,p&&f&&be(_,p,f),be(_,"VER",l.la),vo(l,_),_}function cg(l,f,p){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new $e(new sl({eb:p})):new $e(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hg(){}t=hg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hl(){}hl.prototype.g=function(l,f){return new Yt(l,f)};function Yt(l,f){Ze.call(this),this.g=new eg(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!g(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!g(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Gi(this)}T(Yt,Ze),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Qc(this.g)},Yt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=io(l),l=p);f.i.push(new uo(f.Ya++,l)),f.G==3&&ul(f)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Qc(this.g),delete this.g,Yt.aa.N.call(this)};function fg(l){oo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const p in f){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}T(fg,oo);function dg(){ao.call(this),this.status=1}T(dg,ao);function Gi(l){this.g=l}T(Gi,hg),Gi.prototype.ua=function(){st(this.g,"a")},Gi.prototype.ta=function(l){st(this.g,new fg(l))},Gi.prototype.sa=function(l){st(this.g,new dg)},Gi.prototype.ra=function(){st(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,DE=function(){return new hl},VE=function(){return $i()},bE=qn,Gf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},re.NO_ERROR=0,re.TIMEOUT=8,re.HTTP_ERROR=6,Zl=re,Ae.COMPLETE="complete",kE=Ae,Ya.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Vo=Ya,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,RE=$e}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const $y="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new TE("@firebase/firestore");function Yi(){return Mi.logLevel}function Q(t,...e){if(Mi.logLevel<=pe.DEBUG){const n=e.map(Pp);Mi.debug(`Firestore (${Gs}): ${t}`,...n)}}function hr(t,...e){if(Mi.logLevel<=pe.ERROR){const n=e.map(Pp);Mi.error(`Firestore (${Gs}): ${t}`,...n)}}function Ds(t,...e){if(Mi.logLevel<=pe.WARN){const n=e.map(Pp);Mi.warn(`Firestore (${Gs}): ${t}`,...n)}}function Pp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+t;throw hr(e),new Error(e)}function _e(t,e){t||se()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class Ux{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zx{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new It(e)}}class Wx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class $x{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Wx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new qx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Kx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function Ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new nt(0,0))}static max(){return new ae(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class De extends wa{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new De(n)}static emptyPath(){return new De([])}}const Gx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends wa{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return Gx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(De.fromString(e))}static fromName(e){return new ee(De.fromString(e).popFirst(5))}static empty(){return new ee(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new De(e.slice()))}}function Qx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Hr(i,ee.empty(),e)}function Xx(t){return new Hr(t.readTime,t.key,-1)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(ae.min(),ee.empty(),-1)}static max(){return new Hr(ae.max(),ee.empty(),-1)}}function Yx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==Jx)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function eR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yc.oe=-1;function vc(t){return t==null}function Lu(t){return t===0&&1/t==-1/0}function tR(t){return typeof t=="number"&&Number.isInteger(t)&&!Lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qy(e)),e=rR(t.get(n),e);return qy(e)}function rR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qy(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bl(this.root,e,this.comparator,!0)}}class bl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dt.RED,this.left=i??dt.EMPTY,this.right=s??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ky(this.data.getIterator())}getIteratorFrom(e){return new Ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new en([])}unionWith(e){let n=new rt(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new OE("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const iR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(_e(!!t),typeof t=="string"){let e=0;const n=iR.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gr(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _c(t){const e=t.mapValue.fields.__previous_value__;return Ip(e)?_c(e):e}function Ea(t){const e=Kr(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Ta{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ip(t)?4:aR(t)?9007199254740991:oR(t)?10:11:se()}function zn(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ea(t).isEqual(Ea(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Kr(i.timestampValue),a=Kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Gr(i.bytesValue).isEqual(Gr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?Lu(o)===Lu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Hy(o)!==Hy(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!zn(o[u],a[u])))return!1;return!0}(t,e);default:return se()}}function Aa(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function Ms(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),u=Ke(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Gy(t.timestampValue,e.timestampValue);case 4:return Gy(Ea(t),Ea(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Gr(s),u=Gr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=fe(a[c],u[c]);if(h!==0)return h}return fe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=fe(Ke(s.latitude),Ke(o.latitude));return a!==0?a:fe(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qy(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const d=s.fields||{},m=o.fields||{},E=(a=d.value)===null||a===void 0?void 0:a.arrayValue,T=(u=m.value)===null||u===void 0?void 0:u.arrayValue,C=fe(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:Qy(E,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Vl.mapValue&&o===Vl.mapValue)return 0;if(s===Vl.mapValue)return 1;if(o===Vl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const m=fe(u[d],h[d]);if(m!==0)return m;const E=Ms(a[u[d]],c[h[d]]);if(E!==0)return E}return fe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw se()}}function Gy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Kr(t),r=Kr(e),i=fe(n.seconds,r.seconds);return i!==0?i:fe(n.nanos,r.nanos)}function Qy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ms(n[i],r[i]);if(s)return s}return fe(n.length,r.length)}function Ls(t){return Qf(t)}function Qf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Qf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Qf(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function eu(t){switch(Qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_c(t);return e?16+eu(e):16;case 5:return 2*t.stringValue.length;case 6:return Gr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+eu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ii(r.fields,(s,o)=>{i+=s.length+eu(o)}),i}(t.mapValue);default:throw se()}}function Xy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xf(t){return!!t&&"integerValue"in t}function Cp(t){return!!t&&"arrayValue"in t}function Yy(t){return!!t&&"nullValue"in t}function Jy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tu(t){return!!t&&"mapValue"in t}function oR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ho(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ho(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ho(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ho(n)}setAll(e){let n=pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ho(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ii(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jt(Ho(this.value))}}function FE(t){const e=[];return ii(t.fields,(n,r)=>{const i=new pt([n]);if(tu(r)){const s=FE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xt(e,0,ae.min(),ae.min(),ae.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new xt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new xt(e,2,n,ae.min(),ae.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ae.min(),ae.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.position=e,this.inclusive=n}}function Zy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Ms(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function lR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{}class Ye extends BE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cR(e,n,r):n==="array-contains"?new dR(e,r):n==="in"?new pR(e,r):n==="not-in"?new mR(e,r):n==="array-contains-any"?new gR(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hR(e,r):new fR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ms(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(Ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rn extends BE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Rn(e,n)}matches(e){return jE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jE(t){return t.op==="and"}function UE(t){return uR(t)&&jE(t)}function uR(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function Yf(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Ls(t.value);if(UE(t))return t.filters.map(e=>Yf(e)).join(",");{const e=t.filters.map(n=>Yf(n)).join(",");return`${t.op}(${e})`}}function zE(t,e){return t instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof Rn?function(r,i){return i instanceof Rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&zE(o,i.filters[a]),!0):!1}(t,e):void se()}function WE(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Ls(n.value)}`}(t):t instanceof Rn?function(n){return n.op.toString()+" {"+n.getFilters().map(WE).join(" ,")+"}"}(t):"Filter"}class cR extends Ye{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class hR extends Ye{constructor(e,n){super(e,"in",n),this.keys=$E("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fR extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=$E("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $E(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class dR extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cp(n)&&Aa(n.arrayValue,this.value)}}class pR extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class mR extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Aa(this.value.arrayValue,n)}}class gR extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function tv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new yR(t,e,n,r,i,s,o)}function xp(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ls(r)).join(",")),e.ue=n}return e.ue}function Rp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ev(t.startAt,e.startAt)&&ev(t.endAt,e.endAt)}function Jf(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vR(t,e,n,r,i,s,o,a){return new Oa(t,e,n,r,i,s,o,a)}function qE(t){return new Oa(t)}function nv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HE(t){return t.collectionGroup!==null}function Ko(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(pt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fu(s,r))}),n.has(pt.keyField().canonicalString())||e.ce.push(new Fu(pt.keyField(),r))}return e.ce}function Fn(t){const e=le(t);return e.le||(e.le=_R(e,Ko(t))),e.le}function _R(t,e){if(t.limitType==="F")return tv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Fu(i.field,s)});const n=t.endAt?new Ou(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ou(t.startAt.position,t.startAt.inclusive):null;return tv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zf(t,e){const n=t.filters.concat([e]);return new Oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ed(t,e,n){return new Oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wc(t,e){return Rp(Fn(t),Fn(e))&&t.limitType===e.limitType}function KE(t){return`${xp(Fn(t))}|lt:${t.limitType}`}function Ji(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WE(i)).join(", ")}]`),vc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ls(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ls(i)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function Ec(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ko(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=Zy(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Ko(r),i)||r.endAt&&!function(o,a,u){const c=Zy(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Ko(r),i))}(t,e)}function wR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GE(t){return(e,n)=>{let r=!1;for(const i of Ko(t)){const s=ER(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ER(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Ms(u,c):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return LE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new We(ee.comparator);function fr(){return TR}const QE=new We(ee.comparator);function Do(...t){let e=QE;for(const n of t)e=e.insert(n.key,n);return e}function XE(t){let e=QE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ai(){return Go()}function YE(){return Go()}function Go(){return new Bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const AR=new We(ee.comparator),SR=new rt(ee.comparator);function he(...t){let e=SR;for(const n of t)e=e.add(n);return e}const PR=new rt(fe);function IR(){return PR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(e)?"-0":e}}function JE(t){return{integerValue:""+t}}function CR(t,e){return tR(e)?JE(e):kp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this._=void 0}}function xR(t,e,n){return t instanceof Bu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ip(s)&&(s=_c(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Sa?eT(t,e):t instanceof Pa?tT(t,e):function(i,s){const o=ZE(i,s),a=rv(o)+rv(i.Pe);return Xf(o)&&Xf(i.Pe)?JE(a):kp(i.serializer,a)}(t,e)}function RR(t,e,n){return t instanceof Sa?eT(t,e):t instanceof Pa?tT(t,e):n}function ZE(t,e){return t instanceof ju?function(r){return Xf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Bu extends Tc{}class Sa extends Tc{constructor(e){super(),this.elements=e}}function eT(t,e){const n=nT(e);for(const r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pa extends Tc{constructor(e){super(),this.elements=e}}function tT(t,e){let n=nT(e);for(const r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}class ju extends Tc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rv(t){return Ke(t.integerValue||t.doubleValue)}function nT(t){return Cp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Sa&&i instanceof Sa||r instanceof Pa&&i instanceof Pa?Ns(r.elements,i.elements,zn):r instanceof ju&&i instanceof ju?zn(r.Pe,i.Pe):r instanceof Bu&&i instanceof Bu}(t.transform,e.transform)}class bR{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ac{}function rT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sT(t.key,Cn.none()):new Fa(t.key,t.data,Cn.none());{const n=t.data,r=jt.empty();let i=new rt(pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new si(t.key,r,new en(i.toArray()),Cn.none())}}function VR(t,e,n){t instanceof Fa?function(i,s,o){const a=i.value.clone(),u=sv(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof si?function(i,s,o){if(!nu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(iT(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Qo(t,e,n,r){return t instanceof Fa?function(s,o,a,u){if(!nu(s.precondition,o))return a;const c=s.value.clone(),h=ov(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof si?function(s,o,a,u){if(!nu(s.precondition,o))return a;const c=ov(s.fieldTransforms,u,o),h=o.data;return h.setAll(iT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return nu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function DR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ZE(r.transform,i||null);s!=null&&(n===null&&(n=jt.empty()),n.set(r.field,s))}return n||null}function iv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(s,o)=>kR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fa extends Ac{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class si extends Ac{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sv(t,e,n){const r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,RR(o,a,n[i]))}return r}function ov(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,xR(s,o,e))}return r}class sT extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NR extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&VR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=rT(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>iv(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>iv(n,r))}}class bp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return AR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new bp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,de;function FR(t){switch(t){default:return se();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function oT(t){if(t===void 0)return hr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Qe.OK:return U.OK;case Qe.CANCELLED:return U.CANCELLED;case Qe.UNKNOWN:return U.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return U.INTERNAL;case Qe.UNAVAILABLE:return U.UNAVAILABLE;case Qe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Qe.NOT_FOUND:return U.NOT_FOUND;case Qe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Qe.ABORTED:return U.ABORTED;case Qe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Qe.DATA_LOSS:return U.DATA_LOSS;default:return se()}}(de=Qe||(Qe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new xi([4294967295,4294967295],0);function av(t){const e=BR().encode(t),n=new xE;return n.update(e),new Uint8Array(n.digest())}function lv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xi([n,r],0),new xi([i,s],0)]}class Vp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new No(`Invalid padding: ${n}`);if(r<0)throw new No(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new No(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new No(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=xi.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(xi.fromNumber(r)));return i.compare(jR)===1&&(i=new xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=av(e),[r,i]=lv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Vp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=av(e),[r,i]=lv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class No extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ba.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sc(ae.min(),i,new We(fe),fr(),he())}}class Ba{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ba(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class aT{constructor(e,n){this.targetId=e,this.me=n}}class lT{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uv{constructor(){this.fe=0,this.ge=cv(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new Ba(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=cv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UR{constructor(e){this.Le=e,this.Be=new Map,this.ke=fr(),this.qe=Dl(),this.Qe=Dl(),this.Ke=new We(fe)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Jf(s))if(r===0){const o=new ee(s.path);this.We(n,o,xt.newNoDocument(o,ae.min()))}else _e(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;if(u!==0){this.He(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Gr(r).toUint8Array()}catch(u){if(u instanceof OE)return Ds("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Vp(o,i,s)}catch(u){return Ds(u instanceof No?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Jf(a.target)){const u=new ee(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,xt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Sc(e,n,this.Ke,this.ke,r);return this.ke=fr(),this.qe=Dl(),this.Qe=Dl(),this.Ke=new We(fe),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new uv,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new rt(fe),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(fe),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new uv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Dl(){return new We(ee.comparator)}function cv(){return new We(ee.comparator)}const zR={asc:"ASCENDING",desc:"DESCENDING"},WR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$R={and:"AND",or:"OR"};class qR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function td(t,e){return t.useProto3Json||vc(e)?e:{value:e}}function Uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HR(t,e){return Uu(t,e.toTimestamp())}function Bn(t){return _e(!!t),ae.fromTimestamp(function(n){const r=Kr(n);return new nt(r.seconds,r.nanos)}(t))}function Dp(t,e){return nd(t,e).canonicalString()}function nd(t,e){const n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cT(t){const e=De.fromString(t);return _e(mT(e)),e}function rd(t,e){return Dp(t.databaseId,e.path)}function kh(t,e){const n=cT(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(fT(n))}function hT(t,e){return Dp(t.databaseId,e)}function KR(t){const e=cT(t);return e.length===4?De.emptyPath():fT(e)}function id(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fT(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hv(t,e,n){return{name:rd(t,e),fields:n.value.mapValue.fields}}function GR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(_e(h===void 0||typeof h=="string"),yt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),yt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:oT(c.code);return new Y(h,c.message||"")}(o);n=new lT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kh(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):ae.min(),a=new jt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ru(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kh(t,r.document),s=r.readTime?Bn(r.readTime):ae.min(),o=xt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kh(t,r.document),s=r.removedTargetIds||[];n=new ru([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new OR(i,s),a=r.targetId;n=new aT(a,o)}}return n}function QR(t,e){let n;if(e instanceof Fa)n={update:hv(t,e.key,e.value)};else if(e instanceof sT)n={delete:rd(t,e.key)};else if(e instanceof si)n={update:hv(t,e.key,e.data),updateMask:ik(e.fieldMask)};else{if(!(e instanceof NR))return se();n={verify:rd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ju)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function XR(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(ae.min())&&(o=Bn(s)),new bR(o,i.transformResults||[])}(n,e))):[]}function YR(t,e){return{documents:[hT(t,e.path)]}}function JR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hT(t,i);const s=function(c){if(c.length!==0)return pT(Rn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Zi(m.field),direction:tk(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=td(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function ZR(t){let e=KR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const m=dT(d);return m instanceof Rn&&UE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(T){return new Fu(es(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,vc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(d){const m=!!d.before,E=d.values||[];return new Ou(E,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,E=d.values||[];return new Ou(E,m)}(n.endAt)),vR(e,i,o,s,a,"F",u,c)}function ek(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=es(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=es(n.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=es(n.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=es(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(es(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rn.create(n.compositeFilter.filters.map(r=>dT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function tk(t){return zR[t]}function nk(t){return WR[t]}function rk(t){return $R[t]}function Zi(t){return{fieldPath:t.canonicalString()}}function es(t){return pt.fromServerFormat(t.fieldPath)}function pT(t){return t instanceof Ye?function(n){if(n.op==="=="){if(Jy(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NAN"}};if(Yy(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jy(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NOT_NAN"}};if(Yy(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zi(n.field),op:nk(n.op),value:n.value}}}(t):t instanceof Rn?function(n){const r=n.getFilters().map(i=>pT(i));return r.length===1?r[0]:{compositeFilter:{op:rk(n.op),filters:r}}}(t):se()}function ik(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.ht=e}}function ok(t){const e=ZR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.ln=new lk}addToCollectionParentIndex(e,n){return this.ln.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Hr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class lk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(De.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(41943040,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Os(0)}static Qn(){return new Os(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv([t,e],[n,r]){const i=fe(t,n);return i===0?fe(e,r):i}class uk{constructor(e){this.Gn=e,this.buffer=new rt(dv),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ck{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xs(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Qs(n)}await this.Yn(3e5)})}}class hk{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(yc.oe);const r=new uk(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Yi()<=pe.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function fk(t,e){return new hk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qo(r.mutation,i,en.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=Ai();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Do();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fr();const o=Go(),a=function(){return Go()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof si)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Qo(h.mutation,c,h.mutation.getFieldMask(),nt.now())):o.set(c.key,en.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new pk(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Go();let i=new We((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||en.empty();h=a.applyToLocalView(c,h),r.set(u,h);const d=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=YE();h.forEach(m=>{if(!s.has(m)){const E=rT(n.get(m),r.get(m));E!==null&&d.set(m,E),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Ai());let a=-1,u=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,he())).next(h=>({batchId:a,changes:XE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=Do();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Do();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,u=>{const c=function(d,m){return new Oa(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,xt.newInvalidDocument(h)))});let a=Do();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Qo(h.mutation,c,en.empty(),nt.now()),Ec(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return j.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:ok(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.overlays=new We(ee.comparator),this.Er=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ai();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Ai(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ai(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ai(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LR(n,r));let s=this.Er.get(n);s===void 0&&(s=he(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.dr=new rt(ot.Ar),this.Rr=new rt(ot.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new ot(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new ee(new De([])),r=new ot(n,e),i=new ot(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ee(new De([])),r=new ot(n,e),i=new ot(n,e+1);let s=he();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ot(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ee.comparator(e.key,n.key)||fe(e.br,n.br)}static Vr(e,n){return fe(e.br,n.br)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new rt(ot.Ar)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),i=new ot(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(fe);return n.forEach(i=>{const s=new ot(i,0),o=new ot(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),j.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new ot(new ee(s),0);let a=new rt(fe);return this.vr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.br)),!0)},o),j.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return j.forEach(n.mutations,i=>{const s=new ot(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new ot(n,0),i=this.vr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.Nr=e,this.docs=function(){return new We(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fr();const o=n.path,a=new ee(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Yx(Xx(h),r)<=0||(i.has(h.key)||Ec(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Lr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ek(this)}getSize(e){return j.resolve(this.size)}}class Ek extends dk{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.persistence=e,this.Br=new Bi(n=>xp(n),Rp),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new Np,this.targetCount=0,this.Qr=Os.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),j.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Os(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Un(n),j.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.Kr={},this.overlays={},this.$r=new yc(0),this.Ur=!1,this.Ur=!0,this.Wr=new vk,this.referenceDelegate=e(this),this.Gr=new Tk(this),this.indexManager=new ak,this.remoteDocumentCache=function(i){return new wk(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new sk(n),this.jr=new gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new _k(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new Ak(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return j.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class Ak extends Zx{constructor(e){super(),this.currentSequenceNumber=e}}class Mp{constructor(e){this.persistence=e,this.Zr=new Np,this.Xr=null}static ei(e){return new Mp(e)}get ti(){if(this.Xr)return this.Xr;throw se()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),j.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ti,r=>{const i=ee.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return j.or([()=>j.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class zu{constructor(e,n){this.persistence=e,this.ri=new Bi(r=>nR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=fk(this,n)}static ei(e,n){return new zu(e,n)}Hr(){}Jr(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return j.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?j.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eu(e.data.value)),n}ir(e,n,r){return j.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return SC()?8:eR(TC())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Sk;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Yi()<=pe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),j.resolve()):(Yi()<=pe.DEBUG&&Q("QueryEngine","Query:",Ji(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Yi()<=pe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):j.resolve())}Xi(e,n){if(nv(n))return j.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ed(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.rs(n,a);return this.ss(n,c,o,u.readTime)?this.Xi(e,ed(n,null,"F")):this.os(e,c,n,u)}))})))}es(e,n,r,i){return nv(n)||i.isEqual(ae.min())?j.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?j.resolve(null):(Yi()<=pe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ji(n)),this.os(e,o,n,Qx(i,-1)).next(a=>a))})}rs(e,n){let r=new rt(GE(e));return n.forEach((i,s)=>{Ec(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return Yi()<=pe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ji(n)),this.Zi.getDocumentsMatchingQuery(e,n,Hr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new We(fe),this.cs=new Bi(s=>xp(s),Rp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function Ck(t,e,n,r){return new Ik(t,e,n,r)}async function yT(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=he();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function xk(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,m=d.keys();let E=j.resolve();return m.forEach(T=>{E=E.next(()=>h.getEntry(u,T)).next(C=>{const R=c.docVersions.get(T);_e(R!==null),C.version.compareTo(R)<0&&(d.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),h.addEntry(C)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vT(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function Rk(t,e){const n=le(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((h,d)=>{const m=i.get(d);if(!m)return;a.push(n.Gr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Gr.addMatchingKeys(s,h.addedDocuments,d)));let E=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?E=E.withResumeToken(yt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(d,E),function(C,R,w){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,E,h)&&a.push(n.Gr.updateTargetData(s,E))});let u=fr(),c=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(kk(s,o,e.documentUpdates).next(h=>{u=h.Is,c=h.Es})),!r.isEqual(ae.min())){const h=n.Gr.getLastRemoteSnapshotVersion(s).next(d=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.us=i,s))}function kk(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Is:o,Es:i}})}function bk(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vk(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function sd(t,e,n){const r=le(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Xs(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function pv(t,e,n){const r=le(t);let i=ae.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=le(u),m=d.cs.get(h);return m!==void 0?j.resolve(d.us.get(m)):d.Gr.getTargetData(c,h)}(r,o,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:he())).next(a=>(Dk(r,wR(e),a),{documents:a,ds:s})))}function Dk(t,e,n){let r=t.ls.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class mv{constructor(){this.activeTargetIds=IR()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nk{constructor(){this._o=new mv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new mv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl=null;function bh(){return Nl===null?Nl=function(){return 268435456+Math.round(2147483648*Math.random())}():Nl++,"0x"+Nl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class Fk extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=bh(),u=this.No(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,u,c,i).then(h=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ds("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Lk[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=bh();return new Promise((o,a)=>{const u=new RE;u.setWithCredentials(!0),u.listenOnce(kE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zl.NO_ERROR:const h=u.getResponseJson();Q(St,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Zl.TIMEOUT:Q(St,`RPC '${e}' ${s} timed out`),a(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case Zl.HTTP_ERROR:const d=u.getStatus();if(Q(St,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const T=function(R){const w=R.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(E.status);a(new Y(T,E.message))}else a(new Y(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Y(U.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{Q(St,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(St,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}qo(e,n,r){const i=bh(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DE(),a=VE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Q(St,`Creating RPC '${e}' stream ${i}: ${h}`,u);const d=o.createWebChannel(h,u);let m=!1,E=!1;const T=new Ok({Eo:R=>{E?Q(St,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(Q(St,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),Q(St,`RPC '${e}' stream ${i} sending:`,R),d.send(R))},Ao:()=>d.close()}),C=(R,w,g)=>{R.listen(w,y=>{try{g(y)}catch(b){setTimeout(()=>{throw b},0)}})};return C(d,Vo.EventType.OPEN,()=>{E||(Q(St,`RPC '${e}' stream ${i} transport opened.`),T.So())}),C(d,Vo.EventType.CLOSE,()=>{E||(E=!0,Q(St,`RPC '${e}' stream ${i} transport closed`),T.Do())}),C(d,Vo.EventType.ERROR,R=>{E||(E=!0,Ds(St,`RPC '${e}' stream ${i} transport errored:`,R),T.Do(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),C(d,Vo.EventType.MESSAGE,R=>{var w;if(!E){const g=R.data[0];_e(!!g);const y=g,b=(y==null?void 0:y.error)||((w=y[0])===null||w===void 0?void 0:w.error);if(b){Q(St,`RPC '${e}' stream ${i} received error:`,b);const L=b.status;let B=function(S){const P=Qe[S];if(P!==void 0)return oT(P)}(L),A=b.message;B===void 0&&(B=U.INTERNAL,A="Unknown error status: "+L+" with message "+b.message),E=!0,T.Do(new Y(B,A)),d.close()}else Q(St,`RPC '${e}' stream ${i} received:`,g),T.vo(g)}}),C(a,bE.STAT_EVENT,R=>{R.stat===Gf.PROXY?Q(St,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Gf.NOPROXY&&Q(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.bo()},0),T}}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){return new qR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,i,s,o,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new _T(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bk extends wT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=GR(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Bn(o.readTime):ae.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=id(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Jf(u)?{documents:YR(s,u)}:{query:JR(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uT(s,o.resumeToken);const c=td(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Uu(s,o.snapshotVersion.toTimestamp());const c=td(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ek(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=id(this.serializer),n.removeTarget=e,this.c_(n)}}class jk extends wT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=XR(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=id(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>QR(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,nd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(U.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,nd(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class zk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(hr(n),this.C_=!1):Q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{ji(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=le(u);c.k_.add(4),await ja(c),c.K_.set("Unknown"),c.k_.delete(4),await Ic(c)}(this))})}),this.K_=new zk(r,i)}}async function Ic(t){if(ji(t))for(const e of t.q_)await e(!0)}async function ja(t){for(const e of t.q_)await e(!1)}function ET(t,e){const n=le(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),jp(n)?Bp(n):Ys(n).s_()&&Fp(n,e))}function Op(t,e){const n=le(t),r=Ys(n);n.B_.delete(e),r.s_()&&TT(n,e),n.B_.size===0&&(r.s_()?r.a_():ji(n)&&n.K_.set("Unknown"))}function Fp(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).V_(e)}function TT(t,e){t.U_.xe(e),Ys(t).m_(e)}function Bp(t){t.U_=new UR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.K_.F_()}function jp(t){return ji(t)&&!Ys(t).i_()&&t.B_.size>0}function ji(t){return le(t).k_.size===0}function AT(t){t.U_=void 0}async function $k(t){t.K_.set("Online")}async function qk(t){t.B_.forEach((e,n)=>{Fp(t,e)})}async function Hk(t,e){AT(t),jp(t)?(t.K_.O_(e),Bp(t)):t.K_.set("Unknown")}async function Kk(t,e,n){if(t.K_.set("Online"),e instanceof lT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wu(t,r)}else if(e instanceof ru?t.U_.$e(e):e instanceof aT?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ae.min()))try{const r=await vT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.B_.get(c);h&&s.B_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.B_.get(u);if(!h)return;s.B_.set(u,h.withResumeToken(yt.EMPTY_BYTE_STRING,h.snapshotVersion)),TT(s,u);const d=new br(h.target,u,c,h.sequenceNumber);Fp(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Wu(t,r)}}async function Wu(t,e,n){if(!Xs(e))throw e;t.k_.add(1),await ja(t),t.K_.set("Offline"),n||(n=()=>vT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Ic(t)})}function ST(t,e){return e().catch(n=>Wu(t,n,e))}async function Cc(t){const e=le(t),n=Xr(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;Gk(e);)try{const i=await bk(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,Qk(e,i)}catch(i){await Wu(e,i)}PT(e)&&IT(e)}function Gk(t){return ji(t)&&t.L_.length<10}function Qk(t,e){t.L_.push(e);const n=Xr(t);n.s_()&&n.f_&&n.g_(e.mutations)}function PT(t){return ji(t)&&!Xr(t).i_()&&t.L_.length>0}function IT(t){Xr(t).start()}async function Xk(t){Xr(t).w_()}async function Yk(t){const e=Xr(t);for(const n of t.L_)e.g_(n.mutations)}async function Jk(t,e,n){const r=t.L_.shift(),i=bp.from(r,e,n);await ST(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cc(t)}async function Zk(t,e){e&&Xr(t).f_&&await async function(r,i){if(function(o){return FR(o)&&o!==U.ABORTED}(i.code)){const s=r.L_.shift();Xr(r).__(),await ST(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cc(r)}}(t,e),PT(t)&&IT(t)}async function yv(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=ji(n);n.k_.add(3),await ja(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Ic(n)}async function eb(t,e){const n=le(t);e?(n.k_.delete(2),await Ic(n)):e||(n.k_.add(2),await ja(n),n.K_.set("Unknown"))}function Ys(t){return t.W_||(t.W_=function(n,r,i){const s=le(n);return s.b_(),new Bk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:$k.bind(null,t),mo:qk.bind(null,t),po:Hk.bind(null,t),R_:Kk.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),jp(t)?Bp(t):t.K_.set("Unknown")):(await t.W_.stop(),AT(t))})),t.W_}function Xr(t){return t.G_||(t.G_=function(n,r,i){const s=le(n);return s.b_(),new jk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:Xk.bind(null,t),po:Zk.bind(null,t),p_:Yk.bind(null,t),y_:Jk.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Cc(t)):(await t.G_.stop(),t.L_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Up(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Xs(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{static emptySet(e){return new Ps(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Do(),this.sortedSet=new We(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.z_=new We(ee.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):se():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fs{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fs(e,n,Ps.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class nb{constructor(){this.queries=_v(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=le(n),s=i.queries;i.queries=_v(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function _v(){return new Bi(t=>KE(t),wc)}async function rb(t,e){const n=le(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new tb,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=zp(o,`Initialization of query '${Ji(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&Wp(n)}async function ib(t,e){const n=le(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sb(t,e){const n=le(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&Wp(n)}function ob(t,e,n){const r=le(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function Wp(t){t.X_.forEach(e=>{e.next()})}var od,wv;(wv=od||(od={})).na="default",wv.Cache="cache";class ab{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.key=e}}class xT{constructor(e){this.key=e}}class lb{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=he(),this.mutatedKeys=he(),this.Va=GE(e),this.ma=new Ps(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new vv,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const m=i.get(h),E=Ec(this.query,d)?d:null,T=!!m&&this.mutatedKeys.has(m.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;m&&E?m.data.isEqual(E.data)?T!==C&&(r.track({type:3,doc:E}),R=!0):this.ya(m,E)||(r.track({type:2,doc:E}),R=!0,(u&&this.Va(E,u)>0||c&&this.Va(E,c)<0)&&(a=!0)):!m&&E?(r.track({type:0,doc:E}),R=!0):m&&!E&&(r.track({type:1,doc:m}),R=!0,(u||c)&&(a=!0)),R&&(E?(o=o.add(E),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,d)=>function(E,T){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return C(E)-C(T)}(h.type,d.type)||this.Va(h.doc,d.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,c=u!==this.Aa;return this.Aa=u,o.length!==0||c?{snapshot:new Fs(this.query,e.ma,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new vv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=he(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new xT(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new CT(r))}),n}va(e){this.da=e.ds,this.Ra=he();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Fs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ub{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cb{constructor(e){this.key=e,this.Fa=!1}}class hb{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Bi(a=>KE(a),wc),this.Oa=new Map,this.Na=new Set,this.La=new We(ee.comparator),this.Ba=new Map,this.ka=new Np,this.qa={},this.Qa=new Map,this.Ka=Os.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function fb(t,e,n=!0){const r=NT(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await RT(r,e,n,!0),i}async function db(t,e){const n=NT(t);await RT(n,e,!0,!1)}async function RT(t,e,n,r){const i=await Vk(t.localStore,Fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await pb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ET(t.remoteStore,i),a}async function pb(t,e,n,r,i){t.Ua=(d,m,E)=>async function(C,R,w,g){let y=R.view.ga(w);y.ss&&(y=await pv(C.localStore,R.query,!1).then(({documents:A})=>R.view.ga(A,y)));const b=g&&g.targetChanges.get(R.targetId),L=g&&g.targetMismatches.get(R.targetId)!=null,B=R.view.applyChanges(y,C.isPrimaryClient,b,L);return Tv(C,R.targetId,B.ba),B.snapshot}(t,d,m,E);const s=await pv(t.localStore,e,!0),o=new lb(e,s.ds),a=o.ga(s.documents),u=Ba.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);Tv(t,n,c.ba);const h=new ub(e,n,o);return t.xa.set(e,h),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function mb(t,e,n){const r=le(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!wc(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Op(r.remoteStore,i.targetId),ad(r,i.targetId)}).catch(Qs)):(ad(r,i.targetId),await sd(r.localStore,i.targetId,!0))}async function gb(t,e){const n=le(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Op(n.remoteStore,r.targetId))}async function yb(t,e,n){const r=Sb(t);try{const i=await function(o,a){const u=le(o),c=nt.now(),h=a.reduce((E,T)=>E.add(T.key),he());let d,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=fr(),C=he();return u.hs.getEntries(E,h).next(R=>{T=R,T.forEach((w,g)=>{g.isValidDocument()||(C=C.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,T)).next(R=>{d=R;const w=[];for(const g of a){const y=DR(g,d.get(g.key).overlayedDocument);y!=null&&w.push(new si(g.key,y,FE(y.value.mapValue),Cn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,w,a)}).next(R=>{m=R;const w=R.applyToLocalDocumentSet(d,C);return u.documentOverlayCache.saveOverlays(E,R.batchId,w)})}).then(()=>({batchId:m.batchId,changes:XE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.qa[o.currentUser.toKey()];c||(c=new We(fe)),c=c.insert(a,u),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ua(r,i.changes),await Cc(r.remoteStore)}catch(i){const s=zp(i,"Failed to persist write");n.reject(s)}}async function kT(t,e){const n=le(t);try{const r=await Rk(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?_e(o.Fa):i.removedDocuments.size>0&&(_e(o.Fa),o.Fa=!1))}),await Ua(n,r,e)}catch(r){await Qs(r)}}function Ev(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=le(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const m of d.J_)m.ea(a)&&(c=!0)}),c&&Wp(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vb(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new We(ee.comparator);o=o.insert(s,xt.newNoDocument(s,ae.min()));const a=he().add(s),u=new Sc(ae.min(),new Map,new We(fe),o,a);await kT(r,u),r.La=r.La.remove(s),r.Ba.delete(e),$p(r)}else await sd(r.localStore,e,!1).then(()=>ad(r,e,n)).catch(Qs)}async function _b(t,e){const n=le(t),r=e.batch.batchId;try{const i=await xk(n.localStore,e);VT(n,r,null),bT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ua(n,i)}catch(i){await Qs(i)}}async function wb(t,e,n){const r=le(t);try{const i=await function(o,a){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(_e(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);VT(r,e,n),bT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ua(r,i)}catch(i){await Qs(i)}}function bT(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function VT(t,e,n){const r=le(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function ad(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||DT(t,r)})}function DT(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Op(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),$p(t))}function Tv(t,e,n){for(const r of n)r instanceof CT?(t.ka.addReference(r.key,e),Eb(t,r)):r instanceof xT?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||DT(t,r.key)):se()}function Eb(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.Na.add(r),$p(t))}function $p(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new ee(De.fromString(e)),r=t.Ka.next();t.Ba.set(r,new cb(n)),t.La=t.La.insert(n,r),ET(t.remoteStore,new br(Fn(qE(n.path)),r,"TargetPurposeLimboResolution",yc.oe))}}async function Ua(t,e,n){const r=le(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Lp.zi(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,c){const h=le(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,m=>j.forEach(m.Wi,E=>h.persistence.referenceDelegate.addReference(d,m.targetId,E)).next(()=>j.forEach(m.Gi,E=>h.persistence.referenceDelegate.removeReference(d,m.targetId,E)))))}catch(d){if(!Xs(d))throw d;Q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const E=h.us.get(m),T=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(T);h.us=h.us.insert(m,C)}}}(r.localStore,s))}async function Tb(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await yT(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Y(U.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ua(n,r.Ts)}}function Ab(t,e){const n=le(t),r=n.Ba.get(e);if(r&&r.Fa)return he().add(r.key);{let i=he();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function NT(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ab.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vb.bind(null,e),e.Ma.R_=sb.bind(null,e.eventManager),e.Ma.Wa=ob.bind(null,e.eventManager),e}function Sb(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_b.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wb.bind(null,e),e}class $u{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return Ck(this.persistence,new Pk,e.initialUser,this.serializer)}ja(e){return new gT(Mp.ei,this.serializer)}za(e){return new Nk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$u.provider={build:()=>new $u};class Pb extends $u{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){_e(this.persistence.referenceDelegate instanceof zu);const r=this.persistence.referenceDelegate.garbageCollector;return new ck(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new gT(r=>zu.ei(r,n),this.serializer)}}class ld{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ev(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tb.bind(null,this.syncEngine),await eb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nb}()}createDatastore(e){const n=Pc(e.databaseInfo.databaseId),r=function(s){return new Fk(s)}(e.databaseInfo);return function(s,o,a,u){return new Uk(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Wk(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ev(this.syncEngine,n,0),function(){return gv.p()?new gv:new Mk}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const d=new hb(i,s,o,a,u,c);return h&&(d.$a=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=le(i);Q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await ja(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ld.provider={build:()=>new ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=ME.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dh(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Av(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xb(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yv(e.remoteStore,i)),t._onlineComponents=e}async function xb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await Dh(t,new $u)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Dh(t,new Pb(void 0));return t._offlineComponents}async function MT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Av(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Av(t,new ld))),t._onlineComponents}function Rb(t){return MT(t).then(e=>e.syncEngine)}async function kb(t){const e=await MT(t),n=e.eventManager;return n.onListen=fb.bind(null,e.syncEngine),n.onUnlisten=mb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=db.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gb.bind(null,e.syncEngine),n}function bb(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new Ib({next:m=>{h.eu(),o.enqueueAndForget(()=>ib(s,d)),m.fromCache&&u.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new ab(a,h,{includeMetadataChanges:!0,ua:!0});return rb(s,d)}(await kb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Vb(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pv(t){if(!ee.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Iv(t){if(ee.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function Yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xc(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jx;switch(r.type){case"firstParty":return new $x(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Sv.delete(n),r.terminate())}(this),Promise.resolve()}}function Db(t,e,n,r={}){var i;const s=(t=Yr(t,Rc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=It.MOCK_USER;else{a=EC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new It(c)}t._authCredentials=new Ux(new NE(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class Wr extends Js{constructor(e,n,r){super(e,n,qE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ee(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function kc(t,e,...n){if(t=ur(t),OT("collection","path",e),t instanceof Rc){const r=De.fromString(e,...n);return Iv(r),new Wr(t,null,r)}{if(!(t instanceof qt||t instanceof Wr))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return Iv(r),new Wr(t.firestore,null,r)}}function FT(t,e,...n){if(t=ur(t),arguments.length===1&&(e=ME.newId()),OT("doc","path",e),t instanceof Rc){const r=De.fromString(e,...n);return Pv(r),new qt(t,null,new ee(r))}{if(!(t instanceof qt||t instanceof Wr))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return Pv(r),new qt(t.firestore,t instanceof Wr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new _T(this,"async_queue_retry"),this.fu=()=>{const r=Vh();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new zr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Xs(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Up.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&se()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class za extends Rc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xv(e),this._firestoreClient=void 0,await e}}}function Nb(t,e){const n=typeof t=="object"?t:kx(),r=typeof t=="string"?t:"(default)",i=Ix(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=_C("firestore");s&&Db(i,...s)}return i}function BT(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Mb(t),t._firestoreClient}function Mb(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new sR(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Cb(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bs(yt.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bs(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=/^__.*__$/;class Ob{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fa(e,this.data,n,this.fieldTransforms)}}class jT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class Gp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return qu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(UT(this.Mu)&&Lb.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Fb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pc(e)}$u(e,n,r,i=!1){return new Gp({Mu:e,methodName:n,Ku:r,path:pt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(t){const e=t._freezeSettings(),n=Pc(t._databaseId);return new Fb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zT(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);Qp("Data must be an object, but it was:",o,r);const a=WT(r,o);let u,c;if(s.merge)u=new en(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=ud(e,d,n);if(!o.contains(m))throw new Y(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qT(h,m)||h.push(m)}u=new en(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Ob(new jt(a),u,c)}class Dc extends qp{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dc}}function Bb(t,e,n,r){const i=t.$u(1,e,n);Qp("Data must be an object, but it was:",i,r);const s=[],o=jt.empty();ii(r,(u,c)=>{const h=Xp(e,u,n);c=ur(c);const d=i.Bu(h);if(c instanceof Dc)s.push(h);else{const m=Wa(c,d);m!=null&&(s.push(h),o.set(h,m))}});const a=new en(s);return new jT(o,a,i.fieldTransforms)}function jb(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[ud(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(ud(e,s[m])),u.push(s[m+1]);const c=[],h=jt.empty();for(let m=a.length-1;m>=0;--m)if(!qT(c,a[m])){const E=a[m];let T=u[m];T=ur(T);const C=o.Bu(E);if(T instanceof Dc)c.push(E);else{const R=Wa(T,C);R!=null&&(c.push(E),h.set(E,R))}}const d=new en(c);return new jT(h,d,o.fieldTransforms)}function Ub(t,e,n,r=!1){return Wa(n,t.$u(r?4:3,e))}function Wa(t,e){if($T(t=ur(t)))return Qp("Unsupported field value:",e,t),WT(t,e);if(t instanceof qp)return function(r,i){if(!UT(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Wa(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ur(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:Uu(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uu(i.serializer,s)}}if(r instanceof Hp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bs)return{bytesValue:uT(i.serializer,r._byteString)};if(r instanceof qt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Dp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return kp(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${xc(r)}`)}(t,e)}function WT(t,e){const n={};return LE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(t,(r,i)=>{const s=Wa(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $T(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Hp||t instanceof Bs||t instanceof qt||t instanceof qp||t instanceof Kp)}function Qp(t,e,n){if(!$T(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xc(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function ud(t,e,n){if((e=ur(e))instanceof bc)return e._internalPath;if(typeof e=="string")return Xp(t,e);throw qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const zb=new RegExp("[~\\*/\\[\\]]");function Xp(t,e,n){if(e.search(zb)>=0)throw qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bc(...e.split("."))._internalPath}catch{throw qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(U.INVALID_ARGUMENT,a+t+u)}function qT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Wb extends HT{data(){return super.data()}}function Yp(t,e){return typeof e=="string"?Xp(t,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class qb extends Jp{}function Zp(t,e,...n){let r=[];e instanceof Jp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof tm).length,a=s.filter(u=>u instanceof Nc).length;if(o>1||o>0&&a>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Nc extends qb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nc(e,n,r)}_apply(e){const n=this._parse(e);return KT(e._query,n),new Js(e.firestore,e.converter,Zf(e._query,n))}_parse(e){const n=Vc(e.firestore);return function(s,o,a,u,c,h,d){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kv(d,h);const E=[];for(const T of d)E.push(Rv(u,s,T));m={arrayValue:{values:E}}}else m=Rv(u,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kv(d,h),m=Ub(a,o,d,h==="in"||h==="not-in");return Ye.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function em(t,e,n){const r=e,i=Yp("where",t);return Nc._create(i,r,n)}class tm extends Jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)KT(o,u),o=Zf(o,u)}(e._query,n),new Js(e.firestore,e.converter,Zf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Rv(t,e,n){if(typeof(n=ur(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HE(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(De.fromString(n));if(!ee.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xy(t,new ee(r))}if(n instanceof qt)return Xy(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xc(n)}.`)}function kv(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KT(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Hb{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ii(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ke(o.doubleValue));return new Kp(s)}convertGeoPoint(e){return new Hp(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_c(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ea(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);_e(mT(r));const i=new Ta(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kb extends HT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iu extends Kb{data(e={}){return super.data(e)}}class Gb{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ml(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new Ml(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ml(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ml(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Qb(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Qb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}class Xb extends Hb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,n)}}function nm(t){t=Yr(t,Js);const e=Yr(t.firestore,za),n=BT(e),r=new Xb(e);return $b(t._query),bb(n,t._query).then(i=>new Gb(e,r,t,i))}function Yb(t,e,n){t=Yr(t,qt);const r=Yr(t.firestore,za),i=GT(t.converter,e);return rm(r,[zT(Vc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Cn.none())])}function Jb(t,e,n,...r){t=Yr(t,qt);const i=Yr(t.firestore,za),s=Vc(i);let o;return o=typeof(e=ur(e))=="string"||e instanceof bc?jb(s,"updateDoc",t._key,e,n,r):Bb(s,"updateDoc",t._key,e),rm(i,[o.toMutation(t._key,Cn.exists(!0))])}function Zb(t,e){const n=Yr(t.firestore,za),r=FT(t),i=GT(t.converter,e);return rm(n,[zT(Vc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function rm(t,e){return function(r,i){const s=new zr;return r.asyncQueue.enqueueAndForget(async()=>yb(await Rb(r),i,s)),s.promise}(BT(t),e)}(function(e,n=!0){(function(i){Gs=i})(Rx),Mu(new va("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new za(new zx(r.getProvider("auth-internal")),new Hx(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ss($y,"4.7.5",e),Ss($y,"4.7.5","esm2017")})();var eV="firebase",tV="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(eV,tV,"app");const nV={apiKey:"AIzaSyDZwqZVDZtEwZPqbEJlZBuRtKBOJUVrJWo",authDomain:"tgmindmatch.firebaseapp.com",projectId:"tgmindmatch",storageBucket:"tgmindmatch.appspot.com",messagingSenderId:"1095814091947",appId:"1:1095814091947:web:d7b9d9c9c9c9c9c9c9c9c9"},rV=PE(nV);console.log("Firebase app initialized successfully");const Mc=Nb(rV);console.log("Firestore initialized successfully");const QT=O.createContext({user:null,setUser:()=>{},loading:!0,error:null}),im=()=>O.useContext(QT),iV=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{(async()=>{var c,h;try{if(console.log("Initializing user..."),!((c=window.Telegram)!=null&&c.WebApp)){console.error("Application must be opened in Telegram"),o("This application must be opened in Telegram"),i(!1);return}if(!Se||!Se.initData||!((h=Se.initDataUnsafe)!=null&&h.user)){console.error("WebApp initialization failed"),o("Failed to initialize Telegram Web App"),i(!1);return}const d=Se.initDataUnsafe.user,m=kc(Mc,"users"),E=Zp(m,em("id","==",String(d.id))),T=await nm(E);if(T.empty)n(null);else{const R=T.docs[0].data();n(R)}}catch(d){console.error("Error initializing user:",d),o(d instanceof Error?d.message:"Failed to initialize user")}finally{i(!1)}})()},[]);const a={user:e,setUser:n,loading:r,error:s};return K.jsx(QT.Provider,{value:a,children:t})};function sV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Lc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const cd=t=>Array.isArray(t);function XT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ia(t){return typeof t=="string"||Array.isArray(t)}function bv(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sm(t,e,n,r){if(typeof e=="function"){const[i,s]=bv(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=bv(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Oc(t,e,n){const r=t.getProps();return sm(r,e,n!==void 0?n:r.custom,t)}const om=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],am=["initial",...om],$a=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ui=new Set($a),tr=t=>t*1e3,nr=t=>t/1e3,oV={type:"spring",stiffness:500,damping:25,restSpeed:10},aV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lV={type:"keyframes",duration:.8},uV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cV=(t,{keyframes:e})=>e.length>2?lV:Ui.has(t)?t.startsWith("scale")?aV(e[1]):oV:uV;function lm(t,e){return t?t[e]||t.default||t:void 0}const hV={skipAnimations:!1,useManualTiming:!1},fV=t=>t!==null;function Fc(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(fV),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const kt=t=>t;function dV(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(u.schedule(c),t()),c(o)}const u={schedule:(c,h=!1,d=!1)=>{const E=d&&r?e:n;return h&&s.add(c),E.has(c)||E.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,u.process(c))}};return u}const Ll=["read","resolveKeyframes","update","preRender","render","postRender"],pV=40;function YT(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ll.reduce((w,g)=>(w[g]=dV(s),w),{}),{read:a,resolveKeyframes:u,update:c,preRender:h,render:d,postRender:m}=o,E=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,pV),1),i.timestamp=w,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),h.process(i),d.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},T=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:Ll.reduce((w,g)=>{const y=o[g];return w[g]=(b,L=!1,B=!1)=>(n||T(),y.schedule(b,L,B)),w},{}),cancel:w=>{for(let g=0;g<Ll.length;g++)o[Ll[g]].cancel(w)},state:i,steps:o}}const{schedule:Ie,cancel:Jr,state:ft,steps:Nh}=YT(typeof requestAnimationFrame<"u"?requestAnimationFrame:kt,!0),JT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,mV=1e-7,gV=12;function yV(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=JT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>mV&&++a<gV);return o}function qa(t,e,n,r){if(t===e&&n===r)return kt;const i=s=>yV(s,0,1,t,n);return s=>s===0||s===1?s:JT(i(s),e,r)}const ZT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,e1=t=>e=>1-t(1-e),t1=qa(.33,1.53,.69,.99),um=e1(t1),n1=ZT(um),r1=t=>(t*=2)<1?.5*um(t):.5*(2-Math.pow(2,-10*(t-1))),cm=t=>1-Math.sin(Math.acos(t)),i1=e1(cm),s1=ZT(cm),o1=t=>/^0[^.\s]+$/u.test(t);function vV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||o1(t):!0}let hd=kt;const a1=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),l1=t=>e=>typeof e=="string"&&e.startsWith(t),u1=l1("--"),_V=l1("var(--"),hm=t=>_V(t)?wV.test(t.split("/*")[0].trim()):!1,wV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,EV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function TV(t){const e=EV.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function c1(t,e,n=1){const[r,i]=TV(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return a1(o)?parseFloat(o):o}return hm(i)?c1(i,e,n+1):i}const Zr=(t,e,n)=>n>e?e:n<t?t:n,Zs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ca={...Zs,transform:t=>Zr(0,1,t)},Ol={...Zs,default:1},Ha=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ar=Ha("deg"),jn=Ha("%"),ie=Ha("px"),AV=Ha("vh"),SV=Ha("vw"),Vv={...jn,parse:t=>jn.parse(t)/100,transform:t=>jn.transform(t*100)},PV=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Dv=t=>t===Zs||t===ie,Nv=(t,e)=>parseFloat(t.split(", ")[e]),Mv=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Nv(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Nv(s[1],t):0}},IV=new Set(["x","y","z"]),CV=$a.filter(t=>!IV.has(t));function xV(t){const e=[];return CV.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const js={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Mv(4,13),y:Mv(5,14)};js.translateX=js.x;js.translateY=js.y;const h1=t=>e=>e.test(t),RV={test:t=>t==="auto",parse:t=>t},f1=[Zs,ie,jn,Ar,SV,AV,RV],Lv=t=>f1.find(h1(t)),Ri=new Set;let fd=!1,dd=!1;function d1(){if(dd){const t=Array.from(Ri).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=xV(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dd=!1,fd=!1,Ri.forEach(t=>t.complete()),Ri.clear()}function p1(){Ri.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dd=!0)})}function kV(){p1(),d1()}class fm{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ri.add(this),fd||(fd=!0,Ie.read(p1),Ie.resolveKeyframes(d1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,a);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ri.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ri.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Xo=t=>Math.round(t*1e5)/1e5,dm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bV(t){return t==null}const VV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pm=(t,e)=>n=>!!(typeof n=="string"&&VV.test(n)&&n.startsWith(t)||e&&!bV(n)&&Object.prototype.hasOwnProperty.call(n,e)),m1=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(dm);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},DV=t=>Zr(0,255,t),Mh={...Zs,transform:t=>Math.round(DV(t))},Si={test:pm("rgb","red"),parse:m1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Mh.transform(t)+", "+Mh.transform(e)+", "+Mh.transform(n)+", "+Xo(Ca.transform(r))+")"};function NV(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const pd={test:pm("#"),parse:NV,transform:Si.transform},ds={test:pm("hsl","hue"),parse:m1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+jn.transform(Xo(e))+", "+jn.transform(Xo(n))+", "+Xo(Ca.transform(r))+")"},Pt={test:t=>Si.test(t)||pd.test(t)||ds.test(t),parse:t=>Si.test(t)?Si.parse(t):ds.test(t)?ds.parse(t):pd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Si.transform(t):ds.transform(t)},MV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(dm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(MV))===null||n===void 0?void 0:n.length)||0)>0}const g1="number",y1="color",OV="var",FV="var(",Ov="${}",BV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xa(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(BV,u=>(Pt.test(u)?(r.color.push(s),i.push(y1),n.push(Pt.parse(u))):u.startsWith(FV)?(r.var.push(s),i.push(OV),n.push(u)):(r.number.push(s),i.push(g1),n.push(parseFloat(u))),++s,Ov)).split(Ov);return{values:n,split:a,indexes:r,types:i}}function v1(t){return xa(t).values}function _1(t){const{split:e,types:n}=xa(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===g1?s+=Xo(i[o]):a===y1?s+=Pt.transform(i[o]):s+=i[o]}return s}}const jV=t=>typeof t=="number"?0:t;function UV(t){const e=v1(t);return _1(t)(e.map(jV))}const ei={test:LV,parse:v1,createTransformer:_1,getAnimatableNone:UV},zV=new Set(["brightness","contrast","saturate","opacity"]);function WV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(dm)||[];if(!r)return t;const i=n.replace(r,"");let s=zV.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const $V=/\b([a-z-]*)\(.*?\)/gu,md={...ei,getAnimatableNone:t=>{const e=t.match($V);return e?e.map(WV).join(" "):t}},qV={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,backgroundPositionX:ie,backgroundPositionY:ie},HV={rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:Ol,scaleX:Ol,scaleY:Ol,scaleZ:Ol,skew:Ar,skewX:Ar,skewY:Ar,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:Ca,originX:Vv,originY:Vv,originZ:ie},Fv={...Zs,transform:Math.round},mm={...qV,...HV,zIndex:Fv,size:ie,fillOpacity:Ca,strokeOpacity:Ca,numOctaves:Fv},KV={...mm,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:md,WebkitFilter:md},gm=t=>KV[t];function w1(t,e){let n=gm(t);return n!==md&&(n=ei),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const GV=new Set(["auto","none","0"]);function QV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!GV.has(s)&&xa(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=w1(n,i)}class E1 extends fm{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),hm(c))){const h=c1(c,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!PV.has(r)||e.length!==2)return;const[i,s]=e,o=Lv(i),a=Lv(s);if(o!==a)if(Dv(o)&&Dv(a))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)vV(e[i])&&r.push(i);r.length&&QV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=js[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=js[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function ym(t){return typeof t=="function"}let su;function XV(){su=void 0}const Un={now:()=>(su===void 0&&Un.set(ft.isProcessing||hV.useManualTiming?ft.timestamp:performance.now()),su),set:t=>{su=t,queueMicrotask(XV)}},Bv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ei.test(t)||t==="0")&&!t.startsWith("url("));function YV(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function JV(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Bv(i,e),a=Bv(s,e);return!o||!a?!1:YV(t)||(n==="spring"||ym(n))&&r}const ZV=40;class T1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Un.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>ZV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&kV(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Un.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:u,isGenerator:c}=this.options;if(!c&&!JV(e,r,i,s))if(o)this.options.duration=0;else{u==null||u(Fc(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function A1(t,e){return e?t*(1e3/e):0}const eD=5;function S1(t,e,n){const r=Math.max(e-eD,0);return A1(n-t(r),e-r)}const Lh=.001,tD=.01,nD=10,rD=.05,iD=1;function sD({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Zr(rD,iD,o),t=Zr(tD,nD,nr(t)),o<1?(i=c=>{const h=c*o,d=h*t,m=h-n,E=gd(c,o),T=Math.exp(-d);return Lh-m/E*T},s=c=>{const d=c*o*t,m=d*n+n,E=Math.pow(o,2)*Math.pow(c,2)*t,T=Math.exp(-d),C=gd(Math.pow(c,2),o);return(-i(c)+Lh>0?-1:1)*((m-E)*T)/C}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Lh+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,u=aD(i,s,a);if(t=tr(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const oD=12;function aD(t,e,n){let r=n;for(let i=1;i<oD;i++)r=r-t(r)/e(r);return r}function gd(t,e){return t*Math.sqrt(1-e*e)}const lD=["duration","bounce"],uD=["stiffness","damping","mass"];function jv(t,e){return e.some(n=>t[n]!==void 0)}function cD(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!jv(t,uD)&&jv(t,lD)){const n=sD(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function P1({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:m}=cD({...r,velocity:-nr(r.velocity||0)}),E=d||0,T=u/(2*Math.sqrt(a*c)),C=s-i,R=nr(Math.sqrt(a/c)),w=Math.abs(C)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let g;if(T<1){const y=gd(R,T);g=b=>{const L=Math.exp(-T*R*b);return s-L*((E+T*R*C)/y*Math.sin(y*b)+C*Math.cos(y*b))}}else if(T===1)g=y=>s-Math.exp(-R*y)*(C+(E+R*C)*y);else{const y=R*Math.sqrt(T*T-1);g=b=>{const L=Math.exp(-T*R*b),B=Math.min(y*b,300);return s-L*((E+T*R*C)*Math.sinh(B)+y*C*Math.cosh(B))/y}}return{calculatedDuration:m&&h||null,next:y=>{const b=g(y);if(m)o.done=y>=h;else{let L=0;T<1&&(L=y===0?tr(E):S1(g,y,b));const B=Math.abs(L)<=n,A=Math.abs(s-b)<=e;o.done=B&&A}return o.value=o.done?s:b,o}}}function Uv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const d=t[0],m={done:!1,value:d},E=v=>a!==void 0&&v<a||u!==void 0&&v>u,T=v=>a===void 0?u:u===void 0||Math.abs(a-v)<Math.abs(u-v)?a:u;let C=n*e;const R=d+C,w=o===void 0?R:o(R);w!==R&&(C=w-d);const g=v=>-C*Math.exp(-v/r),y=v=>w+g(v),b=v=>{const S=g(v),P=y(v);m.done=Math.abs(S)<=c,m.value=m.done?w:P};let L,B;const A=v=>{E(m.value)&&(L=v,B=P1({keyframes:[m.value,T(m.value)],velocity:S1(y,v,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return A(0),{calculatedDuration:null,next:v=>{let S=!1;return!B&&L===void 0&&(S=!0,b(v),A(v)),L!==void 0&&v>=L?B.next(v-L):(!S&&b(v),m)}}}const hD=qa(.42,0,1,1),fD=qa(0,0,.58,1),I1=qa(.42,0,.58,1),dD=t=>Array.isArray(t)&&typeof t[0]!="number",vm=t=>Array.isArray(t)&&typeof t[0]=="number",zv={linear:kt,easeIn:hD,easeInOut:I1,easeOut:fD,circIn:cm,circInOut:s1,circOut:i1,backIn:um,backInOut:n1,backOut:t1,anticipate:r1},Wv=t=>{if(vm(t)){hd(t.length===4);const[e,n,r,i]=t;return qa(e,n,r,i)}else if(typeof t=="string")return hd(zv[t]!==void 0),zv[t];return t},pD=(t,e)=>n=>e(t(n)),rr=(...t)=>t.reduce(pD),Us=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},je=(t,e,n)=>t+(e-t)*n;function Oh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mD({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=Oh(u,a,t+1/3),s=Oh(u,a,t),o=Oh(u,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Hu(t,e){return n=>n>0?e:t}const Fh=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},gD=[pd,Si,ds],yD=t=>gD.find(e=>e.test(t));function $v(t){const e=yD(t);if(!e)return!1;let n=e.parse(t);return e===ds&&(n=mD(n)),n}const qv=(t,e)=>{const n=$v(t),r=$v(e);if(!n||!r)return Hu(t,e);const i={...n};return s=>(i.red=Fh(n.red,r.red,s),i.green=Fh(n.green,r.green,s),i.blue=Fh(n.blue,r.blue,s),i.alpha=je(n.alpha,r.alpha,s),Si.transform(i))},yd=new Set(["none","hidden"]);function vD(t,e){return yd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function _D(t,e){return n=>je(t,e,n)}function _m(t){return typeof t=="number"?_D:typeof t=="string"?hm(t)?Hu:Pt.test(t)?qv:TD:Array.isArray(t)?C1:typeof t=="object"?Pt.test(t)?qv:wD:Hu}function C1(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>_m(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function wD(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=_m(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ED(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],u=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=u,i[o]++}return r}const TD=(t,e)=>{const n=ei.createTransformer(e),r=xa(t),i=xa(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?yd.has(t)&&!i.values.length||yd.has(e)&&!r.values.length?vD(t,e):rr(C1(ED(r,i),i.values),n):Hu(t,e)};function x1(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?je(t,e,n):_m(t)(t,e)}function AD(t,e,n){const r=[],i=n||x1,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||kt:e;a=rr(u,a)}r.push(a)}return r}function SD(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(hd(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=AD(e,r,i),a=o.length,u=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=Us(t[h],t[h+1],c);return o[h](d)};return n?c=>u(Zr(t[0],t[s-1],c)):u}function PD(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Us(0,e,r);t.push(je(n,1,i))}}function ID(t){const e=[0];return PD(e,t.length-1),e}function CD(t,e){return t.map(n=>n*e)}function xD(t,e){return t.map(()=>e||I1).splice(0,t.length-1)}function Ku({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=dD(r)?r.map(Wv):Wv(r),s={done:!1,value:e[0]},o=CD(n&&n.length===e.length?n:ID(e),t),a=SD(o,e,{ease:Array.isArray(i)?i:xD(e,i)});return{calculatedDuration:t,next:u=>(s.value=a(u),s.done=u>=t,s)}}const Hv=2e4;function RD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Hv;)e+=n,r=t.next(e);return e>=Hv?1/0:e}const kD=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ie.update(e,!0),stop:()=>Jr(e),now:()=>ft.isProcessing?ft.timestamp:Un.now()}},bD={decay:Uv,inertia:Uv,tween:Ku,keyframes:Ku,spring:P1},VD=t=>t/100;class wm extends T1{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||fm,a=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=ym(n)?n:bD[n]||Ku;let u,c;a!==Ku&&typeof e[0]!="number"&&(u=rr(VD,x1(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=RD(h));const{calculatedDuration:d}=h,m=d+i,E=m*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:d,resolvedDuration:m,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:v}=this.options;return{done:!0,value:v[v.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:m,repeat:E,repeatType:T,repeatDelay:C,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-m*(this.speed>=0?1:-1),g=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let y=this.currentTime,b=s;if(E){const v=Math.min(this.currentTime,h)/d;let S=Math.floor(v),P=v%1;!P&&v>=1&&(P=1),P===1&&S--,S=Math.min(S,E+1),!!(S%2)&&(T==="reverse"?(P=1-P,C&&(P-=C/d)):T==="mirror"&&(b=o)),y=Zr(0,1,P)*d}const L=g?{done:!1,value:u[0]}:b.next(y);a&&(L.value=a(L.value));let{done:B}=L;!g&&c!==null&&(B=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return A&&i!==void 0&&(L.value=Fc(u,this.options,i)),R&&R(L.value),A&&this.finish(),L}get duration(){const{resolved:e}=this;return e?nr(e.calculatedDuration):0}get time(){return nr(this.currentTime)}set time(e){e=tr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=nr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=kD,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const DD=new Set(["opacity","clipPath","filter","transform"]),ND=10,MD=(t,e)=>{let n="";const r=Math.max(Math.round(e/ND),2);for(let i=0;i<r;i++)n+=t(Us(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function Em(t){let e;return()=>(e===void 0&&(e=t()),e)}const LD={linearEasing:void 0};function OD(t,e){const n=Em(t);return()=>{var r;return(r=LD[e])!==null&&r!==void 0?r:n()}}const Gu=OD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function R1(t){return!!(typeof t=="function"&&Gu()||!t||typeof t=="string"&&(t in vd||Gu())||vm(t)||Array.isArray(t)&&t.every(R1))}const Mo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,vd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mo([0,.65,.55,1]),circOut:Mo([.55,0,1,.45]),backIn:Mo([.31,.01,.66,-.59]),backOut:Mo([.33,1.53,.69,.99])};function k1(t,e){if(t)return typeof t=="function"&&Gu()?MD(t,e):vm(t)?Mo(t):Array.isArray(t)?t.map(n=>k1(n,e)||vd.easeOut):vd[t]}function FD(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=k1(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function Kv(t,e){t.timeline=e,t.onfinish=null}const BD=Em(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Qu=10,jD=2e4;function UD(t){return ym(t.type)||t.type==="spring"||!R1(t.ease)}function zD(t,e){const n=new wm({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<jD;)r=n.sample(s),i.push(r.value),s+=Qu;return{times:void 0,keyframes:i,duration:s-Qu,ease:"linear"}}const b1={anticipate:r1,backInOut:n1,circInOut:s1};function WD(t){return t in b1}class Gv extends T1{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new E1(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:u,name:c,startTime:h}=this.options;if(!(!((r=u.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&Gu()&&WD(o)&&(o=b1[o]),UD(this.options)){const{onComplete:m,onUpdate:E,motionValue:T,element:C,...R}=this.options,w=zD(e,R);e=w.keyframes,e.length===1&&(e[1]=e[0]),i=w.duration,s=w.times,o=w.ease,a="keyframes"}const d=FD(u.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return d.startTime=h??this.calcStartTime(),this.pendingTimeline?(Kv(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:m}=this.options;u.set(Fc(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return nr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return nr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=tr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return kt;const{animation:r}=n;Kv(r,e)}return kt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:m,...E}=this.options,T=new wm({...E,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),C=tr(this.time);c.setWithVelocity(T.sample(C-Qu).value,T.sample(C).value,Qu)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return BD()&&r&&DD.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const $D=Em(()=>window.ScrollTimeline!==void 0);class qD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>$D()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function HD({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const Tm=(t,e,n,r={},i,s)=>o=>{const a=lm(r,t)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-tr(u);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};HD(a)||(h={...h,...cV(t,h)}),h.duration&&(h.duration=tr(h.duration)),h.repeatDelay&&(h.repeatDelay=tr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const m=Fc(h.keyframes,a);if(m!==void 0)return Ie.update(()=>{h.onUpdate(m),h.onComplete()}),new qD([])}return!s&&Gv.supports(h)?new Gv(h):new wm(h)},KD=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),GD=t=>cd(t)?t[t.length-1]||0:t;function Am(t,e){t.indexOf(e)===-1&&t.push(e)}function Sm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Pm{constructor(){this.subscriptions=[]}add(e){return Am(this.subscriptions,e),()=>Sm(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qv=30,QD=t=>!isNaN(parseFloat(t));class XD{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Un.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Un.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Pm);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Qv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Qv);return A1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ra(t,e){return new XD(t,e)}function YD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ra(n))}function JD(t,e){const n=Oc(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=GD(s[o]);YD(t,o,a)}}const Im=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ZD="framerAppearId",V1="data-"+Im(ZD);function D1(t){return t.props[V1]}const Rt=t=>!!(t&&t.getVelocity);function e2(t){return!!(Rt(t)&&t.add)}function _d(t,e){const n=t.getValue("willChange");if(e2(n))return n.add(e)}function t2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function N1(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in u){const m=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),E=u[d];if(E===void 0||h&&t2(h,d))continue;const T={delay:n,...lm(o||{},d)};let C=!1;if(window.MotionHandoffAnimation){const w=D1(t);if(w){const g=window.MotionHandoffAnimation(w,d,Ie);g!==null&&(T.startTime=g,C=!0)}}_d(t,d),m.start(Tm(d,m,E,t.shouldReduceMotion&&Ui.has(d)?{type:!1}:T,t,C));const R=m.animation;R&&c.push(R)}return a&&Promise.all(c).then(()=>{Ie.update(()=>{a&&JD(t,a)})}),c}function wd(t,e,n={}){var r;const i=Oc(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(N1(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:m}=s;return n2(t,e,h+c,d,m,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[c,h]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function n2(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(r2).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(wd(c,e,{...s,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function r2(t,e){return t.sortNodePosition(e)}function i2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>wd(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=wd(t,e,n);else{const i=typeof e=="function"?Oc(t,e,n.custom):e;r=Promise.all(N1(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const s2=am.length;function M1(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?M1(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<s2;n++){const r=am[n],i=t.props[r];(Ia(i)||i===!1)&&(e[r]=i)}return e}const o2=[...om].reverse(),a2=om.length;function l2(t){return e=>Promise.all(e.map(({animation:n,options:r})=>i2(t,n,r)))}function u2(t){let e=l2(t),n=Xv(),r=!0;const i=u=>(c,h)=>{var d;const m=Oc(t,h,u==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(m){const{transition:E,transitionEnd:T,...C}=m;c={...c,...C,...T}}return c};function s(u){e=u(t)}function o(u){const{props:c}=t,h=M1(t.parent)||{},d=[],m=new Set;let E={},T=1/0;for(let R=0;R<a2;R++){const w=o2[R],g=n[w],y=c[w]!==void 0?c[w]:h[w],b=Ia(y),L=w===u?g.isActive:null;L===!1&&(T=R);let B=y===h[w]&&y!==c[w]&&b;if(B&&r&&t.manuallyAnimateOnMount&&(B=!1),g.protectedKeys={...E},!g.isActive&&L===null||!y&&!g.prevProp||Lc(y)||typeof y=="boolean")continue;const A=c2(g.prevProp,y);let v=A||w===u&&g.isActive&&!B&&b||R>T&&b,S=!1;const P=Array.isArray(y)?y:[y];let V=P.reduce(i(w),{});L===!1&&(V={});const{prevResolvedValues:D={}}=g,k={...D,...V},it=Ce=>{v=!0,m.has(Ce)&&(S=!0,m.delete(Ce)),g.needsAnimating[Ce]=!0;const q=t.getValue(Ce);q&&(q.liveStyle=!1)};for(const Ce in k){const q=V[Ce],ne=D[Ce];if(E.hasOwnProperty(Ce))continue;let te=!1;cd(q)&&cd(ne)?te=!XT(q,ne):te=q!==ne,te?q!=null?it(Ce):m.add(Ce):q!==void 0&&m.has(Ce)?it(Ce):g.protectedKeys[Ce]=!0}g.prevProp=y,g.prevResolvedValues=V,g.isActive&&(E={...E,...V}),r&&t.blockInitialAnimation&&(v=!1),v&&(!(B&&A)||S)&&d.push(...P.map(Ce=>({animation:Ce,options:{type:w}})))}if(m.size){const R={};m.forEach(w=>{const g=t.getBaseTarget(w),y=t.getValue(w);y&&(y.liveStyle=!0),R[w]=g??null}),d.push({animation:R})}let C=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(d):Promise.resolve()}function a(u,c){var h;if(n[u].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var E;return(E=m.animationState)===null||E===void 0?void 0:E.setActive(u,c)}),n[u].isActive=c;const d=o(u);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Xv(),r=!0}}}function c2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!XT(e,t):!1}function pi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xv(){return{animate:pi(!0),whileInView:pi(),whileHover:pi(),whileTap:pi(),whileDrag:pi(),whileFocus:pi(),exit:pi()}}class oi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class h2 extends oi{constructor(e){super(e),e.animationState||(e.animationState=u2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let f2=0;class d2 extends oi{constructor(){super(...arguments),this.id=f2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const p2={animation:{Feature:h2},exit:{Feature:d2}},L1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Bc(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const m2=t=>e=>L1(e)&&t(e,Bc(e));function Zn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ir(t,e,n,r){return Zn(t,e,m2(n),r)}const Yv=(t,e)=>Math.abs(t-e);function g2(t,e){const n=Yv(t.x,e.x),r=Yv(t.y,e.y);return Math.sqrt(n**2+r**2)}class O1{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=jh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,E=g2(d.offset,{x:0,y:0})>=3;if(!m&&!E)return;const{point:T}=d,{timestamp:C}=ft;this.history.push({...T,timestamp:C});const{onStart:R,onMove:w}=this.handlers;m||(R&&R(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Bh(m,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:E,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=jh(d.type==="pointercancel"?this.lastMoveEventInfo:Bh(m,this.transformPagePoint),this.history);this.startEvent&&E&&E(d,R),T&&T(d,R)},!L1(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Bc(e),a=Bh(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=ft;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,jh(a,this.history)),this.removeListeners=rr(ir(this.contextWindow,"pointermove",this.handlePointerMove),ir(this.contextWindow,"pointerup",this.handlePointerUp),ir(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Jr(this.updatePoint)}}function Bh(t,e){return e?{point:e(t.point)}:t}function Jv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jh({point:t},e){return{point:t,delta:Jv(t,F1(e)),offset:Jv(t,y2(e)),velocity:v2(e,.1)}}function y2(t){return t[0]}function F1(t){return t[t.length-1]}function v2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=F1(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>tr(e)));)n--;if(!r)return{x:0,y:0};const s=nr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function B1(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Zv=B1("dragHorizontal"),e0=B1("dragVertical");function j1(t){let e=!1;if(t==="y")e=e0();else if(t==="x")e=Zv();else{const n=Zv(),r=e0();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function U1(){const t=j1(!0);return t?(t(),!1):!0}function ps(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const z1=1e-4,_2=1-z1,w2=1+z1,W1=.01,E2=0-W1,T2=0+W1;function rn(t){return t.max-t.min}function A2(t,e,n){return Math.abs(t-e)<=n}function t0(t,e,n,r=.5){t.origin=r,t.originPoint=je(e.min,e.max,t.origin),t.scale=rn(n)/rn(e),t.translate=je(n.min,n.max,t.origin)-t.originPoint,(t.scale>=_2&&t.scale<=w2||isNaN(t.scale))&&(t.scale=1),(t.translate>=E2&&t.translate<=T2||isNaN(t.translate))&&(t.translate=0)}function Yo(t,e,n,r){t0(t.x,e.x,n.x,r?r.originX:void 0),t0(t.y,e.y,n.y,r?r.originY:void 0)}function n0(t,e,n){t.min=n.min+e.min,t.max=t.min+rn(e)}function S2(t,e,n){n0(t.x,e.x,n.x),n0(t.y,e.y,n.y)}function r0(t,e,n){t.min=e.min-n.min,t.max=t.min+rn(e)}function Jo(t,e,n){r0(t.x,e.x,n.x),r0(t.y,e.y,n.y)}function P2(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?je(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?je(n,t,r.max):Math.min(t,n)),t}function i0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I2(t,{top:e,left:n,bottom:r,right:i}){return{x:i0(t.x,n,i),y:i0(t.y,e,r)}}function s0(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function C2(t,e){return{x:s0(t.x,e.x),y:s0(t.y,e.y)}}function x2(t,e){let n=.5;const r=rn(t),i=rn(e);return i>r?n=Us(e.min,e.max-r,t.min):r>i&&(n=Us(t.min,t.max-i,e.min)),Zr(0,1,n)}function R2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ed=.35;function k2(t=Ed){return t===!1?t=0:t===!0&&(t=Ed),{x:o0(t,"left","right"),y:o0(t,"top","bottom")}}function o0(t,e,n){return{min:a0(t,e),max:a0(t,n)}}function a0(t,e){return typeof t=="number"?t:t[e]||0}const l0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ms=()=>({x:l0(),y:l0()}),u0=()=>({min:0,max:0}),He=()=>({x:u0(),y:u0()});function hn(t){return[t("x"),t("y")]}function $1({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function b2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function V2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Uh(t){return t===void 0||t===1}function Td({scale:t,scaleX:e,scaleY:n}){return!Uh(t)||!Uh(e)||!Uh(n)}function vi(t){return Td(t)||q1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function q1(t){return c0(t.x)||c0(t.y)}function c0(t){return t&&t!=="0%"}function Xu(t,e,n){const r=t-n,i=e*r;return n+i}function h0(t,e,n,r,i){return i!==void 0&&(t=Xu(t,i,r)),Xu(t,n,r)+e}function Ad(t,e=0,n=1,r,i){t.min=h0(t.min,e,n,r,i),t.max=h0(t.max,e,n,r,i)}function H1(t,{x:e,y:n}){Ad(t.x,e.translate,e.scale,e.originPoint),Ad(t.y,n.translate,n.scale,n.originPoint)}const f0=.999999999999,d0=1.0000000000001;function D2(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ys(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,H1(t,o)),r&&vi(s.latestValues)&&ys(t,s.latestValues))}e.x<d0&&e.x>f0&&(e.x=1),e.y<d0&&e.y>f0&&(e.y=1)}function gs(t,e){t.min=t.min+e,t.max=t.max+e}function p0(t,e,n,r,i=.5){const s=je(t.min,t.max,i);Ad(t,e,n,s,r)}function ys(t,e){p0(t.x,e.x,e.scaleX,e.scale,e.originX),p0(t.y,e.y,e.scaleY,e.scale,e.originY)}function K1(t,e){return $1(V2(t.getBoundingClientRect(),e))}function N2(t,e,n){const r=K1(t,n),{scroll:i}=e;return i&&(gs(r.x,i.offset.x),gs(r.y,i.offset.y)),r}const G1=({current:t})=>t?t.ownerDocument.defaultView:null,M2=new WeakMap;class L2{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bc(h,"page").point)},s=(h,d)=>{const{drag:m,dragPropagation:E,onDragStart:T}=this.getProps();if(m&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=j1(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hn(R=>{let w=this.getAxisMotionValue(R).get()||0;if(jn.test(w)){const{projection:g}=this.visualElement;if(g&&g.layout){const y=g.layout.layoutBox[R];y&&(w=rn(y)*(parseFloat(w)/100))}}this.originPoint[R]=w}),T&&Ie.postRender(()=>T(h,d)),_d(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:m,dragDirectionLock:E,onDirectionLock:T,onDrag:C}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:R}=d;if(E&&this.currentDirection===null){this.currentDirection=O2(R),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",d.point,R),this.updateAxis("y",d.point,R),this.visualElement.render(),C&&C(h,d)},a=(h,d)=>this.stop(h,d),u=()=>hn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new O1(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:G1(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ie.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Fl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=P2(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ps(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=I2(i.layoutBox,n):this.constraints=!1,this.elastic=k2(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=R2(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ps(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=N2(r,i.root,this.visualElement.getTransformPagePoint());let o=C2(i.layout.layoutBox,s);if(n){const a=n(b2(o));this.hasMutatedConstraints=!!a,a&&(o=$1(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=hn(h=>{if(!Fl(h,n,this.currentDirection))return;let d=u&&u[h]||{};o&&(d={min:0,max:0});const m=i?200:1e6,E=i?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,T)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _d(this.visualElement,e),r.start(Tm(e,r,0,n,this.visualElement,!1))}stopAnimation(){hn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){hn(n=>{const{drag:r}=this.getProps();if(!Fl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-je(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ps(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const u=a.get();i[o]=x2({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),hn(o=>{if(!Fl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(je(u,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;M2.set(this.visualElement,this);const e=this.visualElement.current,n=ir(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();ps(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ie.read(r);const o=Zn(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(hn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=u[h].translate,d.set(d.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Ed,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Fl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function O2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class F2 extends oi{constructor(e){super(e),this.removeGroupControls=kt,this.removeListeners=kt,this.controls=new L2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kt}unmount(){this.removeGroupControls(),this.removeListeners()}}const m0=t=>(e,n)=>{t&&Ie.postRender(()=>t(e,n))};class B2 extends oi{constructor(){super(...arguments),this.removePointerDownListener=kt}onPointerDown(e){this.session=new O1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:m0(e),onStart:m0(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ie.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ir(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jc=O.createContext(null);function j2(){const t=O.useContext(jc);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=O.useId();O.useEffect(()=>r(i),[]);const s=O.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const Cm=O.createContext({}),Q1=O.createContext({}),ou={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Co={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ie.test(t))t=parseFloat(t);else return t;const n=g0(t,e.target.x),r=g0(t,e.target.y);return`${n}% ${r}%`}},U2={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ei.parse(t);if(i.length>5)return r;const s=ei.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=u;const c=je(a,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},Yu={};function z2(t){Object.assign(Yu,t)}const{schedule:xm,cancel:WM}=YT(queueMicrotask,!1);class W2 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;z2($2),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ou.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ie.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function X1(t){const[e,n]=j2(),r=O.useContext(Cm);return K.jsx(W2,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(Q1),isPresent:e,safeToRemove:n})}const $2={borderRadius:{...Co,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Co,borderTopRightRadius:Co,borderBottomLeftRadius:Co,borderBottomRightRadius:Co,boxShadow:U2},Y1=["TopLeft","TopRight","BottomLeft","BottomRight"],q2=Y1.length,y0=t=>typeof t=="string"?parseFloat(t):t,v0=t=>typeof t=="number"||ie.test(t);function H2(t,e,n,r,i,s){i?(t.opacity=je(0,n.opacity!==void 0?n.opacity:1,K2(r)),t.opacityExit=je(e.opacity!==void 0?e.opacity:1,0,G2(r))):s&&(t.opacity=je(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<q2;o++){const a=`border${Y1[o]}Radius`;let u=_0(e,a),c=_0(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||v0(u)===v0(c)?(t[a]=Math.max(je(y0(u),y0(c),r),0),(jn.test(c)||jn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=je(e.rotate||0,n.rotate||0,r))}function _0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const K2=J1(0,.5,i1),G2=J1(.5,.95,kt);function J1(t,e,n){return r=>r<t?0:r>e?1:n(Us(t,e,r))}function w0(t,e){t.min=e.min,t.max=e.max}function cn(t,e){w0(t.x,e.x),w0(t.y,e.y)}function E0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function T0(t,e,n,r,i){return t-=e,t=Xu(t,1/n,r),i!==void 0&&(t=Xu(t,1/i,r)),t}function Q2(t,e=0,n=1,r=.5,i,s=t,o=t){if(jn.test(e)&&(e=parseFloat(e),e=je(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=je(s.min,s.max,r);t===s&&(a-=e),t.min=T0(t.min,e,n,a,i),t.max=T0(t.max,e,n,a,i)}function A0(t,e,[n,r,i],s,o){Q2(t,e[n],e[r],e[i],e.scale,s,o)}const X2=["x","scaleX","originX"],Y2=["y","scaleY","originY"];function S0(t,e,n,r){A0(t.x,e,X2,n?n.x:void 0,r?r.x:void 0),A0(t.y,e,Y2,n?n.y:void 0,r?r.y:void 0)}function P0(t){return t.translate===0&&t.scale===1}function Z1(t){return P0(t.x)&&P0(t.y)}function I0(t,e){return t.min===e.min&&t.max===e.max}function J2(t,e){return I0(t.x,e.x)&&I0(t.y,e.y)}function C0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function eA(t,e){return C0(t.x,e.x)&&C0(t.y,e.y)}function x0(t){return rn(t.x)/rn(t.y)}function R0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Z2{constructor(){this.members=[]}add(e){Am(this.members,e),e.scheduleRender()}remove(e){if(Sm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function eN(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:m,skewX:E,skewY:T}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),E&&(r+=`skewX(${E}deg) `),T&&(r+=`skewY(${T}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const tN=(t,e)=>t.depth-e.depth;class nN{constructor(){this.children=[],this.isDirty=!1}add(e){Am(this.children,e),this.isDirty=!0}remove(e){Sm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tN),this.isDirty=!1,this.children.forEach(e)}}function au(t){const e=Rt(t)?t.get():t;return KD(e)?e.toValue():e}function rN(t,e){const n=Un.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Jr(r),t(s-e))};return Ie.read(r,!0),()=>Jr(r)}function iN(t){return t instanceof SVGElement&&t.tagName!=="svg"}function sN(t,e,n){const r=Rt(t)?t:Ra(t);return r.start(Tm("",r,e,n)),r.animation}const _i={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Lo=typeof window<"u"&&window.MotionDebug!==void 0,zh=["","X","Y","Z"],oN={visibility:"hidden"},k0=1e3;let aN=0;function Wh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function tA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=D1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ie,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&tA(r)}function nA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=aN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Lo&&(_i.totalNodes=_i.resolvedTargetDeltas=_i.recalculatedProjection=0),this.nodes.forEach(cN),this.nodes.forEach(mN),this.nodes.forEach(gN),this.nodes.forEach(hN),Lo&&window.MotionDebug.record(_i)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new nN)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Pm),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=iN(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let d;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=rN(m,250),ou.hasAnimatedSinceResize&&(ou.hasAnimatedSinceResize=!1,this.nodes.forEach(V0))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:E,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||h.getDefaultTransition()||EN,{onLayoutAnimationStart:R,onLayoutAnimationComplete:w}=h.getProps(),g=!this.targetLayout||!eA(this.targetLayout,T)||E,y=!m&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||m&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,y);const b={...lm(C,"layout"),onPlay:R,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else m||V0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Jr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yN),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(b0);return}this.isUpdating||this.nodes.forEach(dN),this.isUpdating=!1,this.nodes.forEach(pN),this.nodes.forEach(lN),this.nodes.forEach(uN),this.clearAllSnapshots();const a=Un.now();ft.delta=Zr(0,1e3/60,a-ft.timestamp),ft.timestamp=a,ft.isProcessing=!0,Nh.update.process(ft),Nh.preRender.process(ft),Nh.render.process(ft),ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fN),this.sharedNodes.forEach(vN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Z1(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||vi(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),TN(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return He();const u=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(AN))){const{scroll:h}=this.root;h&&(gs(u.x,h.offset.x),gs(u.y,h.offset.y))}return u}removeElementScroll(o){var a;const u=He();if(cn(u,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:m}=h;h!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&cn(u,o),gs(u.x,d.offset.x),gs(u.y,d.offset.y))}return u}applyTransform(o,a=!1){const u=He();cn(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ys(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),vi(h.latestValues)&&ys(u,h.latestValues)}return vi(this.latestValues)&&ys(u,this.latestValues),u}removeTransform(o){const a=He();cn(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!vi(c.latestValues))continue;Td(c.latestValues)&&c.updateSnapshot();const h=He(),d=c.measurePageBox();cn(h,d),S0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return vi(this.latestValues)&&S0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=ft.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),Jo(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cn(this.target,this.layout.layoutBox),H1(this.target,this.targetDelta)):cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),Jo(this.relativeTargetOrigin,this.target,E.target),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Lo&&_i.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Td(this.parent.latestValues)||q1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ft.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;cn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,E=this.treeScale.y;D2(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=He());const{target:T}=a;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E0(this.prevProjectionDelta.x,this.projectionDelta.x),E0(this.prevProjectionDelta.y,this.projectionDelta.y)),Yo(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==E||!R0(this.projectionDelta.x,this.prevProjectionDelta.x)||!R0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Lo&&_i.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ms(),this.projectionDelta=ms(),this.projectionDeltaWithTransform=ms()}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},d=ms();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=He(),E=u?u.source:void 0,T=this.layout?this.layout.source:void 0,C=E!==T,R=this.getStack(),w=!R||R.members.length<=1,g=!!(C&&!w&&this.options.crossfade===!0&&!this.path.some(wN));this.animationProgress=0;let y;this.mixTargetDelta=b=>{const L=b/1e3;D0(d.x,o.x,L),D0(d.y,o.y,L),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jo(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_N(this.relativeTarget,this.relativeTargetOrigin,m,L),y&&J2(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=He()),cn(y,this.relativeTarget)),C&&(this.animationValues=h,H2(h,c,this.latestValues,L,g,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Jr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{ou.hasAnimatedSinceResize=!0,this.currentAnimation=sN(0,k0,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(k0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&rA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||He();const d=rn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+d;const m=rn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}cn(a,u),ys(a,h),Yo(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Z2),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&Wh("z",o,c,this.animationValues);for(let h=0;h<zh.length;h++)Wh(`rotate${zh[h]}`,o,c,this.animationValues),Wh(`skew${zh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oN;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=au(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=au(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!vi(this.latestValues)&&(C.transform=h?h({},""):"none",this.hasProjected=!1),C}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=eN(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:E,y:T}=this.projectionDelta;c.transformOrigin=`${E.origin*100}% ${T.origin*100}% 0`,d.animationValues?c.opacity=d===this?(u=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const C in Yu){if(m[C]===void 0)continue;const{correct:R,applyTo:w}=Yu[C],g=c.transform==="none"?m[C]:R(m[C],d);if(w){const y=w.length;for(let b=0;b<y;b++)c[w[b]]=g}else c[C]=g}return this.options.layoutId&&(c.pointerEvents=d===this?au(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(b0),this.root.sharedNodes.clear()}}}function lN(t){t.updateLayout()}function uN(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?hn(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],E=rn(m);m.min=r[d].min,m.max=m.min+E}):rA(s,n.layoutBox,r)&&hn(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],E=rn(r[d]);m.max=m.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+E)});const a=ms();Yo(a,r,n.layoutBox);const u=ms();o?Yo(u,t.applyTransform(i,!0),n.measuredBox):Yo(u,r,n.layoutBox);const c=!Z1(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:E}=d;if(m&&E){const T=He();Jo(T,n.layoutBox,m.layoutBox);const C=He();Jo(C,r,E.layoutBox),eA(T,C)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=T,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function cN(t){Lo&&_i.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function fN(t){t.clearSnapshot()}function b0(t){t.clearMeasurements()}function dN(t){t.isLayoutDirty=!1}function pN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function V0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function mN(t){t.resolveTargetDelta()}function gN(t){t.calcProjection()}function yN(t){t.resetSkewAndRotation()}function vN(t){t.removeLeadSnapshot()}function D0(t,e,n){t.translate=je(e.translate,0,n),t.scale=je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function N0(t,e,n,r){t.min=je(e.min,n.min,r),t.max=je(e.max,n.max,r)}function _N(t,e,n,r){N0(t.x,e.x,n.x,r),N0(t.y,e.y,n.y,r)}function wN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EN={duration:.45,ease:[.4,0,.1,1]},M0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),L0=M0("applewebkit/")&&!M0("chrome/")?Math.round:kt;function O0(t){t.min=L0(t.min),t.max=L0(t.max)}function TN(t){O0(t.x),O0(t.y)}function rA(t,e,n){return t==="position"||t==="preserve-aspect"&&!A2(x0(e),x0(n),.2)}function AN(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const SN=nA({attachResizeListener:(t,e)=>Zn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$h={current:void 0},iA=nA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$h.current){const t=new SN({});t.mount(window),t.setOptions({layoutScroll:!0}),$h.current=t}return $h.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PN={pan:{Feature:B2},drag:{Feature:F2,ProjectionNode:iA,MeasureLayout:X1}};function F0(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||U1())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const u=a[r];u&&Ie.postRender(()=>u(s,o))};return ir(t.current,n,i,{passive:!t.getProps()[r]})}class IN extends oi{mount(){this.unmount=rr(F0(this.node,!0),F0(this.node,!1))}unmount(){}}class CN extends oi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rr(Zn(this.node.current,"focus",()=>this.onFocus()),Zn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const sA=(t,e)=>e?t===e?!0:sA(t,e.parentElement):!1;function qh(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Bc(n))}class xN extends oi{constructor(){super(...arguments),this.removeStartListeners=kt,this.removeEndListeners=kt,this.removeAccessibleListeners=kt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=ir(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:d}=this.node.getProps(),m=!d&&!sA(this.node.current,a.target)?h:c;m&&Ie.update(()=>m(a,u))},{passive:!(r.onTap||r.onPointerUp)}),o=ir(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=rr(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||qh("up",(u,c)=>{const{onTap:h}=this.node.getProps();h&&Ie.postRender(()=>h(u,c))})};this.removeEndListeners(),this.removeEndListeners=Zn(this.node.current,"keyup",o),qh("down",(a,u)=>{this.startPress(a,u)})},n=Zn(this.node.current,"keydown",e),r=()=>{this.isPressing&&qh("cancel",(s,o)=>this.cancelPress(s,o))},i=Zn(this.node.current,"blur",r);this.removeAccessibleListeners=rr(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ie.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!U1()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ie.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ir(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Zn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=rr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Sd=new WeakMap,Hh=new WeakMap,RN=t=>{const e=Sd.get(t.target);e&&e(t)},kN=t=>{t.forEach(RN)};function bN({root:t,...e}){const n=t||document;Hh.has(n)||Hh.set(n,{});const r=Hh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(kN,{root:t,...e})),r[i]}function VN(t,e,n){const r=bN(e);return Sd.set(t,n),r.observe(t),()=>{Sd.delete(t),r.unobserve(t)}}const DN={some:0,all:1};class NN extends oi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:DN[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=c?h:d;m&&m(u)};return VN(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MN(e,n))&&this.startObserver()}unmount(){}}function MN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const LN={inView:{Feature:NN},tap:{Feature:xN},focus:{Feature:CN},hover:{Feature:IN}},ON={layout:{ProjectionNode:iA,MeasureLayout:X1}},Rm=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Uc=O.createContext({}),km=typeof window<"u",oA=km?O.useLayoutEffect:O.useEffect,aA=O.createContext({strict:!1});function FN(t,e,n,r,i){var s,o;const{visualElement:a}=O.useContext(Uc),u=O.useContext(aA),c=O.useContext(jc),h=O.useContext(Rm).reducedMotion,d=O.useRef();r=r||u.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=d.current,E=O.useContext(Q1);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&BN(d.current,n,i,E);const T=O.useRef(!1);O.useInsertionEffect(()=>{m&&T.current&&m.update(n,c)});const C=n[V1],R=O.useRef(!!C&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,C))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,C)));return oA(()=>{m&&(T.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),xm.render(m.render),R.current&&m.animationState&&m.animationState.animateChanges())}),O.useEffect(()=>{m&&(!R.current&&m.animationState&&m.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,C)}),R.current=!1))}),m}function BN(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:lA(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ps(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function lA(t){if(t)return t.options.allowProjection!==!1?t.projection:lA(t.parent)}function jN(t,e,n){return O.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ps(n)&&(n.current=r))},[e])}function zc(t){return Lc(t.animate)||am.some(e=>Ia(t[e]))}function uA(t){return!!(zc(t)||t.variants)}function UN(t,e){if(zc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ia(n)?n:void 0,animate:Ia(r)?r:void 0}}return t.inherit!==!1?e:{}}function zN(t){const{initial:e,animate:n}=UN(t,O.useContext(Uc));return O.useMemo(()=>({initial:e,animate:n}),[B0(e),B0(n)])}function B0(t){return Array.isArray(t)?t.join(" "):t}const j0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zs={};for(const t in j0)zs[t]={isEnabled:e=>j0[t].some(n=>!!e[n])};function WN(t){for(const e in t)zs[e]={...zs[e],...t[e]}}const $N=Symbol.for("motionComponentSymbol");function qN({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&WN(t);function s(a,u){let c;const h={...O.useContext(Rm),...a,layoutId:HN(a)},{isStatic:d}=h,m=zN(a),E=r(a,d);if(!d&&km){KN();const T=GN(h);c=T.MeasureLayout,m.visualElement=FN(i,E,h,e,T.ProjectionNode)}return K.jsxs(Uc.Provider,{value:m,children:[c&&m.visualElement?K.jsx(c,{visualElement:m.visualElement,...h}):null,n(i,a,jN(E,m.visualElement,u),E,d,m.visualElement)]})}const o=O.forwardRef(s);return o[$N]=i,o}function HN({layoutId:t}){const e=O.useContext(Cm).id;return e&&t!==void 0?e+"-"+t:t}function KN(t,e){O.useContext(aA).strict}function GN(t){const{drag:e,layout:n}=zs;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const QN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bm(t){return typeof t!="string"||t.includes("-")?!1:!!(QN.indexOf(t)>-1||/[A-Z]/u.test(t))}function cA(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const hA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fA(t,e,n,r){cA(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(hA.has(i)?i:Im(i),e.attrs[i])}function dA(t,{layout:e,layoutId:n}){return Ui.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yu[t]||t==="opacity")}function Vm(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Rt(i[o])||e.style&&Rt(e.style[o])||dA(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function pA(t,e,n){const r=Vm(t,e,n);for(const i in t)if(Rt(t[i])||Rt(e[i])){const s=$a.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Dm(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}function XN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:YN(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const mA=t=>(e,n)=>{const r=O.useContext(Uc),i=O.useContext(jc),s=()=>XN(t,e,r,i);return n?s():Dm(s)};function YN(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=au(s[m]);let{initial:o,animate:a}=t;const u=zc(t),c=uA(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!Lc(d)){const m=Array.isArray(d)?d:[d];for(let E=0;E<m.length;E++){const T=sm(t,m[E]);if(T){const{transitionEnd:C,transition:R,...w}=T;for(const g in w){let y=w[g];if(Array.isArray(y)){const b=h?y.length-1:0;y=y[b]}y!==null&&(i[g]=y)}for(const g in C)i[g]=C[g]}}}return i}const Nm=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gA=()=>({...Nm(),attrs:{}}),yA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,JN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZN=$a.length;function eM(t,e,n){let r="",i=!0;for(let s=0;s<ZN;s++){const o=$a[s],a=t[o];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(o.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||n){const c=yA(a,mm[o]);if(!u){i=!1;const h=JN[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const u in e){const c=e[u];if(Ui.has(u)){o=!0;continue}else if(u1(u)){i[u]=c;continue}else{const h=yA(c,mm[u]);u.startsWith("origin")?(a=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=eM(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${c} ${h}`}}function U0(t,e,n){return typeof t=="string"?t:ie.transform(e+n*t)}function tM(t,e,n){const r=U0(e,t.x,t.width),i=U0(n,t.y,t.height);return`${r} ${i}`}const nM={offset:"stroke-dashoffset",array:"stroke-dasharray"},rM={offset:"strokeDashoffset",array:"strokeDasharray"};function iM(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?nM:rM;t[s.offset]=ie.transform(-r);const o=ie.transform(e),a=ie.transform(n);t[s.array]=`${o} ${a}`}function Lm(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,d){if(Mm(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:E,dimensions:T}=t;m.transform&&(T&&(E.transform=m.transform),delete m.transform),T&&(i!==void 0||s!==void 0||E.transform)&&(E.transformOrigin=tM(T,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&iM(m,o,a,u,!1)}const Om=t=>typeof t=="string"&&t.toLowerCase()==="svg",sM={useVisualState:mA({scrapeMotionValuesFromProps:pA,createRenderState:gA,onMount:(t,e,{renderState:n,latestValues:r})=>{Ie.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ie.render(()=>{Lm(n,r,Om(e.tagName),t.transformTemplate),fA(e,n)})}})},oM={useVisualState:mA({scrapeMotionValuesFromProps:Vm,createRenderState:Nm})};function vA(t,e,n){for(const r in e)!Rt(e[r])&&!dA(r,n)&&(t[r]=e[r])}function aM({transformTemplate:t},e){return O.useMemo(()=>{const n=Nm();return Mm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function lM(t,e){const n=t.style||{},r={};return vA(r,n,t),Object.assign(r,aM(t,e)),r}function uM(t,e){const n={},r=lM(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const cM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ju(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||cM.has(t)}let _A=t=>!Ju(t);function hM(t){t&&(_A=e=>e.startsWith("on")?!Ju(e):t(e))}try{hM(require("@emotion/is-prop-valid").default)}catch{}function fM(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(_A(i)||n===!0&&Ju(i)||!e&&!Ju(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function dM(t,e,n,r){const i=O.useMemo(()=>{const s=gA();return Lm(s,e,Om(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vA(s,t.style,t),i.style={...s,...i.style}}return i}function pM(t=!1){return(n,r,i,{latestValues:s},o)=>{const u=(bm(n)?dM:uM)(r,s,o,n),c=fM(r,typeof n=="string",t),h=n!==O.Fragment?{...c,...u,ref:i}:{},{children:d}=r,m=O.useMemo(()=>Rt(d)?d.get():d,[d]);return O.createElement(n,{...h,children:m})}}function mM(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...bm(r)?sM:oM,preloadedFeatures:t,useRender:pM(i),createVisualElement:e,Component:r};return qN(o)}}const Pd={current:null},wA={current:!1};function gM(){if(wA.current=!0,!!km)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pd.current=t.matches;t.addListener(e),e()}else Pd.current=!1}function yM(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Rt(i))t.addValue(r,i);else if(Rt(s))t.addValue(r,Ra(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ra(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const z0=new WeakMap,vM=[...f1,Pt,ei],_M=t=>vM.find(h1(t)),W0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wM{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Un.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ie.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=zc(n),this.isVariantNode=uA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in d){const E=d[m];u[m]!==void 0&&Rt(E)&&E.set(u[m],!1)}}mount(e){this.current=e,z0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),wA.current||gM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Pd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){z0.delete(this.current),this.projection&&this.projection.unmount(),Jr(this.notifyUpdate),Jr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ui.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in zs){const n=zs[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<W0.length;r++){const i=W0[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=yM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ra(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(a1(i)||o1(i))?i=parseFloat(i):!_M(i)&&ei.test(n)&&(i=w1(e,n)),this.setBaseTarget(e,Rt(i)?i.get():i)),Rt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=sm(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Rt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Pm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class EA extends wM{constructor(){super(...arguments),this.KeyframeResolver=E1}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function EM(t){return window.getComputedStyle(t)}class TM extends EA{constructor(){super(...arguments),this.type="html",this.renderInstance=cA}readValueFromInstance(e,n){if(Ui.has(n)){const r=gm(n);return r&&r.default||0}else{const r=EM(e),i=(u1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return K1(e,n)}build(e,n,r){Mm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Vm(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class AM extends EA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=He}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ui.has(n)){const r=gm(n);return r&&r.default||0}return n=hA.has(n)?n:Im(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return pA(e,n,r)}build(e,n,r){Lm(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){fA(e,n,r,i)}mount(e){this.isSVGTag=Om(e.tagName),super.mount(e)}}const SM=(t,e)=>bm(t)?new AM(e):new TM(e,{allowProjection:t!==O.Fragment}),PM=mM({...p2,...LN,...PN,...ON},SM),Dt=sV(PM);class IM extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function CM({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),i=O.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=O.useContext(Rm);return O.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),K.jsx(IM,{isPresent:e,childRef:r,sizeRef:i,children:O.cloneElement(t,{ref:r})})}const xM=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Dm(RM),u=O.useId(),c=O.useCallback(d=>{a.set(d,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),h=O.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return O.useMemo(()=>{a.forEach((d,m)=>a.set(m,!1))},[n]),O.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=K.jsx(CM,{isPresent:n,children:t})),K.jsx(jc.Provider,{value:h,children:t})};function RM(){return new Map}const Bl=t=>t.key||"";function $0(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const kM=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=O.useMemo(()=>$0(t),[t]),u=a.map(Bl),c=O.useRef(!0),h=O.useRef(a),d=Dm(()=>new Map),[m,E]=O.useState(a),[T,C]=O.useState(a);oA(()=>{c.current=!1,h.current=a;for(let g=0;g<T.length;g++){const y=Bl(T[g]);u.includes(y)?d.delete(y):d.get(y)!==!0&&d.set(y,!1)}},[T,u.length,u.join("-")]);const R=[];if(a!==m){let g=[...a];for(let y=0;y<T.length;y++){const b=T[y],L=Bl(b);u.includes(L)||(g.splice(y,0,b),R.push(b))}o==="wait"&&R.length&&(g=R),C($0(g)),E(a);return}const{forceRender:w}=O.useContext(Cm);return K.jsx(K.Fragment,{children:T.map(g=>{const y=Bl(g),b=a===T||u.includes(y),L=()=>{if(d.has(y))d.set(y,!0);else return;let B=!0;d.forEach(A=>{A||(B=!1)}),B&&(w==null||w(),C(h.current),i&&i())};return K.jsx(xM,{isPresent:b,initial:!c.current||r?void 0:!1,custom:b?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:b?void 0:L,children:g},y)})})},bM=({isSearching:t})=>K.jsxs("div",{className:"relative flex items-center justify-center w-40 h-40",children:[K.jsx(Dt.div,{animate:{scale:t?[1,1.2,1]:1,opacity:t?[.7,.3,.7]:.7},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute w-20 h-20 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full blur-sm"}),K.jsx(Dt.div,{animate:{scale:t?[.8,1,.8]:.9,opacity:t?[.8,1,.8]:.9},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"absolute w-16 h-16 bg-gradient-to-br from-blue-300 via-purple-400 to-pink-400 rounded-full",style:{filter:"blur(1px)"}}),Array.from({length:3}).map((e,n)=>K.jsx(Dt.div,{animate:{rotate:t?360:0},transition:{duration:8-n*2,repeat:1/0,ease:"linear"},className:"absolute w-full h-full",style:{width:`${100+n*40}%`,height:`${100+n*40}%`},children:Array.from({length:4}).map((r,i)=>K.jsx(Dt.div,{className:"absolute w-2 h-2",style:{top:"50%",left:"50%",transform:`rotate(${i*90}deg) translateX(${50+n*20}%)`},children:K.jsx(Dt.div,{animate:{scale:t?[1,1.5,1]:1,opacity:t?[.5,1,.5]:.5},transition:{duration:1.5,repeat:1/0,delay:i*.2+n*.3},className:"w-full h-full bg-gradient-to-r from-blue-400 to-purple-400 rounded-full",style:{filter:"blur(1px)"}})},`particle-${n}-${i}`))},`orbit-${n}`)),t&&Array.from({length:8}).map((e,n)=>K.jsx(Dt.div,{className:"absolute w-1.5 h-1.5 bg-blue-400 rounded-full",initial:{x:Math.cos(n*Math.PI/4)*100,y:Math.sin(n*Math.PI/4)*100,opacity:0,scale:0},animate:{x:0,y:0,opacity:[0,1,0],scale:[0,1,0]},transition:{duration:2,repeat:1/0,delay:n*.25,ease:"easeInOut"}},`thought-${n}`))]}),VM=({nickname:t,similarity:e,angle:n,distance:r,delay:i})=>{const s=Math.cos(n)*r,o=Math.sin(n)*r;return K.jsxs(Dt.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:i,duration:.5,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",style:{transform:`translate(calc(-50% + ${s}px), calc(-50% + ${o}px))`},children:[K.jsx(Dt.div,{initial:{opacity:0},animate:{opacity:.3},transition:{delay:i+.2},className:"absolute top-1/2 left-1/2 h-px bg-gradient-to-r from-blue-400 to-transparent",style:{width:Math.sqrt(s*s+o*o),transform:`rotate(${Math.atan2(o,s)}rad)`,transformOrigin:"0 0",zIndex:0}}),K.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-3 flex flex-col items-center space-y-1 min-w-[120px] z-10",children:[K.jsx("span",{className:"text-sm font-medium text-gray-800 whitespace-nowrap",children:t}),K.jsxs("span",{className:"text-xs text-blue-500 font-semibold",children:[e,"% match"]})]})]})},DM=[{id:"test1",nickname:"Alice",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alice",telegram_id:"test_alice_123"},{id:"test2",nickname:"Bob",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Bob",telegram_id:"test_bob_456"},{id:"test3",nickname:"Charlie",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Charlie",telegram_id:"test_charlie_789"},{id:"test4",nickname:"Diana",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Diana",telegram_id:"test_diana_101"},{id:"test5",nickname:"Evan",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Evan",telegram_id:"test_evan_102"},{id:"test6",nickname:"Fiona",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Fiona",telegram_id:"test_fiona_103"},{id:"test7",nickname:"George",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=George",telegram_id:"test_george_104"},{id:"test8",nickname:"Hannah",image:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hannah",telegram_id:"test_hannah_105"}],NM=async()=>{try{const t=kc(Mc,"users");for(const e of DM)await Yb(FT(t,e.id),{nickname:e.nickname,image:e.image,telegram_id:e.telegram_id,createdAt:new Date().toISOString()}),console.log(`Added test user: ${e.nickname}`);console.log("Successfully added all test users!")}catch(t){console.error("Error adding test users:",t)}};function MM(){const{user:t,loading:e,error:n}=im(),[r,i]=O.useState(""),[s,o]=O.useState([]),[a,u]=O.useState(!1),c=async d=>{if(!d.trim()){o([]);return}u(!0);try{const m=kc(Mc,"users"),E=Zp(m,em("nickname","!=",t==null?void 0:t.nickname)),T=await nm(E),C=[];T.forEach(R=>{const w=R.data(),g=Math.random()*100;g>50&&C.push({nickname:w.nickname,thoughtSimilarity:Math.round(g)})}),o(C.sort((R,w)=>w.thoughtSimilarity-R.thoughtSimilarity))}catch(m){console.error("Error finding similar minds:",m)}u(!1)},h=async()=>{await NM(),r&&c(r)};return O.useEffect(()=>{const d=setTimeout(()=>{r&&c(r)},500);return()=>clearTimeout(d)},[r]),e?K.jsx("div",{className:"flex items-center justify-center min-h-screen",children:K.jsxs(Dt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center space-y-4",children:[K.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),K.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"Loading your mindspace..."})]})}):n||!t?K.jsx("div",{className:"flex items-center justify-center min-h-screen",children:K.jsx(Dt.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-lg text-red-600 bg-red-50 px-6 py-4 rounded-lg shadow-sm",children:n||"Please restart the app"})}):t.nickname?K.jsxs("div",{className:"min-h-screen h-full w-full flex flex-col bg-gradient-to-b from-blue-50 to-white",children:[K.jsx("header",{className:"flex-none w-full border-b border-gray-100",children:K.jsx("div",{className:"container mx-auto max-w-5xl px-4 py-4",children:K.jsxs("div",{className:"flex items-center justify-between",children:[K.jsxs("div",{className:"flex items-center gap-2",children:[K.jsx("img",{src:t.image,alt:"User",className:"w-10 h-10 rounded-full shadow-sm"}),K.jsx("span",{className:"text-lg font-semibold text-gray-800",children:t.nickname})]}),K.jsx("button",{onClick:h,className:"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Add Test Users"})]})})}),K.jsx("main",{className:"flex-1 w-full",children:K.jsxs("div",{className:"container mx-auto max-w-5xl px-4 py-6 space-y-6",children:[K.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:K.jsx("textarea",{value:r,onChange:d=>i(d.target.value),placeholder:"Share your thought to find like-minded people...",className:"w-full h-32 p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})}),K.jsxs("div",{className:"relative min-h-[500px] flex items-center justify-center bg-gradient-to-r from-blue-50/50 via-purple-50/50 to-blue-50/50 rounded-xl p-8 overflow-visible",children:[K.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:K.jsx(bM,{isSearching:a})}),K.jsx("div",{className:"relative w-full h-full",children:K.jsx(kM,{children:s.map((d,m)=>{const E=m*2*Math.PI/s.length;return K.jsx(VM,{nickname:d.nickname,similarity:d.thoughtSimilarity,angle:E,distance:200,delay:m*.1},d.nickname)})})})]})]})})]}):K.jsx(iC,{to:"/nickname",replace:!0})}const LM=()=>{const t=Tp(),{user:e}=im();return O.useEffect(()=>{e&&e.nickname&&t("/home"),Se.setBackgroundColor("#ffffff"),Se.expand()},[e,t]),K.jsx(Dt.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 flex items-center justify-center bg-gradient-to-b from-purple-50 to-white touch-none",style:{height:"100%",minHeight:"-webkit-fill-available"},children:K.jsxs(Dt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"text-center px-6 max-w-md w-full",children:[K.jsx(Dt.h1,{initial:{y:-20},animate:{y:0},transition:{delay:.3},className:"text-4xl font-bold text-purple-800 mb-4",children:"Welcome to MindMatch"}),K.jsx(Dt.p,{initial:{y:-20},animate:{y:0},transition:{delay:.4},className:"text-lg text-gray-600 mb-8",children:"Where thoughts connect people"}),K.jsx(Dt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},onClick:()=>t("/nickname"),className:"px-8 py-3 bg-purple-600 text-white rounded-full font-semibold shadow-lg hover:bg-purple-700 transition-all",children:"Get Started"})]})})},OM=()=>{const t=Tp(),{setUser:e}=im(),[n,r]=O.useState(""),[i,s]=O.useState(!1),[o,a]=O.useState(""),[u,c]=O.useState(!1),[h,d]=O.useState(null);O.useEffect(()=>{(()=>{var w,g;const R=!!((w=window.Telegram)!=null&&w.WebApp&&(Se!=null&&Se.initData));console.log("Checking Telegram WebApp:",{isTelegram:R,webAppExists:!!Se,windowTelegramExists:!!((g=window.Telegram)!=null&&g.WebApp),initDataExists:!!(Se!=null&&Se.initData)}),d(R),R&&(Se.ready(),Se.expand())})()},[]);const m=C=>{if(C.length<3){a("Nickname must be at least 3 characters long"),c(!1);return}if(!/^[a-zA-Z0-9_]+$/.test(C)){a("Only letters, numbers, and underscores are allowed"),c(!1);return}a(""),c(!0)},E=C=>{const R=C.target.value;r(R),m(R)},T=async()=>{var C;if(console.log("Submit button clicked"),!u){console.log("Nickname is not valid, stopping submission");return}try{s(!0),console.log("Starting save process...");const R=(C=Se.initDataUnsafe)==null?void 0:C.user;if(console.log("WebApp user data:",R),!R)throw new Error("No user data available");const w=kc(Mc,"users"),g=Zp(w,em("id","==",String(R.id))),y=await nm(g);if(y.empty){const b={id:String(R.id),nickname:n,first_name:R.first_name||null,last_name:R.last_name||null,username:R.username||null,createdAt:new Date().toISOString()};await Zb(w,b),e(b),Se.showPopup({title:"Success!",message:"Nickname saved successfully!",buttons:[{type:"ok"}]}),t("/home",{replace:!0})}else{const b=y.docs[0].ref;await Jb(b,{nickname:n});const L={...y.docs[0].data(),nickname:n};e(L),Se.showPopup({title:"Success!",message:"Nickname saved successfully!",buttons:[{type:"ok"}]}),t("/home",{replace:!0})}s(!1)}catch(R){console.error("Error saving nickname:",R);const w=R instanceof Error?R.message:"Unknown error occurred";Se.showPopup({title:"Error",message:`Failed to save nickname: ${w}`,buttons:[{type:"ok"}]})}finally{s(!1)}};return h===null?K.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white p-4",children:K.jsx("div",{className:"text-center",children:K.jsx("p",{className:"text-gray-600",children:"Loading..."})})}):h?K.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white p-4",children:K.jsxs("div",{className:"w-full max-w-md space-y-4",children:[K.jsx("h1",{className:"text-2xl font-bold text-center text-purple-800",children:"Create Your Identity"}),K.jsxs("div",{children:[K.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Choose a nickname"}),K.jsx("input",{type:"text",value:n,onChange:E,className:`w-full px-4 py-3 rounded-lg border ${o?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"Enter your nickname",disabled:i}),o&&K.jsx("p",{className:"mt-1 text-sm text-red-500",children:o})]}),K.jsx("button",{onClick:T,disabled:!u||i,className:`w-full py-3 px-4 rounded-lg font-medium text-white
            ${u&&!i?"bg-purple-600 hover:bg-purple-700":"bg-gray-400"}
            transition-colors`,children:i?"Saving...":"Continue"})]})}):K.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white p-4",children:K.jsxs("div",{className:"text-center",children:[K.jsx("h2",{className:"text-xl font-bold text-red-500 mb-4",children:"Not in Telegram"}),K.jsxs("p",{className:"text-gray-600",children:["This app must be opened through Telegram.",K.jsx("br",{}),"Please use the app through your Telegram client."]})]})})};function FM(){return O.useEffect(()=>{console.log("App mounted"),console.log("WebApp object:",Se),console.log("Window Telegram object:",window.Telegram),Se?(console.log("WebApp initialized"),Se.ready(),Se.expand()):console.error("WebApp not initialized")},[]),K.jsx(iV,{children:K.jsx(uC,{children:K.jsx("div",{className:"min-h-screen h-full w-full flex flex-col",children:K.jsx("main",{className:"flex-1",children:K.jsxs(oC,{children:[K.jsx(Jl,{path:"/",element:K.jsx(LM,{})}),K.jsx(Jl,{path:"/nickname",element:K.jsx(OM,{})}),K.jsx(Jl,{path:"/home",element:K.jsx(MM,{})})]})})})})})}window.onerror=function(t,e,n,r,i){return console.error("Window Error:",{msg:t,url:e,lineNo:n,columnNo:r,error:i}),!1};window.onunhandledrejection=function(t){console.error("Unhandled Promise Rejection:",t.reason)};var q0;console.log("Platform Info:",{userAgent:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor,webApp:!!((q0=window.Telegram)!=null&&q0.WebApp),webAppPlatform:Se==null?void 0:Se.platform,initDataUnsafe:Se==null?void 0:Se.initDataUnsafe});const Fm=document.getElementById("root");if(!Fm)throw new Error("Root element not found");const BM=iE(Fm);try{BM.render(K.jsx(O.StrictMode,{children:K.jsx(FM,{})}))}catch(t){console.error("Error rendering app:",t),Fm.innerHTML=`
    <div style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      color: black;
      padding: 20px;
      text-align: center;
    ">
      <div>
        <h1 style="margin-bottom: 10px;">Something went wrong</h1>
        <p>Please try restarting the app</p>
      </div>
    </div>
  `}
